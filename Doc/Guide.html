<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5.dev">
<title>Introduction</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p><a href="#introduction"><span class="underline">Introduction</span></a></p>
</div>
<div class="paragraph">
<p><a href="#caractéristiques-de-programmation"><span class="underline">Caractéristiques de programmation</span></a></p>
</div>
<div class="paragraph">
<p><a href="#Installation"><span class="underline">Installation</span></a></p>
</div>
<div class="paragraph">
<p><a href="#Mon-premier-projet"><span class="underline">Mon premier projet</span></a></p>
</div>
<div class="paragraph">
<p><a href="#La-classe-Application"><span class="underline">La classe Application</span></a></p>
</div>
<div class="paragraph">
<p><a href="#Les-classes-base-de-données"><span class="underline">Les classes base de données</span></a></p>
</div>
<div class="paragraph">
<p><a href="#La-classe-Zone-Web-Simple"><span class="underline">La classe Zone Web Simple</span></a></p>
</div>
<div class="paragraph">
<p><a href="#La-classe-Zone-Bootstrap"><span class="underline">La classe Zone Bootstrap</span></a></p>
</div>
<div class="paragraph">
<p><a href="#La-classe-Tache-Programmée"><span class="underline">La classe Tache Programmée</span></a></p>
</div>
<div class="paragraph">
<p><a href="#La-classe-Service-Persistant"><span class="underline">La classe Service Persistant</span></a></p>
</div>
<div class="paragraph">
<p><a href="#Organisation-dune-solution-PHP-PV"><span class="underline">Organisation d’une solution PHP-PV</span></a></p>
</div>
<div class="sect1">
<h2 id="trueintroduction"><a class="anchor" href="#trueintroduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>PHP-PV est une bibliothèque PHP qui permet de réaliser des solutions pour entreprises.</p>
</div>
<div class="paragraph">
<p>Elle offre des objets PHP pour créer :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Des applications web, jQuery et Bootstrap</p>
</li>
<li>
<p>Des processus web et consoles asynchrones</p>
</li>
<li>
<p>Des scripts d’invite de commande</p>
</li>
<li>
<p>Des serveurs sockets</p>
</li>
<li>
<p>Des services persistants</p>
</li>
<li>
<p>Des services web SOAP 1.1, SOAP 1.2 et JSON-RPC</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les avantages offerts par PHP-PV :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La philosophie de programmation est facile à apprendre</p>
</li>
<li>
<p>La rapidité pour produire des applications d’entreprise</p>
</li>
<li>
<p>Chaque objet créé peut accéder aux autres dans l’environnement</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truecaract-ristiques-de-programmation"><a class="anchor" href="#truecaract-ristiques-de-programmation"></a>Caractéristiques de programmation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truem-thode-de-programmation"><a class="anchor" href="#truem-thode-de-programmation"></a>Méthode de programmation</h3>
<div class="paragraph">
<p>Pour utiliser PHP-PV efficacement, vous devez bien connaître ces concepts :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>hériter les classes</p>
</li>
<li>
<p>réécrire des méthodes</p>
</li>
<li>
<p>utiliser les objets référencés dans d’autres objets</p>
</li>
<li>
<p>Utiliser les noms des classes comme paramètre de méthode</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="trueprojets-pr-ts-l-emploi"><a class="anchor" href="#trueprojets-pr-ts-l-emploi"></a>Projets prêts à l’emploi</h3>
<div class="paragraph">
<p>Les créateurs et contributeurs ont posté plusieurs projets personnalisables.</p>
</div>
<div class="paragraph">
<p>Une fois le projet téléchargé, Vous devrez :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Modifier le nom d’espace dans les constantes</p>
</li>
<li>
<p>Modifier le nom d’espace dans les noms de classe</p>
</li>
<li>
<p>Modifier les variables et constantes dans le fichier de configuration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Vous pouvez réaliser facilement ces actions avec les éditeurs de code source (Notepad++, Sublime Text, Eclipse, Ms Visual Studio, Visual Studio Code, NetBeans, …).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueinstallation"><a class="anchor" href="#trueinstallation"></a>Installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truestructure-de-solution"><a class="anchor" href="#truestructure-de-solution"></a>Structure de solution</h3>
<div class="paragraph">
<p>Vous devez copier la bibliothèque PHP-PV directement dans le dossier RACINE de votre serveur WEB.</p>
</div>
<div class="paragraph">
<p><span class="underline">Exemples</span> :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sous Apache, c’est le dossier « /srv/www/hdtocs » ou « /var/www/html »</p>
</li>
<li>
<p>Sous Wamp, c’est le dossier « C:/…/wamp/www »</p>
</li>
<li>
<p>Sous XAMPP, c’est le dossier « C:/…/xampp/www »</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="truedossiers-principaux"><a class="anchor" href="#truedossiers-principaux"></a>Dossiers principaux</h3>
<div class="paragraph">
<p>La bibliothèque contient les répertoires suivants :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Pv</strong> : Dossier contenant les classes principales</p>
</li>
<li>
<p><strong>Sws</strong> : Dossier contenant les classes pour créer des sites web comme un CMS (Déprécié)</p>
</li>
<li>
<p><strong>misc</strong> : Dossier contenant les librairies PHP tiers</p>
</li>
<li>
<p><strong>Ak</strong> : Dossier contenant les classes d’authentification</p>
</li>
<li>
<p><strong>Common</strong> : Dossier contenant d’autres librairies communes</p>
</li>
<li>
<p><strong>ExpatXml</strong> : Dossier contenant les classes pour analyser les fichiers Xml</p>
</li>
<li>
<p><strong>NativeThread</strong> : Dossier contenant les classes d’exécution de processus en asynchrone</p>
</li>
<li>
<p><strong>CommonDB</strong> : Dossier contenant les classes de base de données</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truemon-premier-projet"><a class="anchor" href="#truemon-premier-projet"></a>Mon premier projet</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truecr-ation-du-dossier-solution"><a class="anchor" href="#truecr-ation-du-dossier-solution"></a>Création du dossier solution</h3>
<div class="paragraph">
<p>Vous allez créer un dossier pour votre solution, au même niveau que le dossier « PHP-PV ».</p>
</div>
<div class="paragraph">
<p>Exemple :</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="extracted-media/media/image1.png" alt="image" width="447" height="249"></span></p>
</div>
<div class="paragraph">
<p>Ensuite, créez un fichier PHP dans ce dossier.</p>
</div>
<div class="paragraph">
<p>Comme première instruction, incluez le fichier « <strong>../PHP-PV/Pv/Base.class.php</strong> »</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">&lt;?php
include dirname(__FILE__)."/../PHP-PV/Pv/Base.class.php" ;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trued-claration-de-l-application"><a class="anchor" href="#trued-claration-de-l-application"></a>Déclaration de l’application</h3>
<div class="paragraph">
<p>Dans ce fichier PHP, déclarez votre classe <strong>ApplicationSolution1</strong>, qui héritera de la classe <strong>PvApplication</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class ApplicationSolution1 extends PvApplication {
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trued-claration-de-la-zone-web"><a class="anchor" href="#trued-claration-de-la-zone-web"></a>Déclaration de la zone Web</h3>
<div class="paragraph">
<p>Juste après, déclarez la zone web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class ZoneWebSolution1 extends PvZoneWebSimple {
// Forcer l’affichage de la zone web, sans tenir compte du chemin du script
public $AccepterTousChemins = 1 ;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Retournez dans votre classe <strong>ApplicationSolution1</strong>, réécrivez la méthode <strong>ChargeIHMs</strong>(). Vous invoquerez la méthode <strong>InsereIHM()</strong> pour inscrire la Zone Web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class ApplicationSolution1 extends PvApplication {
protected function ChargeIHMs() {
$this-&gt;InsereIHM("zoneWeb", new ZoneWebSolution1()) ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trued-claration-du-script-par-d-faut"><a class="anchor" href="#trued-claration-du-script-par-d-faut"></a>Déclaration du script par défaut</h3>
<div class="paragraph">
<p>Créez maintenant un script web, qui affichera « Hello World ».</p>
</div>
<div class="paragraph">
<p>Ce script héritera de la classe PvScriptWebSimple. Réécrivez sa méthode RenduSpecifique() pour retourner le texte à afficher.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class ScriptAccueilSolution1 extends PvScriptWebSimple {
public function RenduSpecifique() {
return "Hello World" ;
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant réécrivez la méthode ChargeScripts() de la zone web au-dessus. Utilisez à l’intérieur la méthode InsereScriptParDefaut() pour inscrire le Script que vous avez créé.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class ZoneWebSolution1 extends PvZoneWebSimple {
// Forcer l’affichage de la zone web, sans tenir compte du chemin du script
public $AccepterTousChemins = 1 ;
protected function ChargeScripts() {
$this-&gt;InsereScriptParDefaut(new ScriptAccueilSolution1()) ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trued-marrer-l-application"><a class="anchor" href="#trued-marrer-l-application"></a>Démarrer l’application</h3>
<div class="paragraph">
<p>Il ne vous reste plus qu’à démarrer l’application.</p>
</div>
<div class="paragraph">
<p>Créez une variable de type <strong>ApplicationSolution1</strong>, puis invoquez sa méthode Execute().</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$app = new ApplicationSolution1() ;
$app-&gt;Execute() ;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici le code source complet :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">&lt;?php
include dirname(__FILE__)."/../PHP-PV/Pv/Base.class.php" ;
class ApplicationSolution1 extends PvApplication {
protected function ChargeIHMs() {
$this-&gt;InsereIHM("zoneWeb", new ZoneWebSolution1()) ;
}
}
class ZoneWebSolution1 extends PvZoneWebSimple {
// Forcer l’affichage de la zone web, sans tenir compte du chemin du script
public $AccepterTousChemins = 1 ;
protected function ChargeScripts() {
$this-&gt;InsereScriptParDefaut(new ScriptAccueilSolution1()) ;
}
}
class ScriptAccueilSolution1 extends PvScriptWebSimple {
public function RenduSpecifique() {
return "Hello World" ;
}
}
$app = new ApplicationSolution1() ;
$app-&gt;Execute() ;
?&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour visualiser le retour, ouvrez votre navigateur (Internet Explorer, IE Edge, Chrome, Firefox).</p>
</div>
<div class="paragraph">
<p>Exécutez l’adresse du script PHP.</p>
</div>
<div class="paragraph">
<p><a href="http://localhost/Solution1/index.php" class="bare">http://localhost/Solution1/index.php</a></p>
</div>
<div class="paragraph">
<p>Vous verrez le résultat ainsi :</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="extracted-media/media/image2.png" alt="image" width="441" height="176"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="trueinscrire-d-autres-scripts-web"><a class="anchor" href="#trueinscrire-d-autres-scripts-web"></a>Inscrire d’autres scripts web</h3>
<div class="paragraph">
<p>Dans une zone, vous pouvez inscrire plusieurs Scripts. Ainsi ces scripts seront accessibles à partir du paramètre GET « <strong>appelleScript</strong> ».</p>
</div>
<div class="paragraph">
<p>Nous allons ajouter un script « a_propos ». A l’interieur du fichier PHP, déclarez le script <strong>ScriptAProposSolution1</strong> après <strong>ScriptAccueilSolution1</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class ScriptAProposSolution1 extends PvScriptWebSimple {
public function RenduSpecifique() {
return "A Propos de notre entreprise !" ;
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite, insérez ce script dans la méthode <strong>ChargeScripts()</strong> de <strong>ZoneWebSolution1</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class ZoneWebSolution1 extends PvZoneWebSimple {
// Forcer l’affichage de la zone web, sans tenir compte du chemin du script
public $AccepterTousChemins = 1 ;
protected function ChargeScripts() {
$this-&gt;InsereScriptParDefaut(new ScriptAccueilSolution1()) ;
$this-&gt;InsereScript("a_propos", new ScriptAProposSolution1()) ;
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Affichez ce lien pour voir le résultat :</p>
</div>
<div class="paragraph">
<p><a href="http://localhost/Solution1/index.php?" class="bare">http://localhost/Solution1/index.php?</a><strong>appelleScript</strong>=<strong>a_propos</strong></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truela-classe-application"><a class="anchor" href="#truela-classe-application"></a>La classe Application</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truem-thodes-principales"><a class="anchor" href="#truem-thodes-principales"></a>Méthodes principales</h3>
<div class="paragraph">
<p>Voici, brièvement, les méthodes principales d’une application.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Nom</strong></th>
<th class="tableblock halign-left valign-top"><strong>Contexte</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InitConfig()</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A réécrire</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit les membres à l’instanciation de l’application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Execute()</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A partir d’une instance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exécute l’application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ChargeConfig()</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A réécrire</p>
</div>
<div class="paragraph">
<p>Invoquée par Execute().</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit les membres pour l’exécution de l’application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ChargeIHMs()</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A réécrire</p>
</div>
<div class="paragraph">
<p>Invoquée par ChargeConfig()</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit les Interfaces (Web, Console, SOAP, …) de l’application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ChargeTachesProgs()</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A réécrire</p>
</div>
<div class="paragraph">
<p>Invoquée par ChargeConfig()</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invoquée par la méthode ChargeConfig().Définit les tâches programmées de l’application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ChargeServsPersists()</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A réécrire</p>
</div>
<div class="paragraph">
<p>Invoquée par ChargeConfig()</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invoquée par la méthode ChargeConfig()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InsereIHM(string $nom, &amp; PvIHM $ihm)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utiliser dans <strong>ChargeIHMs()</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une IHM (Interface web, console ou SOAP) dans l’application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InsereTacheProg(string $nom, &amp; PvTacheProg $tacheProg)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utiliser dans <strong>ChargeTachesProgs()</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une tâche programmée dans l’application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InsereServPersist(string $nom, &amp; PvServicePersist $servPersist)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utiliser dans <strong>ChargeServsPersists()</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit un service persistant dans l’application</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="trueles-lements-d-application"><a class="anchor" href="#trueles-lements-d-application"></a>Les élements d’application</h3>
<div class="paragraph">
<p>L’élément d’application est la classe <strong>PvElementApplication</strong>. Elle est le noyau des interfaces web, console, SOAP, services et tâche programmée.</p>
</div>
<div class="paragraph">
<p>Quand l’application s’exécute, elle parcourt tous ses éléments d’application. Si l’un d’entre eux est actif, l’application démarre l’exécution de cet élément et arrête le parcourt.</p>
</div>
<div class="paragraph">
<p>Pour savoir si un élément d’application est actif, l’application a deux possibilités :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Vérifier si le chemin relatif de l’élément est celui du script PHP. La propriété est « <strong>CheminFichierRelatif</strong> ».</p>
</li>
<li>
<p>La propriété « <strong>AccepterTousChemins</strong> » de cet élément a pour valeur 1.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueles-classes-base-de-donn-es"><a class="anchor" href="#trueles-classes-base-de-donn-es"></a>Les classes base de données</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truepr-sentation"><a class="anchor" href="#truepr-sentation"></a>Présentation</h3>
<div class="paragraph">
<p>PHP-PV inclut les classes de base de données CommonDB.</p>
</div>
<div class="paragraph">
<p>Ces bases de données offrent les avantages suivants :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Elles ferment automatiquement les connexions à la fin du script PHP, ou après chaque exécution d’une requête.</p>
</li>
<li>
<p>Elles possèdent des méthodes pour sélectionner, insérer, modifier et supprimer des lignes à partir de tableau</p>
</li>
<li>
<p>Elles possèdent des méthodes pour invoquer les fonctions SQL Natives (fonction pour obtenir la date du jour, …)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="truepropri-t-s-et-m-thodes-principales"><a class="anchor" href="#truepropri-t-s-et-m-thodes-principales"></a>Propriétés et Méthodes principales</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété/Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Rôle</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ConnectionParams = array()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contient les paramètres de connexion à la base de données. Les clés du tableau sont :<br>
- server : Hote du serveur de base de données<br>
- schema : Nom de la base de données<br>
- user : Login de l’utilisateur<br>
- password : Mot de passe de l’utilisateur.<br>
Ces informations sont interprétées différemment du type de base de données.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InitConnectionParams()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit les paramètres de connexion.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InitConnection()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ouvre la connexion sur la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FinalConnection()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ferme la connexion à la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ParamPrefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Préfixe natif des paramètres de la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$AutoCloseConnection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ferme automatiquement les connexions après l’exécution d’une requête SQL. Valeur par défaut : <strong>true</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RunSql($sql, $params=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exécute le requête <strong>$sql</strong> sur la base de données, en appliquant les paramètres <strong>$params</strong>. Renvoie un résultat Booléen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FetchSqlRows($sql, $params=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exécute la requête <strong>$sql</strong> sur la base de données, en appliquant les paramètres <strong>$params</strong>. Renvoie un tableau contenant les résultats. Chaque ligne trouvée est un tableau associatif dont les clés sont les colonnes de la requête.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FetchSqlRow ($sql, $params=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exécute la requête <strong>$sql</strong> sur la base de données, en appliquant les paramètres <strong>$params</strong>. Renvoie la 1<sup>ère</sup> ligne. Cette ligne est un tableau associatif dont les clés sont les colonnes de la requête. Elle ramène <strong>false</strong> s’il y a une exception.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsertRow($tableName, $row=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insère la ligne <strong>$row</strong> dans la table <strong>$tableName</strong>. Les clés de la ligne $row doivent être celles des colonnes de <strong>$tableName</strong>. L’insertion s’appliquera uniquement sur les colonnes renseignées.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UpdateRow($tableName, $row=array(), $where, $params=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mets à jour la ligne <strong>$row</strong> dans la <strong>$tableName</strong>, quand la condition <strong>$where</strong> est respectée.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DeleteRow($tableName, $where, $params=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supprime les lignes dans la <strong>$tableName</strong>, quand la condition <strong>$where</strong> est respectée.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RunStoredProc($procName, $params=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exécute la procédure stockée <strong>$procName</strong> avec les paramètres <strong>$params</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FetchStoredProcRows($procName, $params=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exécute et renvoie les résultats de la procédure <strong>$procName</strong> avec les paramètres <strong>$params</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FetchStoredProcRow($procName, $params=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exécute et renvoie la 1<sup>ère</sup> ligne résultat de la procédure <strong>$procName</strong> avec les paramètres <strong>$params</strong>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="truem-thodes-natives-sql"><a class="anchor" href="#truem-thodes-natives-sql"></a>Méthodes Natives SQL</h3>
<div class="paragraph">
<p>Ces méthodes ramènent la fonction SQL adéquate.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlConcat($list)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Concatène les éléments du tableau $list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlNow()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ramène la date et heure actuelle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlToDateTime($expr)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convertit la valeur <strong>$expr</strong> en datetime.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlToTimestamp($expr)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convertit la valeur <strong>$expr</strong> en timestamp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlAddSeconds($expr, $val)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute la valeur <strong>$val</strong> secondes à la valeur <strong>$expr</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlAddMinutes($expr, $val)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute la valeur <strong>$val</strong> minutes à la valeur <strong>$expr</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlAddHours($expr, $val)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute la valeur <strong>$val</strong> heures à la valeur <strong>$expr</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlAddDays($expr, $val)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute la valeur <strong>$val</strong> jours à la valeur <strong>$expr</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlAddMonths($expr, $val)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute la valeur <strong>$val</strong> mois à la valeur <strong>$expr</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlAddYears($expr, $val)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute la valeur <strong>$val</strong> années à la valeur <strong>$expr</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlDateDiff ($expr1, $expr2)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calcule le nombre de secondes entre <strong>$expr1</strong> et <strong>$expr2</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlLength($expr)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retourne le nombre de caractères dans la chaîne <strong>$expr</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlSubstr($expr, $start, $length=0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extrait dans <strong>$expr</strong> la chaine commençant par <strong>$start</strong>, de taille <strong>$length</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlIndexOf($expr, $search, $start=0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renvoie l’indice de l’occurrence de <strong>$search</strong> à partir de <strong>$start</strong> (valeur minimale 0) dans <strong>$expr</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlIsNull($expr)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vérifie si <strong>$expr</strong> est la valeur Nulle de la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlStrToDateTime($dateName)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convertit la chaine <strong>$dateName</strong> au format datetime de la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlDateToStrFr($dateName, $includeHour=0)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Convertit la date <strong>$dateName</strong> au type chaine de caractère de la base de données. Si <strong>$includeHour</strong> est <strong>1</strong>, l’heure sera convertie également.</p>
</div>
<div class="paragraph">
<p>Le format supporté est dd/mm/yyyy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlToInt($expression)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convertit l’expression <strong>$expression</strong> au type INTEGER de la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlToDouble($expression)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convertit l’expression <strong>$expression</strong> au type DOUBLE de la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SqlToString($expression)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convertit l’expression <strong>$expression</strong> au type Chaine de Caractères de la base de données</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="trueles-fournisseurs-de-base-de-donn-es"><a class="anchor" href="#trueles-fournisseurs-de-base-de-donn-es"></a>Les fournisseurs de base de données</h3>
<div class="sect3">
<h4 id="truemysql"><a class="anchor" href="#truemysql"></a>MySQL</h4>
<div class="paragraph">
<p>La classe est <strong>MysqliDB</strong>. Elle utilise l’extension PHP <strong>Mysqli</strong>.</p>
</div>
<div class="paragraph">
<p>Pour recevoir les données encodés en iso-8859-1, modifiez la classe ainsi :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MysqlDBIso extends MysqliDB // Changer le nom de la classe
{
public $AutoSetCharacterEncoding = 1 ;
public $MustSetCharacterEncoding = 1 ;
public $SetCharacterEncodingOnFetch = 1 ;
public $CharacterEncoding = 'utf8' ;
public function DecodeRowValue($value)
{
if(! is_string($value))
{
return parent::DecodeRowValue($value) ;
}
return html_entity_decode(htmlentities($value, ENT_COMPAT, 'ISO-8859-1')) ;
}
public function EncodeParamValue($value)
{
if(! is_string($value))
{
return parent::EncodeParamValue($value) ;
}
return html_entity_decode(htmlentities($value, ENT_COMPAT, 'UTF-8'), ENT_COMPAT, 'ISO-8859-1') ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="trueoracle"><a class="anchor" href="#trueoracle"></a>Oracle</h4>
<div class="paragraph">
<p>La classe <strong>OciDB</strong> permet de manipuler une base de données Oracle de 8g à 12c.</p>
</div>
<div class="paragraph">
<p>Elle utilise l’extension PHP oci8-11g.</p>
</div>
</div>
<div class="sect3">
<h4 id="truesql-server"><a class="anchor" href="#truesql-server"></a>Sql Server</h4>
<div class="paragraph">
<p>La classe <strong>SqlSrvDB</strong> manipule une base de données SQL Server. Elle utilise l’extension PHP sqlsrv.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truela-classe-zone-web-simple"><a class="anchor" href="#truela-classe-zone-web-simple"></a>La classe Zone Web Simple</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truepropri-t-s-html"><a class="anchor" href="#truepropri-t-s-html"></a>Propriétés HTML</h3>
<div class="paragraph">
<p>La zone web possède des propriétés pour le rendu HTML.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété</strong></th>
<th class="tableblock halign-left valign-top"><strong>Rôle</strong></th>
<th class="tableblock halign-left valign-top"><strong>Contenu HTML généré</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EncodageDocument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixe l’encodage de la page web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;meta charset="$valeur" /&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MotsCleMeta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mots clé META</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;meta name="keywords" value="$valeur" /&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DescriptionMeta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description META</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;meta name="description" value="$valeur" /&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LangueDocument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Langage du document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;html lang="$valeur"&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TitreDocument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Titre du document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;title&gt;$valeur&lt;/title&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ViewportMeta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viewport Meta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;meta name="viewport" content="$valeur" /&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">&lt;?php
include dirname(__FILE__)."/PHP-PV/Pv/Base.class.php" ;
class MonApplication1 extends PvApplication
{
public $ZonePrinc ;
protected function ChargeIHMs()
{
// Inscrire la zone web de l’Application
$this-&gt;ZonePrinc = $this-&gt;InsereIHM("zonePrinc", new ZoneWebApplication1()) ;
}
}
// Déclaration de la zone web
class ZoneWebApplication1 extends PvZoneWebSimple
{
// Afficher la zone web en fonction du chemin dans le navigateur
public $AccepterTousChemins = 1 ;
public $ScriptAccueil ;
public $EncodageDocument = 'utf-8' ;
public $MotsCleMeta = 'Attributs, Zone, Web Simple' ;
public $DescriptionMeta = 'Description d\'une Zone Web Simple' ;
protected function ChargeScripts()
{
// Inscrire le script web par défaut
$this-&gt;ScriptAccueil = $this-&gt;InsereScriptParDefaut(new ScriptAccueilApplication1()) ;
}
}
// Déclaration du script web par défaut.
class ScriptAccueilApplication1 extends PvScriptWebSimple
{
// Code HTML qui sera affiché dans le navigateur
public function RenduSpecifique()
{
$ctn = '' ;
$ctn = "BIENVENUE SUR MA APPLICATION 1" ;
return $ctn ;
}
}
$app = new MonApplication1() ;
$app-&gt;Execute() ;
?&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truebiblioth-ques-css-et-javascript"><a class="anchor" href="#truebiblioth-ques-css-et-javascript"></a>Bibliothèques CSS et Javascript</h3>
<div class="paragraph">
<p>La zone web simple inclut automatiquement les scripts &amp; styles CSS des librairies Javascript populaires.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Librairie</strong></th>
<th class="tableblock halign-left valign-top"><strong>Propriété</strong></th>
<th class="tableblock halign-left valign-top"><strong>Spécification</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>jQuery</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureJQuery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre à 1 pour inclure la librairie jquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CheminJQuery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chemin relatif du fichier Js jQuery. Par défaut : "js/jquery.min.js"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureJQueryMigrate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre à 1 pour inclure la librairie jquery-migrate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CheminJQueryMigrate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chemin relatif du fichier Js JQueryMigrate. Par défaut : "js/jquery-migrate.min.js"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>jQueryUi</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureJQueryUi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre à 1 pour inclure la librairie jqueryui</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CheminJsJQueryUi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chemin relatif du fichier Js JQuery Ui. Par défaut : "js/jquery-ui.min.js"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CheminCSSJQueryUi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chemin relatif du fichier CSS jQuery Ui. Par défaut : "css/jquery-ui.css"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Bootstrap</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre à 1 pour inclure la librairie bootstrap</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CheminJsBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chemin relatif du fichier Js Bootstrap. Par défaut : "js/bootstrap.min.js"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CheminCSSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chemin relatif du fichier CSS Bootstrap. Par défaut : "css/bootstrap.css"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureBootstrapTheme</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre à 1 pour inclure un thème personnalisé Bootstrap</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CheminCSSBootstrapTheme</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chemin relatif du fichier CSS Bootstrap. Par défaut : "css/bootstrap-theme.min.css"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureFontAwesome</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre à 1 pour inclure Font Awesome</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CheminFontAwesome</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chemin relatif du fichier CSS Font Awesome. Par défaut : "css/font-awesome.css"</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="truecontenus-css-et-javascript"><a class="anchor" href="#truecontenus-css-et-javascript"></a>Contenus CSS et Javascript</h3>
<div class="paragraph">
<p>La zone a également des méthodes pour insérer du contenu CSS et JS.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InscritContenuCSS ($contenu)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insère un tag &lt;style&gt; avec le $contenu</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InscritLienCSS ($href)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insère un tag &lt;link rel="stylesheet" type="text/css" href="$href" /&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InscritContenuJs ($contenu)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insère un tag &lt;script&gt; avec le $contenu</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InscritContenuJsCmpIE ($contenu, $versionMin=9)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insère un tag &lt;script&gt; avec le $contenu, avec les directives IE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InscritLienJs ($src)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insère un tag &lt;script&gt; avec la source $src</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InscritLienJsCmpIE ($src, $versionMin=9)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insère un tag &lt;script&gt; avec la source $src, avec les directives IE</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Veuillez réécrire la méthode InclutLibrairiesExternes(), en invoquant la méthode parente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MaZone1 extends PvZoneWebSimple
{
Protected function InclutLibrairiesExternes()
{
Parent::InclutLibrairiesExternes() ;
// Inscrire les autres librairies JS &amp; CSS…
$this-&gt;InscritContenuCSS("body \{ text-align:center ; }") ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truescripts"><a class="anchor" href="#truescripts"></a>Scripts</h3>
<div class="paragraph">
<p>La zone web contient des scripts, qui renvoient un contenu spécifique en fonction d’un paramètre GET (appelleScript par défaut).</p>
</div>
<div class="paragraph">
<p>Les scripts varient le contenu d’une zone, tout en gardant les mêmes entêtes et pieds de document HTML.</p>
</div>
</div>
<div class="sect2">
<h3 id="truemembership"><a class="anchor" href="#truemembership"></a>Membership</h3>
<div class="sect3">
<h4 id="truefonctionnement"><a class="anchor" href="#truefonctionnement"></a>Fonctionnement</h4>
<div class="paragraph">
<p>Le Membership est le service d’authentification dans la zone.</p>
</div>
<div class="paragraph">
<p>Il se base sur les modèles relationnels suivants :</p>
</div>
<div class="paragraph">
<p>Sans Support LDAP :</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="extracted-media/media/image3.png" alt="image" width="349" height="161"></span></p>
</div>
<div class="paragraph">
<p>Avec Support LDAP :</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="extracted-media/media/image4.png" alt="image" width="380" height="200"></span></p>
</div>
<div class="paragraph">
<p>Pour l’installer, vous devez créer une base de données et les tables nécessaires.</p>
</div>
<div class="paragraph">
<p>Vous trouverez les scripts SQL dans le code source :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Fichier</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">install-membership-pv-mysql.sql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tables de membership pour MySQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">install-membership-pv-mysql-ad.sql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tables de membership pour MySQL, avec authentification Active Directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">install-membership-pv-orcl.sql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tables de membership pour Oracle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">install-membership-pv-orcl-ad.sql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tables de membership pour Oracle, avec authentification Active Directory</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="trued-claration"><a class="anchor" href="#trued-claration"></a>Déclaration</h4>
<div class="paragraph">
<p>Tout service d’authentification doit hériter de la classe <strong>AkSqlMembership</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MaBD extends MysqlDB
{
}
// 2. Déclarer le Membership
class MonMembership extends AkSqlMembership
{
protected function InitConfig(&amp; $parent)
{
parent::InitConfig($parent) ;
// Affecter la base de données du Membership
$this-&gt;Database = new MaBD() ;
}
}
class MaZone1 extends PvZoneWebSimple
{
// ...
// 3. Affecter le membership à la Zone
Public $NomClasseMembership = "MonMembership" ;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truepropri-t-s-et-m-thodes-principales-2"><a class="anchor" href="#truepropri-t-s-et-m-thodes-principales-2"></a>Propriétés et méthodes principales</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété/Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$Database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base de données qui contient les tables de membership. Type accepté : CommonDB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$RootMemberId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID Membre du super administrateur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$GuestMemberId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID Membre de l’invité</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$MemberTable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom de la table des membres dans la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ProfileTable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom de la table des profils dans la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$RoleTable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom de la table des rôles dans la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$PrivilegeTable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom de la table des privilèges dans la base de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$SessionSource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source de la session :<br>
SESSION : variable $_SESSION<br>
COOKIE : variable $_COOKIES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$SessionMemberKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clé de la session PHP ($_SESSION) qui contient l’ID du membre connecté</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LogonMember($memberId)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connecte l’ID du Membre dans la session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LogoutMember($memberId)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Déconnecte l’ID du Membre dans la session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ValidateConnection($login, $password)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vérifie si les accès du membre sont corrects</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truescripts-web-membership"><a class="anchor" href="#truescripts-web-membership"></a>Scripts web Membership</h4>
<div class="paragraph">
<p>Lorsque vous déclarez un membership dans la zone web, la zone crée automatiquement des scripts.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Nom du script</strong></th>
<th class="tableblock halign-left valign-top"><strong>Classe script web</strong></th>
<th class="tableblock halign-left valign-top"><strong>Pré-requis<br>
zone web</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connexion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptConnexionWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page de connexion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deconnexion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptDeconnexionWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page de déconnexion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">recouvreMP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptRecouvreMPWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page pour récupérer son mot de passe, à partir du login et du mot de passe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inscription</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptInscriptionWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre la propriété $AutoriserInscription à 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page d’inscription d’un membre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifPrefs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifPrefsWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre la propriété $AutoriserModifPrefs à 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page pour modifier les informations du membre (nom, prénom, …)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">doitChangerMotPasse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptDoitChangerMotPasseWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page qui force le membre connecté à changer son mot de passe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">changeMotPasse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptChangeMotPasseWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page pour modifier le mot de passe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ajoutMembre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptAjoutMembreMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajouter un membre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">importMembre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptImportMembreMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Importe des membres à partir d’un fichier CSV</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifMembre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifMembreMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modifie un membre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">supprMembre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptSupprMembreMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Désactive le membre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listeMembres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptListeMembresMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste les membres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ajoutProfil</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptAjoutProfilMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un profil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifProfil</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifProfilMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modifie un profil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">supprProfil</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptSupprProfilMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Désactive le profil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listeProfils</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptListeProfilsMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste les profils</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ajoutRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptAjoutRoleMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un rôle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifRoleMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modifie un rôle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">supprRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptSupprRoleMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Désactive un rôle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listeRoles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptListeRolesMSWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste les rôles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ajoutServeurAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptAjoutServeurADWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute une connexion LDAP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifServeurAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifServeurADWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modifie une connexion LDAP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">supprServeurAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptSupprServeurADWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supprime une connexion LDAP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listeServeursAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptListeServeursADWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste les connexions LDAP</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Vous pouvez personnaliser chacun de ces scripts quand vous déclarez la zone web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MaZoneWeb1 extends PvZoneWebSimple
{
// Cas du script connexion
public $NomScriptConnexion = "connecter" ;
public $NomClasseScriptConnexion = "MonScriptConnexion" ;
// ...
}
class MonScriptConnexion extends PvScriptConnexionWeb
{
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truele-remplisseur-de-config-membership"><a class="anchor" href="#truele-remplisseur-de-config-membership"></a>Le remplisseur de config Membership</h4>
<div class="paragraph">
<p>La zone, pour remplir chaque script de membership, utilise sa propriété <strong>$ NomClasseRemplisseurConfigMembership</strong>.</p>
</div>
<div class="paragraph">
<p>C’est un objet qui hérite de la classe <strong>PvRemplisseurConfigMembership</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MaZoneWeb1 extends PvZoneWebSimple
{
public $NomClasseRemplisseurConfigMembership = "MonRemplCfgMembership" ;
// ...
}
class MonRemplCfgMembership extends PvRemplisseurConfigMembership
{
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour le personnaliser, veuillez créer une classe héritant de celle-ci et réécrivez les méthodes suivantes.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété / Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFormulaireGlobalProfil(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S’applique à n’importe quel formulaire de profil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFormulaireGlobalRole(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S’applique à n’importe quel formulaire de rôle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFiltresEditionFormMembre(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les filtres d’édition à n’importe quel formulaire de membre.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InitFormulaireRole(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialise n’importe quel formulaire de rôle.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InitFormulaireProfil(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialise n’importe quel formulaire de profil.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InitFormulaireMembre(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialise n’importe quel formulaire de membre.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFiltresMPFormMembre(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les filtres sur n’importe quel formulaire de mot de passe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFormulaireGlobalMembre(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit les caractéristiques de n’importe quel formulaire de profil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFormulaireInfosMembre(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit les caractéristiques de n’importe quel formulaire de membre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFormulaireChangeMPMembre(&amp; $form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit les caractéristiques de n’importe quel formulaire de mot de passe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InitTableauMembre(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialise le tableau de données des membres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InitTableauProfil(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialise le tableau de données des profils</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InitTableauRole(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialise le tableau de données des rôles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFiltresTableauMembre(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les filtres du tableau de données des membres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitDefinitionsColonneTableauMembre(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les colonnes de tableau de données des membres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitDefinitionColActionsTableauMembre(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les actions du tableau de données des membres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFiltresTableauRole(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les filtres du tableau de données des rôles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitDefinitionsColonneTableauRole(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les colonnes de tableau de données des rôles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitDefinitionColActionsTableauRole(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les actions du tableau de données des rôles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitFiltresTableauProfil(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les filtres du tableau de données des profils</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitDefinitionsColonneTableauProfil(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les colonnes de tableau de données des profils</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplitDefinitionColActionsTableauProfil(&amp; $table)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigne les actions du tableau de données des profils</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="truedocuments-web"><a class="anchor" href="#truedocuments-web"></a>Documents Web</h3>
<div class="paragraph">
<p>Un document web personnalise l’affichage complet de chaque script.</p>
</div>
<div class="paragraph">
<p>Dans la zone, il est utile :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>pour les scripts à imprimer</p>
</li>
<li>
<p>pour les scripts qui s’afficheront dans une boîte de dialogue</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="trued-claration-2"><a class="anchor" href="#trued-claration-2"></a>Déclaration</h4>
<div class="paragraph">
<p>Chaque document web hérite de la classe <strong>PvDocumentWebHtml</strong>.</p>
</div>
<div class="paragraph">
<p>Veuillez réecrire les méthodes <strong>PrepareRendu(&amp; $zone)</strong>, <strong>RenduEntete(&amp; $zone)</strong> et <strong>RenduPied(&amp; $zone)</strong>.</p>
</div>
<div class="paragraph">
<p>Vous pouvez manipuler le script sélectionné avec <strong>$zone&#8594;ScriptPourRendu</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonDocumentWeb1 extends PvDocumentWebHtml
{
public function PrepareRendu(&amp; $zone)
{
// Inclure des libraires Javascript &amp; CSS spécifiques au document
}
public function RenduEntete(&amp; $zone)
{
return parent::RenduEntete($zone) ;
}
public function RenduPied(&amp; $zone)
{
return parent::RenduPied($zone) ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="trueint-gration-dans-la-zone-web"><a class="anchor" href="#trueint-gration-dans-la-zone-web"></a>Intégration dans la zone web</h4>
<div class="paragraph">
<p>D’abord, vous devez mettre la propriété <strong>UtiliserDocumentWeb</strong> à 1.</p>
</div>
<div class="paragraph">
<p>Ensuite, déclarez chaque document dans la méthode <strong>ChargeConfig()</strong> de la zone web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MaZoneWeb extends PvZoneWebSimple
{
public $UtiliserDocumentWeb = 1 ;
public function ChargeConfig()
{
Parent::ChargeConfig() ;
$this-&gt;DocumentsWeb["defaut"] = new MonDocumentWeb1() ;
$this-&gt;DocumentsWeb["impression"] = new MonDocumentWeb2() ;
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le 1<sup>er</sup> document web déclaré sera utilisé par défaut pour tous les scripts. Dans le cas ci-dessus, c’est le document web « defaut ».</p>
</div>
</div>
<div class="sect3">
<h4 id="trueaffectation-un-script"><a class="anchor" href="#trueaffectation-un-script"></a>Affectation à un script</h4>
<div class="paragraph">
<p>Pour définir le document web du script, renseignez la propriété <strong>NomDocumentWeb</strong> du script.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonScriptWeb3 extends PvScriptWebSimple
{
// …
public $NomDocumentWeb = "impression" ;
// …
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truecomposants-iu"><a class="anchor" href="#truecomposants-iu"></a>Composants IU</h3>
<div class="paragraph">
<p>Les composants IU permettent d’interagir avec les utilisateurs.</p>
</div>
<div class="sect3">
<h4 id="trueutilisation"><a class="anchor" href="#trueutilisation"></a>Utilisation</h4>
<div class="paragraph">
<p>Vous devez suivre ce procédé :</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Initier le composant</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$comp = new PvFormulaireDonnesHtml() ;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Renseigner ses propriétés d’initiation, s’il en possède</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$comp-&gt;InscrireCommandeExecuter = 1 ;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Adoptez le script ou la zone contexte par les méthodes <strong>AdopteScript($nom, &amp; $script)</strong> ou <strong>AdopteZone($nom, $zone)</strong>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$comp-&gt;AdopteScript("monComposant", $this) ;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Charger la configuration du composant par la méthode <strong>ChargeConfig()</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$comp-&gt;ChargeConfig() ;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Renseigner ses autres propriétés</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$comp-&gt;CommandeExecuter-&gt;Libelle = "VALIDER" ;
$comp-&gt;SuccesMessageExecution = "La page a été modifiée" ;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Invoquer le Rendu du composant par la méthode <strong>RenduDispositif()</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$ctn = $comp-&gt;RenduDispositif() ;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="trued-finition"><a class="anchor" href="#trued-finition"></a>Définition</h4>
<div class="paragraph">
<p>Vous devez déclarer les composants IU dans la zone web, le document web ou le script web.</p>
</div>
<div class="paragraph">
<p>Pour le définir (étape 1. à 5 de l’utilisation), utilisez ces méthodes :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Classe</strong></th>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Directives</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Document Web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PrepareRendu(&amp; $zone)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zone Web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DetermineEnvironnement(&amp; $script)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invoquer parent::DetermineEnvironnement($script) après avoir défini le composant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script Web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DetermineEnvironnement()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Vous invoquez le rendu séparément :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Classe</strong></th>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Directives</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Document Web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RenduEntete(&amp; $zone)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invoquer <strong>parent::RenduEntete($zone)</strong> avant le rendu du composant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RenduPied(&amp; $zone)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invoquer <strong>parent::RenduEntete ($zone)</strong> après le rendu du composant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zone Web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RenduContenuCorpsDocument ()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script Web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>protected</strong> RenduDispositifBrut()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RenduSpecifique()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truetypes-de-composant"><a class="anchor" href="#truetypes-de-composant"></a>Types de composant</h4>
<div class="paragraph">
<p>Plusieurs composants existent, dont les principaux sont :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Nom</strong></th>
<th class="tableblock halign-left valign-top"><strong>Classe</strong></th>
<th class="tableblock halign-left valign-top"><strong>Rôle</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Données</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tableau de données Html</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvTableauDonneesHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche sous forme de tableau des données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grille de données Html</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvGrilleDonneesHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche sous forme de grille des données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formulaire de données Html</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvFormulaireDonneesHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche sous forme de formulaire de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Graphiques &amp; Statistiques</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chart pChart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvPChart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chart réalisée avec la librairie PHP pChart 2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sliders</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slider JQuery Camera</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvJQueryCamera</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slider réalisé à partir de la librairie Javascript jQuery Camera</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="trueactions-web"><a class="anchor" href="#trueactions-web"></a>Actions Web</h3>
<div class="sect3">
<h4 id="trued-finition-2"><a class="anchor" href="#trued-finition-2"></a>Définition</h4>
<div class="paragraph">
<p>Une Action Web est un ensemble d’instructions s’exécute dans la Zone Web. Elle ne se limite pas d’afficher un contenu HTML, comme les scripts web.</p>
</div>
<div class="paragraph">
<p>Elle peut également :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>déclencher le téléchargement d’un fichier</p>
</li>
<li>
<p>renvoyer un fichier RSS, JS ou CSS</p>
</li>
<li>
<p>renvoyer une réponse JSON</p>
</li>
<li>
<p>exécuter un code précis, avant d’afficher le script web</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="trued-claration-3"><a class="anchor" href="#trued-claration-3"></a>Déclaration</h4>
<div class="paragraph">
<p>La zone web exécute une action web à partir du paramètre GET <strong>appelleAction</strong>.</p>
</div>
<div class="paragraph">
<p>Vous pouvez déclarer les actions dans plusieurs méthodes :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Objet</strong></th>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Contexte</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zone web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereActionPrinc($nom, $action)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utiliser dans la méthode <strong>ChargeConfig()</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Les actions principales s’exécutent avant d’exécuter le script en cours</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereActionAvantRendu($nom, $action)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utiliser dans la méthode <strong>ChargeConfig()</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S’exécutent avant d’afficher le script en cours</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereActionAvantRendu($nom, $action)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utiliser dans la méthode <strong>DetermineEnvironnement()</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Déclare l’action uniquement lorsque le script doit être affiché. Le nom de l’action sera basé sur l’ID Instance du script et le nom de l’action.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truetypes-d-action"><a class="anchor" href="#truetypes-d-action"></a>Types d’action</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Classe</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Utilisation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvActionBaseZoneWebSimple</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classe de base</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Réécrire la méthode <strong>Execute()</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvActionNotificationWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exécute des instructions et garde le résultat (succès/echec et message d’exécution)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>Réécrire la méthode <strong>Execute()</strong>. A l’intérieur, utiliser ces méthodes pour définir le résultat :<br></p>
<div class="ulist">
<ul>
<li>
<p><strong>ConfirmeSucces($msg)</strong><br></p>
</li>
<li>
<p><strong>RenseigneErreur($msg</strong>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Dans le script ou la zone, utilisez la propriété <strong>TypeErreur</strong> et méthode <strong>ObtientMessage()</strong> de l’instance Action pour afficher le résultat. Pour tester si l’action a ramené un résultat, utilisez la méthode *PossedeMessage() *</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>PvActionResultatJSONZoneWeb</p>
</div>
<div class="paragraph">
<p>PvActionEnvoiJSON</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche un contenu JSON dans le navigateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Réécrire la méthode <strong>Execute()</strong>. A l’intérieur, définissez la propriété <strong>Resultat</strong>. Cette propriété sera le retour JSON.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvActionTelechargFichier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Démarre le téléchargement du fichier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Réécrire la méthode <strong>Execute()</strong>. A l’intérieur :<br>
- Renseignez la propriété <strong>NomFichierAttache</strong> pour définir le nom du fichier téléchargé. Utilisez la fonction <strong>echo</strong> pour envoyer le contenu du fichier<br>
- Si le fichier existe déjà, utilisez <strong>CheminFichierSource</strong> pour le charger.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="truet-ches-web"><a class="anchor" href="#truet-ches-web"></a>Tâches Web</h3>
<div class="sect3">
<h4 id="trued-finition-3"><a class="anchor" href="#trued-finition-3"></a>Définition</h4>
<div class="paragraph">
<p>Une tâche web est une tâche planifiée, qui exécute des instructions.</p>
</div>
<div class="paragraph">
<p>La tâche démarre automatiquement quand vous affichez n’importe script de la zone web, une fois son délai d’attente dépassé.</p>
</div>
<div class="paragraph">
<p>Elle s’exécute dans un autre processus http que celui du script.</p>
</div>
</div>
<div class="sect3">
<h4 id="trued-claration-4"><a class="anchor" href="#trued-claration-4"></a>Déclaration</h4>
<div class="paragraph">
<p>Veuillez créer votre tâche à partir de la classe <strong>PvTacheWebBaseSimple</strong>. Définissez la propriété « <strong>DelaiExecution</strong> » (en heure) et réécrivez la méthode <strong>ExecuteInstructions()</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MaTacheWeb1 extends PvTacheWebBaseSimple
{
public $DelaiExecution = 0.05 ; // S’exécute après 180 secondes
protected function ExecuteInstructions()
{
Echo "OK, ma tache est executee" ;
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les membres utiles dans la méthode <strong>ExecuteInstructions()</strong> sont :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ApplicationParent</strong> : Renvoie l’Application</p>
</li>
<li>
<p><strong>ZoneParent</strong> : Renvoie la zone contenant la tâche web</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="truele-gestionnaire-de-t-ches-web"><a class="anchor" href="#truele-gestionnaire-de-t-ches-web"></a>Le gestionnaire de tâches web</h4>
<div class="paragraph">
<p>La zone web possède un gestionnaire de tâches web, dont les rôles sont :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Contenir les tâches web</p>
</li>
<li>
<p>Définir l’emplacement de sauvegardes des états de chaque tâche (en cours, terminé, date d’exécution, …)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pour personnaliser le gestionnaire de tâches web, veuillez réécrire la méthode <strong>ChargeGestTachesWeb()</strong>.</p>
</div>
<div class="paragraph">
<p>La propriété <strong>GestTachesWeb</strong> représente le gestionnaire de tâches. Ses membres et méthodes utiles sont :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété/Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NomDossierTaches</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chemin du répertoire contenant l’état de chaque tâche web. Le chemin est relatif au chemin du fichier PHP de la zone web.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InsereTacheWeb($nom, $tache)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit la tâche programmée dans la zone web</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MaZoneWeb1 extends PvZoneWebSimple
{
// ...
protected function ChargeGestTachesWeb()
{
$this-&gt;GestTachesWeb-&gt;NomDossierTaches = "taches/data" ;
$this-&gt;InsereTacheWeb('tache1', new MaTacheWeb1()) ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truele-fichier-etat-de-la-t-che-web"><a class="anchor" href="#truele-fichier-etat-de-la-t-che-web"></a>Le fichier Etat de la tâche web</h4>
<div class="paragraph">
<p>L’état de la tâche est sauvegardé dans le fichier de ce format :</p>
</div>
<div class="paragraph">
<p>&lt;NomDossierTaches-du-GestTachesWeb&gt;/&lt;IDInstanceCalc-tache-web&gt;.dat</p>
</div>
<div class="paragraph">
<p>Si vous supprimez ce fichier, la tâche web sera exécutée au prochain affichage de la zone web.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truele-formulaire-de-donn-es"><a class="anchor" href="#truele-formulaire-de-donn-es"></a>Le Formulaire de Données</h3>
<div class="sect3">
<h4 id="truepr-sentation-2"><a class="anchor" href="#truepr-sentation-2"></a>Présentation</h4>
<div class="paragraph">
<p>Le formulaire de données est un composant IU.</p>
</div>
<div class="paragraph">
<p>Il affiche :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Un message d’exécution :</p>
</li>
<li>
<p>Un formulaire de filtres : Il contiendra des champs qui seront soumis par la méthode « POST ».</p>
</li>
<li>
<p>Un bloc de commandes : Il contiendra des boutons, qui recevront les valeurs du formulaire</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La classe du formulaire de données est <strong>PvFormulaireDonneesHtml</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="trueutilisation-basique"><a class="anchor" href="#trueutilisation-basique"></a>Utilisation basique</h4>
<div class="paragraph">
<p>Voici un exemple d’utilisation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonScript2 extends PvScriptWebSimple
{
public $Form1 ;
public $Flt1 ;
public $Flt2 ;
public function DetermineEnvironnement()
{
// Initiation
$this-&gt;Form1 = new PvFormulaireDonneesHtml() ;
// Toujours afficher le formulaire
$this-&gt;Form1-&gt;InclureElementEnCours = 0 ;
$this-&gt;Form1-&gt;InclureTotalElements = 0 ;
// Définir la classe commande "Executer"
$this-&gt;Form1-&gt;NomClasseCommandeExecuter = "MaCmdExecScript2" ;
// Liaison avec le script en cours
$this-&gt;Form1-&gt;AdopteScript("form1", $this) ;
// Chargement de la config
$this-&gt;Form1-&gt;ChargeConfig() ;
// Définition des autres propriétés
$this-&gt;Flt1 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("champ1") ;
$this-&gt;Flt1-&gt;Libelle = "Champ 1" ;
$this-&gt;Flt2 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("champ2") ;
$this-&gt;Flt2-&gt;Libelle = "Champ 2" ;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>public function RenduSpecifique()
{
$ctn = '' ;
$ctn .= $this&#8594;Form1&#8594;RenduDispositif() ;
return $ctn ;
}
}</p>
</div>
<div class="paragraph">
<p>class <strong>MaCmdExecScript2</strong> extends PvCommandeExecuterBase
{
protected function ExecuteInstructions()
{
$this&#8594;ConfirmeSucces("Commande exécutée avec succès") ;
}
}</p>
</div>
</div>
<div class="sect3">
<h4 id="trueinteraction-avec-base-de-donn-es"><a class="anchor" href="#trueinteraction-avec-base-de-donn-es"></a>Interaction avec base de données</h4>
<div class="paragraph">
<p>Vous pouvez manipuler les bases de données avec son fournisseur de données.</p>
</div>
<div class="sect4">
<h5 id="trueajout-d-enregistrement"><a class="anchor" href="#trueajout-d-enregistrement"></a>Ajout d’enregistrement</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonScript2 extends PvScriptWebSimple
{
public function DetermineEnvironnement()
{
// Initiation
$this-&gt;Form1 = new PvFormulaireDonneesHtml() ;
// Toujours afficher le formulaire
$this-&gt;Form1-&gt;InclureElementEnCours = 0 ;
$this-&gt;Form1-&gt;InclureTotalElements = 0 ;
// Définir la classe commande "Executer"
$this-&gt;Form1-&gt;NomClasseCommandeExecuter = "PvCommandeAjoutElement" ;
// Liaison avec le script en cours
$this-&gt;Form1-&gt;AdopteScript("form1", $this) ;
// Chargement de la config
$this-&gt;Form1-&gt;ChargeConfig() ;
// Définition des autres propriétés
$this-&gt;Flt1 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("colonne1", "colonne1") ;
$this-&gt;Flt1-&gt;Libelle = "Colonne 1" ;
$this-&gt;Flt2 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("colonne2", "colonne2") ;
$this-&gt;Flt2-&gt;Libelle = "Colonne 2" ;
// Définition du fournisseur de données
$this-&gt;FournisseurDonnees = new PvFournisseurDonneesSql() ;
$this-&gt;FournisseurDonnees-&gt;BaseDonnees = new MaBD() ;
$this-&gt;FournisseurDonnees-&gt;RequeteSelection = "matable1" ;
$this-&gt;FournisseurDonnees-&gt;TableEdition = "matable1" ;
}
// ...
}
===== Modification d’enregistrement</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonScript2 extends PvScriptWebSimple
{
public function DetermineEnvironnement()
{
// Initiation
$this-&gt;Form1 = new PvFormulaireDonneesHtml() ;
// Afficher le formulaire s’il y a un enregistrement
$this-&gt;Form1-&gt;InclureElementEnCours = 1 ;
$this-&gt;Form1-&gt;InclureTotalElements = 1 ;
// Définir la classe commande "Executer"
$this-&gt;Form1-&gt;NomClasseCommandeExecuter = "PvCommandeModifElement" ;
// Liaison avec le script en cours
$this-&gt;Form1-&gt;AdopteScript("form1", $this) ;
// Chargement de la config
$this-&gt;Form1-&gt;ChargeConfig() ;
// Définition des filtres de sélection
$this-&gt;Cle1 = $this-&gt;Form1-&gt;InsereFltSelectHttpGet("macle1", "cle1 = &lt;self&gt;") ;
// Définition des autres propriétés
$this-&gt;Flt1 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("colonne1", "colonne1") ;
$this-&gt;Flt1-&gt;Libelle = "Colonne 1" ;
$this-&gt;Flt2 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("colonne2", "colonne2") ;
$this-&gt;Flt2-&gt;Libelle = "Colonne 2" ;
// Définition du fournisseur de données
$this-&gt;FournisseurDonnees = new PvFournisseurDonneesSql() ;
$this-&gt;FournisseurDonnees-&gt;BaseDonnees = new MaBD() ;
$this-&gt;FournisseurDonnees-&gt;RequeteSelection = "matable1" ;
$this-&gt;FournisseurDonnees-&gt;TableEdition = "matable1" ;
}
// ...
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="truesuppression-d-enregistrement"><a class="anchor" href="#truesuppression-d-enregistrement"></a>Suppression d’enregistrement</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonScript2 extends PvScriptWebSimple
{
public function DetermineEnvironnement()
{
// Initiation
$this-&gt;Form1 = new PvFormulaireDonneesHtml() ;
// Afficher le formulaire s’il y a un enregistrement
$this-&gt;Form1-&gt;InclureElementEnCours = 1 ;
$this-&gt;Form1-&gt;InclureTotalElements = 1 ;
// Empêcher l’édition des filtres
$this-&gt;Form1-&gt;Editable = 0 ;
// Définir la classe commande "Executer"
$this-&gt;Form1-&gt;NomClasseCommandeExecuter = "PvCommandeSupprElement" ;
// Liaison avec le script en cours
$this-&gt;Form1-&gt;AdopteScript("form1", $this) ;
// Chargement de la config
$this-&gt;Form1-&gt;ChargeConfig() ;
// Définition des filtres de sélection
$this-&gt;Cle1 = $this-&gt;Form1-&gt;InsereFltSelectHttpGet("macle1", "cle1 = &lt;self&gt;") ;
// Définition des autres propriétés
$this-&gt;Flt1 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("colonne1", "colonne1") ;
$this-&gt;Flt1-&gt;Libelle = "Colonne 1" ;
$this-&gt;Flt2 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("colonne2", "colonne2") ;
$this-&gt;Flt2-&gt;Libelle = "Colonne 2" ;
// Définition du fournisseur de données
$this-&gt;FournisseurDonnees = new PvFournisseurDonneesSql() ;
$this-&gt;FournisseurDonnees-&gt;BaseDonnees = new MaBD() ;
$this-&gt;FournisseurDonnees-&gt;RequeteSelection = "matable1" ;
$this-&gt;FournisseurDonnees-&gt;TableEdition = "matable1" ;
}
// ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truepropri-t-s-d-initiation"><a class="anchor" href="#truepropri-t-s-d-initiation"></a>Propriétés d’initiation</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureElementEnCours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le formulaire sera disponible si le fournisseur de données contient au moins un enregistrement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureTotalElement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comptera le nombre d’enregistrement du fournisseur de données.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InscrireCommandeExecuter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crée une commande « Exécuter » au chargement de config du composant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$LibelleCommandeExecuter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Libellé de la commande « Exécuter »</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$NomClasseCommandeExecuter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom de la classe commande « Exécuter »</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InscrireCommandeAnnuler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crée une commande « Annuler » au chargement de config du composant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$LibelleCommandeAnnuler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Libellé de la commande « Annuler »</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$NomClasseCommandeAnnuler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom de la classe commande « Annuler »</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truefiltres-de-s-lection"><a class="anchor" href="#truefiltres-de-s-lection"></a>Filtres de sélection</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltLgSelectHttpGet($nom, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre http GET</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltLgSelectHttpPost($nom, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre http POST</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltLgSelectHttpUpload($nom, $cheminDossierDest="", $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre http UPLOAD. Tous les fichiers téléchargés seront déposés dans le dossier $cheminDossierDest.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltLgSelectSession($nom, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre contenant la valeur d’une session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltLgSelectFixe($nom, $valeur, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre basé sur une valeur fixe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltLgSelectCookie($nom, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre contenant la valeur d’un cookie</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truefiltres-d-dition"><a class="anchor" href="#truefiltres-d-dition"></a>Filtres d’édition</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltEditHttpGet($nom, $colLiee='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre http GET</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltEditHttpPost($nom, $colLiee='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre http POST</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltEditHttpUpload($nom, $cheminDossierDest="", $colLiee='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre http UPLOAD. Tous les fichiers téléchargés seront déposés dans le dossier $cheminDossierDest</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltEditSession($nom, $colLiee='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre contenant la valeur d’une session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltEditFixe($nom, $valeur, $colLiee='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre basé sur une valeur fixe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltEditCookie($nom, $colLiee='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre contenant la valeur d’un cookie</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="trueautres-propri-t-s"><a class="anchor" href="#trueautres-propri-t-s"></a>Autres propriétés</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété / Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CacherBlocCommandes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N’affiche pas le bloc de commandes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CacherFormulaireFiltres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N’affiche pas le formulaire des filtres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$MessageAucunElement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message à afficher si le formulaire ne trouve pas d’élément</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CacherFormulaireFiltresApresCmd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache le formulaire de filtres si une commande est exécutée</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$Largeur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Largeur du formulaire</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ElementsEnCours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lignes retournées après le rendu</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ElementEnCours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1<sup>ère</sup> Ligne retournée après le rendu</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RedirigeCmdAnnulerVersUrl($url)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redirige la page vers l’URL lorsque vous cliquerez sur le bouton « Annuler » du formulaire</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RedirigeCmdExecuterVersUrl($url)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redirige la page vers l’URL lorsque vous cliquerez sur le bouton « Executer » du formulaire</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FigeFiltresEdition()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixe tous les filtres édition en lecture seule</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CacheFiltresEdition()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache tous les filtres édition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoitInclureElement()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Confirme si les propriétés $InclureElementEnCours &amp; $InclureTotalElements sont vraies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AnnuleLiaisonParametres()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interdit les filtres d’édition de récupérer les valeurs de leurs paramètres.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truecommandes"><a class="anchor" href="#truecommandes"></a>Commandes</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Classe</strong></th>
<th class="tableblock halign-left valign-top"><strong>Prérequis</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvCommandeAnnulerBase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commande pour annuler l’édition du formulaire de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvCommandeExecuterBase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commande pour exécuter le formulaire de données. Veuillez étendre cette classe.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvCommandeAjoutElement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Les propriétés InclureElementEnCours &amp; InclureTotalElements doivent avoir la valeur 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commande pour insérer un enregistrement dans le fournisseur de données du formulaire</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvCommandeModifElement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Les propriétés InclureElementEnCours &amp; InclureTotalElements doivent avoir la valeur 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commande pour modifier un enregistrement dans le fournisseur de données du formulaire</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvCommandeSupprElement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Les propriétés InclureElementEnCours &amp; InclureTotalElements doivent avoir la valeur 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commande pour supprimer un enregistrement dans le fournisseur de données du formulaire</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truerendu-du-formulaire-de-filtres"><a class="anchor" href="#truerendu-du-formulaire-de-filtres"></a>Rendu du formulaire de filtres</h4>
<div class="paragraph">
<p>Vous pouvez personnaliser le rendu du formulaire de filtres avec sa propriété <strong>$DessinateurFiltresEdition</strong>.</p>
</div>
<div class="paragraph">
<p>Veuillez créer une classe héritant de <strong>PvDessinFiltresDonneesHtml</strong> et réécrire sa méthode publique <strong>Execute(&amp; $script, &amp; $composant, $parametres)</strong>.</p>
</div>
<div class="paragraph">
<p>Vous avez 2 méthodes dans la nouvelle classe, pour chaque filtre de données :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>RenduLibelleFiltre(&amp; $filtre)</strong> pour le libellé du filtre de données</p>
</li>
<li>
<p><strong>RenduFiltre(&amp; $filtre, &amp; $composant)</strong> pour le composant du filtre de données</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonScript1 extends PvScriptWebSimple
{
public $Form1 ;
public $Flt1 ;
public $Flt2 ;
public function DetermineEnvironnement()
{
// Initiation
$this-&gt;Form1 = new PvFormulaireDonneesHtml() ;
// Toujours afficher le formulaire
$this-&gt;Form1-&gt;InclureElementEnCours = 0 ;
$this-&gt;Form1-&gt;InclureTotalElements = 0 ;
// Definir le dessinateur de filtres edition
$this-&gt;Form1-&gt;DessinateurFiltresEdition = new MonDessinFiltresDonnees() ;
// Liaison avec le script en cours
$this-&gt;Form1-&gt;AdopteScript("form1", $this) ;
// Chargement de la config
$this-&gt;Form1-&gt;ChargeConfig() ;
// Définition des autres propriétés
$this-&gt;Flt1 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("champ1") ;
$this-&gt;Flt1-&gt;Libelle = "Champ 1" ;
$this-&gt;Flt2 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("champ2") ;
$this-&gt;Flt2-&gt;Libelle = "Champ 2" ;
}
// ...
public function RenduSpecifique()
{
$ctn = '' ;
// Rendu du formulaire de donnees
$ctn .= $this-&gt;Form1-&gt;RenduDispositif() ;
return $ctn ;
}
}
class MonDessinFiltresDonnees extends PvDessinFiltresDonneesHtml
{
public function Execute(&amp; $script, &amp; $composant, $parametres)
{
$ctn = '' ;
$ctn .= '&lt;p&gt;&lt;b&gt;'.$this-&gt;RenduLibelleFiltre($script-&gt;Flt1).'&lt;b&gt;&lt;br&gt;' ;
$ctn .= $this-&gt;RenduFiltre($script-&gt;Flt1, $composant).'&lt;/p&gt;' ;
$ctn .= '&lt;hr&gt;' ;
$ctn .= '&lt;p&gt;&lt;b&gt;'.$this-&gt;RenduLibelleFiltre($script-&gt;Flt2).'&lt;b&gt;&lt;br&gt;' ;
$ctn .= $this-&gt;RenduFiltre($script-&gt;Flt2, $composant).'&lt;/p&gt;' ;
return $ctn ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truerendu-du-bloc-de-commandes"><a class="anchor" href="#truerendu-du-bloc-de-commandes"></a>Rendu du bloc de commandes</h4>
<div class="paragraph">
<p>Pour personnaliser le rendu du bloc des commandes, utilisez la propriété <strong>$DessinateurBlocCommandes</strong>.</p>
</div>
<div class="paragraph">
<p>Veuillez créer une classe héritant de <strong>PvDessinCommandesHtml</strong> et réécrire sa méthode publique <strong>Execute(&amp; $script, &amp; $composant, $parametres)</strong>.</p>
</div>
<div class="paragraph">
<p>Cette nouvelle classe donne le rendu d’une commande avec la méthode <strong>RenduCommande(&amp; $commande)</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonScript1 extends PvScriptWebSimple
{
public $Form1 ;
public $Flt1 ;
public $Flt2 ;
public function DetermineEnvironnement()
{
// Initiation
$this-&gt;Form1 = new PvFormulaireDonneesHtml() ;
// Toujours afficher le formulaire
$this-&gt;Form1-&gt;InclureElementEnCours = 0 ;
$this-&gt;Form1-&gt;InclureTotalElements = 0 ;
// Definir le dessinateur de commandes
$this-&gt;Form1-&gt;DessinateurBlocCommandes = new MonDessinCommandes() ;
// Liaison avec le script en cours
$this-&gt;Form1-&gt;AdopteScript("form1", $this) ;
// Chargement de la config
$this-&gt;Form1-&gt;ChargeConfig() ;
// Définition des autres propriétés
$this-&gt;Flt1 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("champ1") ;
$this-&gt;Flt1-&gt;Libelle = "Champ 1" ;
$this-&gt;Flt2 = $this-&gt;Form1-&gt;InsereFltEditHttpPost("champ2") ;
$this-&gt;Flt2-&gt;Libelle = "Champ 2" ;
// Commandes
// ...
}
public function RenduSpecifique()
{
$ctn = '' ;
// Rendu du formulaire de donnees
$ctn .= $this-&gt;Form1-&gt;RenduDispositif() ;
return $ctn ;
}
}
// Declarer le dessinateur de commandes
class MonDessinCommandes extends PvDessinCommandesHtml
{
public function Execute(&amp; $script, &amp; $composant, $parametres)
{
$ctn = '' ;
$ctn .= '&lt;p&gt;' ;
// Le formulaire est dans la variable $composant
$ctn .= $this-&gt;RenduCommande($composant-&gt;CommandeAnnuler) ;
$ctn .= '&lt;hr /&gt;' ;
$ctn .= $this-&gt;RenduCommande($composant-&gt;CommandeExecuter) ;
$ctn .= '&lt;/p&gt;' ;
return $ctn ;
}
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truele-tableau-de-donn-es"><a class="anchor" href="#truele-tableau-de-donn-es"></a>Le Tableau de Données</h3>
<div class="sect3">
<h4 id="truepr-sentation-3"><a class="anchor" href="#truepr-sentation-3"></a>Présentation</h4>
<div class="paragraph">
<p>Le tableau de données est un composant IU. Il affiche :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Un formulaire de champs pour filtrer les résultats</p>
</li>
<li>
<p>Un bloc de commandes, pour l’exportation des résultats à un format précis…</p>
</li>
<li>
<p>Un tableau des résultats de la recherche</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La classe de ce composant est <strong>PvTableauDonnesHtml</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="trueutilisation-basique-2"><a class="anchor" href="#trueutilisation-basique-2"></a>Utilisation basique</h4>
<div class="paragraph">
<p>Il utilise toujours un fournisseur de données pour le rendu.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonScript1 extends PvScriptWebSimple
{
public function DetermineEnvironnement()
{
// Déclaration
$this-&gt;Tabl1 = new PvTableauDonneesHtml() ;
// Chargement de la config
$this-&gt;Tabl1-&gt;AdopteScript("tabl1", $this) ;
$this-&gt;Tabl1-&gt;ChargeConfig() ;
// Définition des filtres de sélection
$this-&gt;Flt1 = $this-&gt;Tabl1-&gt;InsereFltSelectHttpGet("expression", "champ1 like concat(&lt;self&gt;, '%')") ;
$this-&gt;Flt1-&gt;Libelle = "Expression" ;
// Définition des colonnes
$this-&gt;Tabl1-&gt;InsereDefColCachee("id") ;
$this-&gt;Tabl1-&gt;InsereDefCol("champ1", "Champ 1") ;
$this-&gt;Tabl1-&gt;InsereDefCol("champ2", "Champ 2") ;
// Définition du fournisseur de données
$this-&gt;Tabl1-&gt;FournisseurDonnees = new PvFournisseurDonneesSql() ;
$this-&gt;Tabl1-&gt;FournisseurDonnees-&gt;BaseDonnees = new MaBD1() ;
$this-&gt;Tabl1-&gt;FournisseurDonnees-&gt;RequeteSelection = "matable1" ;
}
public function RenduSpecifique()
{
$ctn = '' ;
$ctn .= $this-&gt;Tabl1-&gt;RenduDispositif() ;
return $ctn ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truefiltres-de-s-lection-2"><a class="anchor" href="#truefiltres-de-s-lection-2"></a>Filtres de sélection</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltSelectHttpGet($nom, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre http GET</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltSelectHttpPost($nom, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre http POST</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltSelectHttpUpload($nom, $cheminDossierDest="", $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre http UPLOAD. Tous les fichiers téléchargés seront déposés dans le répertoire $cheminDossierDest</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltSelectSession($nom, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre contenant la valeur d’une session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltSelectFixe($nom, $valeur, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre basé sur une valeur fixe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereFltSelectCookie($nom, $exprDonnees='', $nomClsComp='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un filtre contenant la valeur d’un cookie</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="trued-finitions-de-colonne"><a class="anchor" href="#trued-finitions-de-colonne"></a>Définitions de colonne</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété / Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$DefinitionColonnes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tableau des définitions de colonne</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColCachee($nomDonnees, $aliasDonnees="")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne cachée.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColInvisible($nomDonnees, $aliasDonnees="")</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefCol($nomDonnees, $libelle="", $aliasDonnees="")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne, avec un libellé.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColBool($nomDonnees, $libelle="", $aliasDonnees="", $valPositive="", $valNegative="")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne qui affiche un libellé en fonction d’une valeur booléenne.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColChoix($nomDonnees, $libelle="", $aliasDonnees="", $valsChoix=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne qui affiche un libellé en fonction d’une valeur.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColMonnaie($nomDonnees, $libelle="", $aliasDonnees="")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne au format monétaire</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColMoney($nomDonnees, $libelle="", $aliasDonnees="")</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColDateFr($nomDonnees, $libelle="", $inclureHeure=0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne au format Français (dd/mm/yyyy). Si $inclureHeure est égal à 1, l’heure sera affichée également.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColDateTimeFr($nomDonnees, $libelle="", $aliasDonnees="")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne au format Français (dd/mm/yyyy hh:mi:ss)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColDetail($nomDonnees, $libelle="", $aliasDonnees="")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne, qui affiche les 1ers caractères de la ligne. Si vous posez le curseur sur cette cellule, un bloc contenant le texte intégral apparaîtra.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColHtml($modeleHtml="", $libelle="")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne qui affichera un contenu HTML.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColTimestamp($nomDonnees, $libelle="", $formatDate="d/m/Y H:i:s")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne qui affichera une date à partir d’un timestamp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereDefColActions($libelle, $actions=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une définition de colonne affichera des liens.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truesource-de-valeurs-suppl-mentaires"><a class="anchor" href="#truesource-de-valeurs-suppl-mentaires"></a>Source de valeurs supplémentaires</h4>
<div class="paragraph">
<p>Vous pouvez étendre les lignes calculées dans le tableau de données. Utilisez la propriété <strong>$SourceValeursSuppl</strong>. Etendez la classe <strong>PvSrcValsSupplLgnDonnees</strong> pour réécrire sa méthode <strong>Applique(&amp; $composant, $ligneDonnees)</strong>.</p>
</div>
<div class="paragraph">
<p>Vous utiliserez ces nouvelles valeurs uniquement dans une définition de colonne HTML.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class SrcValsSuppl1 extends PvSrcValsSupplLgnDonnees
{
public function Applique(&amp; $composant, $ligneDonnees)
{
$results = array('menu' =&gt; '&lt;a href="?appelleScript=developper&amp;id='.urlencode($ligneDonnees ["id"]).'"&gt;+&lt;/a&gt;') ;
return array_merge($ligneDonnees, $results) ;
}
}
class MonScript1 extends PvScriptWebSimple
{
public function DetermineEnvironnement()
{
$this-&gt;Tabl1 = new PvTableauDonneesHtml() ;
$this-&gt;Tabl1-&gt;AdopteScript("tabl1", $this) ;
$this-&gt;Tabl1-&gt;ChargeConfig() ;
// ...
$this-&gt;Tabl1-&gt;SourceValeursSuppl = new SrcValsSuppl1() ;
// ...
$this-&gt;Tabl1-&gt;InsereDefColCachee("id") ;
$this-&gt;Tabl1-&gt;InsereDefColHtml('$\{menu} $\{id}', 'Actions') ;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
</div>
<div class="sect3">
<h4 id="trueautres-propri-t-s-2"><a class="anchor" href="#trueautres-propri-t-s-2"></a>Autres propriétés</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété / Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$Largeur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Largeur du formulaire de filtres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$LargeurFormulaireFiltres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Largeur du formulaire de filtres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$AlignFormulaireFiltres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alignement du formulaire de filtres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$MessageAucunElement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message lorsqu’il n’y a aucun élément trouvé</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ElementsEnCours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tableau contenant toutes les lignes trouvées</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$AlerterAucunElement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affichera le message s’il n’y a aucun élément</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$TriPossible</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permettra le tri</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$TotalElements</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre de lignes retournées</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CacherNavigateurRangees</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cacher le navigateur de rangées</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CacherFormulaireFiltres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cacher le formulaire de filtres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CacherBlocCommandes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cacher le bloc de commandes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$MaxElementsPossibles = array(20)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombres maximum de lignes par rangée</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="trueliens-d-action"><a class="anchor" href="#trueliens-d-action"></a>Liens d’action</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereLienAction(&amp; $col, $formatUrl='', $formatLib='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit un lien dans la colonne Action $col.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereLienActionAvant(&amp; $col, $index, $formatUrl='', $formatLib='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit un lien dans la colonne Action $col à la position $index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereIconeAction(&amp; $col, $formatUrl='', $formatCheminIcone='', $formatLib='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une icône dans la colonne Action $col.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereIconeActionAvant(&amp; $col, $index, $formatUrl='', $formatCheminIcone='', $formatLib='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une icône dans la colonne Action $col à la position $index</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truecommandes-2"><a class="anchor" href="#truecommandes-2"></a>Commandes</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété / Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$Commandes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tableau contenant toutes les commandes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereCommande($nom, $commande)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une commande dans le tableau</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InscritCmdRafraich($libelle='Actualiser', $cheminIcone='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une commande qui soumet le formulaire de filtres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereCmdRedirectUrl($nomCmd, $url, $libelle='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une commande qui redirige sur une URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereCmdRedirectScript($nomCmd, $nomScript, $libelle='', $params=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une commande qui redirige sur un script de la zone</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereCmdScriptSession($nomCmd, $libelle='', $urlDefaut=array())</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une commande qui redirige sur le script session de la zone</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereCmdExportTexte($nomCmd, $libelle='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une commande qui exporte les résultats au format texte (CSV)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InsereCmdExportExcel($nomCmd, $libelle='')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inscrit une commande qui exporte les résultats au format HTML pour Excel</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truerendu-du-formulaire-de-donn-es"><a class="anchor" href="#truerendu-du-formulaire-de-donn-es"></a>Rendu du formulaire de données</h4>
<div class="paragraph">
<p>Vous pouvez personnaliser le rendu du formulaire de filtres avec sa propriété <strong>$DessinateurFiltresSelection</strong>.</p>
</div>
<div class="paragraph">
<p>Référez-vous au <a href="#rendu-du-formulaire-de-filtres"><span class="underline">rendu des filtres d’édition du formulaire de données</span></a> pour l’utilisation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueles-filtres-de-donn-es-http"><a class="anchor" href="#trueles-filtres-de-donn-es-http"></a>Les filtres de données http</h3>
<div class="sect3">
<h4 id="truepr-sentation-4"><a class="anchor" href="#truepr-sentation-4"></a>Présentation</h4>
<div class="paragraph">
<p>Ils sont surtout utilisés dans les formulaires et les tableaux de données.</p>
</div>
<div class="paragraph">
<p>Ils vous proposent des champs de saisie, qui seront soumis après validation.</p>
</div>
</div>
<div class="sect3">
<h4 id="truepropri-t-s-et-m-thodes-principales-3"><a class="anchor" href="#truepropri-t-s-et-m-thodes-principales-3"></a>Propriétés et Méthodes principales</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété / Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$Libelle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Libellé</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$EstEtiquette</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si la valeur est 1, le filtre affichera la valeur au lieu du champ de saisie.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ValeurVide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valeur NULLE du filtre.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ValeurParDefaut</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valeur par défaut</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$NePasLierParametre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renvoie toujours la valeur par défaut du filtre.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$NomParametreLie</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom du paramètre soumis par http</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$NePasLireColonne</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ne change pas la valeur de la colonne liée au filtre. Utilisée dans les formulaires de données.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$AliasParametreDonnees</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Expression de la colonne de données</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Ex. TO_CHAR(&lt;self&gt;)</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ExpressionDonnees</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Condition SQL lorsque le filtre est utilisé dans une recherche.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Ex : MON_CHAMP = &lt;self&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$NomColonneLiee</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom de la colonne dans la table, pour un filtre d’édition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ExpressionColonneLiee</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Expression de la colonne dans la table, pour un filtre d’édition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Ex. PASSWORD(&lt;self&gt;)</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$LectureSeule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passer la valeur par défaut du filtre de données, et la soumettre dans le formulaire.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$Invisible</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le filtre ne sera pas affiché sur la page. Il renvoie toujours sa valeur par défaut</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$NePasIntegrerParametre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empêche le formulaire de données d’utiliser ce filtre pour la recherche.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lie()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit la valeur soumise à partir du formulaire. Elle est utilisée après clic sur :<br>
- une commande de formulaire donnée<br>
- le bouton « Rechercher » du tableau de données</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$DejaLie</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signale si le filtre a été lié déjà.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ValeurParametre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valeur liée. Utilisez plutôt la méthode <strong>Lie()</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$Role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type du filtre de données.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$TypeLiaisonParametre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contient la valeur :<br>
- "get" : valeur issue de $_GET<br>
- "post" : valeur issue de $_POST</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truecorrecteur-de-valeur"><a class="anchor" href="#truecorrecteur-de-valeur"></a>Correcteur de valeur</h4>
<div class="paragraph">
<p>C’est une propriété qui encode/décode la valeur brute d’un filtre.</p>
</div>
<div class="paragraph">
<p>Vous devez étendre la classe <strong>PvCorrecteurValeurFiltreBase</strong> et réécrire les méthodes clées.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonCorrectValFiltre1 extends PvCorrecteurValeurFiltreBase
{
public function Applique($valeur, &amp; $filtre)
{
return htmlentities($valeur) ;
}
}
class MonScript1 extends PvScriptWebSimple
{
public function DetermineEnvironnement()
{
// ...
$form = new PvFormulaireDonneesHtml() ;
// ...
$flt1 = $form-&gt;InsereFltEditHttpPost("flt1", "") ;
$flt1-&gt;CorrecteurValeur = new MonCorrectValFiltre1() ;
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe des correcteurs de valeurs déjà déclarés.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Classe</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvCorrecteurValeurFiltreBase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correcteur de valeur par défaut</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvCorrecteurValeurSansAccent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enlève tous les caractères spéciaux.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="truecomposant-de-filtre"><a class="anchor" href="#truecomposant-de-filtre"></a>Composant de filtre</h4>
<div class="sect4">
<h5 id="truepr-sentation-5"><a class="anchor" href="#truepr-sentation-5"></a>Présentation</h5>
<div class="paragraph">
<p>Le composant de filtre de données est le champ de saisie. Vous le définissez ainsi :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Méthode</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DeclareComposant($nomClasseComposant)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit le composant à partir du nom de la classe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemplaceComposant($composant)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Définit le composant à partir de l’instance</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$flt1 = $form-&gt;InsereFltEditHttpPost("monchamp") ;
// Le composant est dans la variable $comp1
$comp1 = $flt1-&gt;DeclareComposant("PvZoneMultiligneHtml") ;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="truecomposants-el-ments-html"><a class="anchor" href="#truecomposants-el-ments-html"></a>Composants Eléments HTML</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Classe</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvZoneTexteHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Composant par défaut affectée au filtre. Affiche un champ INPUT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvZoneMultiligneHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche un champ TEXTAREA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvZoneMotPasseHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche un champ PASSWORD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvZoneEtiquetteHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche un champ en lecture seule.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="truecomposants-de-liste"><a class="anchor" href="#truecomposants-de-liste"></a>Composants de liste</h5>
<div class="paragraph">
<p>Les composants de liste utilisent un fournisseur de données pour leur rendu.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$comp1 = $flt1-&gt;DeclareComposant("PvZoneSelectHtml") ;
// Définition du fournisseur de données
$comp1-&gt;FournisseurDonnees = new PvFournisseurDonneesSql() ;
$comp1-&gt;FournisseurDonnees-&gt;BaseDonnees = new MaBD1() ;
$comp1-&gt;FournisseurDonnees-&gt;RequeteSelection = "matable1" ;
// Définition des valeurs
$comp1-&gt;NomColonneValeur = "id" ;
// Définition de l'affichage
$comp1-&gt;NomColonneLibelle = "monchamp1" ;
// Afficher une valeur par defaut s’il n’y a aucune valeur
$comp1-&gt;InclureElementHorsLigne = 1 ;
$comp1-&gt;ValeurElementHorsLigne = -1 ;
$comp1-&gt;LibelleElementHorsLigne = " – Aucun --" ;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Classe</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvZoneBoiteSelectHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche une zone SELECT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvZoneBoiteOptionsRadioHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche une zone de plusieurs options RADIO à cocher.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvZoneBoiteOptionsCocherHtml</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Affiche une zone de plusieurs options CHECKBOX à cocher.</p>
</div>
<div class="paragraph">
<p>Pour récupérer toutes les valeurs cochées, utilisez la propriété $ValeurBrute du filtre.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvZoneCadreOptionsRadioHtml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche une zone de plusieurs options RADIO à cocher, dans un IFRAME HTML</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="trueformatage-de-libell"><a class="anchor" href="#trueformatage-de-libell"></a>Formatage de libellé</h5>
<div class="paragraph">
<p>Si le filtre de données est en étiquette, son champ de saisie ne sera pas éditable.</p>
</div>
<div class="paragraph">
<p>Pour personnaliser ce rendu, utilisez la méthode <strong>DefinitFmtLbl</strong>. Etendez la classe <strong>PvFmtLblBase</strong> et réécrivez sa méthode <strong>Rendu($valeur, &amp; $composant)</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonFmtLbl1 extends PvFmtLblBase
{
public function Rendu($valeur, &amp; $composant)
{
return base64_decode($valeur) ;
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite, affectez ce format au composant avec la méthode <strong>DefinitFmtLbl()</strong> du filtre. Vous devez déclarer le composant avant d’utiliser cette méthode.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">$comp = $flt1-&gt;DeclareComposant("PvZoneTexteHtml") ;
// …
$flt1-&gt;DefinitFmtLbl(new MonFmtLbl1()) ;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici des formats déjà définis :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Classe</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvFmtLblBase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classe de base.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvFmtLblWeb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classe affectée par défaut</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvFmtLblDateFr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche au format date français</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvFmtLblDateTimeFr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche au format date et heure français</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvFmtMonnaie</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affiche au format monétaire</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="truele-filtre-de-donn-es-upload"><a class="anchor" href="#truele-filtre-de-donn-es-upload"></a>Le filtre de données Upload</h4>
<div class="paragraph">
<p>Le filtre de données Upload télécharge un fichier.</p>
</div>
<div class="sect4">
<h5 id="truepropri-t-s-m-thodes-principales"><a class="anchor" href="#truepropri-t-s-m-thodes-principales"></a>Propriétés / Méthodes principales</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété / Méthodes</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$NettoyerCaractsFichier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enlève les caractères spéciaux du nom fichier téléchargé.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ExtensionsAcceptees</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tableau contenant les extensions uniquement acceptées. Si le fichier soumis n’a pas une extension, il ne sera pas copié dans le répertoire</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ExtensionsRejetees</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tableau contenant les extensions à rejeter systématiquement.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$FormatFichierTelech</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Format du nom de fichier téléchargé. Variables disponibles :<br>
- Cle : Identifiant Unique<br>
- NombreAleatoire : Nombre compris entre 1 &amp; 10000<br>
- NomFichier : Nom d’origine du fichier<br>
- Timestamp : Timestamp actuel<br>
- Date : Date au format YmdHis</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Ex : "Bon-Commande-$\{Cle}"</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$SourceTelechargement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contient les valeurs suivantes :<br>
- post : Aucun fichier n’est soumis<br>
- files : Un fichier a été soumis</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InfosTelechargement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contient les détails du fichier téléchargé.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ToujoursRenseignerFichier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renvoie une erreur dans le formulaire de données, si aucun fichier n’est soumis.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="truecaract-ristique-du-composant"><a class="anchor" href="#truecaract-ristique-du-composant"></a>Caractéristique du Composant</h5>
<div class="paragraph">
<p>Le composant par défaut de ce filtre est le composant <strong>PvZoneUploadHtml</strong>.</p>
</div>
<div class="paragraph">
<p>Ses propriétés principales sont :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureErreurTelecharg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Afficher l’erreur survenue lors du téléchargement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureCheminCoteServeur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Afficher le chemin relatif du fichier téléchargé</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureZoneSelectFichier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Afficher les informations sur le fichier téléchargé</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$CheminCoteServeurEditable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoriser la modification du chemin relatif sur le serveur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$InclureApercu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valeurs possibles :<br>
- 0 : Ne pas autoriser d’aperçu<br>
- 1 : Affiche un lien pour afficher dans le navigateur<br>
- 2 : Afficher le fichier dans un cadre, si c’est possible</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$LargeurCadreApercu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Largeur HTML du cadre d’aperçu</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$HauteurCadreApercu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hauteur HTML du cadre d’aperçu.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truela-grille-de-donn-es-html"><a class="anchor" href="#truela-grille-de-donn-es-html"></a>La Grille de données HTML</h3>
<div class="paragraph">
<p>La grille de données affiche les lignes d&#8217;enregistrement sur une grille. Elle se base sur le tableau de données.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$ContenuLigneModele</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Format de la cellule. Vous incorporez les colonnes de données à partir de leur noms.<br>
Ex. ${id}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$EmpilerValeursSiModLigVide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empile les valeurs de toutes les colonnes si $ContenuLigneModele est vide.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$AlignVCellule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alignement HTML vertical de la cellule</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$MaxColonnes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre de colonnes Maximum à afficher.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonScript1 extends PvScriptWebSimple
{
// ....
public function DetermineEnvironnement()
{
//Initiation
$grille = new PvGrilleDonneesHtml() ;
$grille-&gt;AdopteScript("grille", $this) ;
$grille-&gt;ChargeConfig() ;
// Définition des colonnes
$grille-&gt;InsereDefCol("id") ;
$grille-&gt;InsereDefCol("titre") ;
$grille-&gt;InsereDefCol("description") ;
// Définition des autres propriétés
$grille-&gt;MaxColonnes = 3 ;
$grille-&gt;ContenuLigneModele = '&lt;h4&gt;${id}. ${titre}&lt;/h4&gt;
&lt;p&gt;${description}&lt;/p&gt;' ;
// définir le fournisseur de données...
}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truela-classe-zone-bootstrap"><a class="anchor" href="#truela-classe-zone-bootstrap"></a>La classe Zone Bootstrap</h2>
<div class="sectionbody">
<div class="paragraph">
<p>C&#8217;est une IHM basée sur la zone web simple, avec la librairie Bootstrap 3.3.x ou 4.x.</p>
</div>
<div class="sect2">
<h3 id="truescripts-membership"><a class="anchor" href="#truescripts-membership"></a>Scripts Membership</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Nom du script</strong></th>
<th class="tableblock halign-left valign-top"><strong>Classe script web</strong></th>
<th class="tableblock halign-left valign-top"><strong>Pré-requis<br>
zone web</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connexion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptConnexionBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page de connexion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deconnexion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptDeconnexionBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page de déconnexion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">recouvreMP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptRecouvreMPBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page pour récupérer son mot de passe, à partir du login et du mot de passe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inscription</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptInscriptionBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre la propriété $AutoriserInscription à 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page d’inscription d’un membre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifPrefs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifPrefsBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mettre la propriété $AutoriserModifPrefs à 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page pour modifier les informations du membre (nom, prénom, …)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">doitChangerMotPasse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptDoitChangerMotPasseBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page qui force le membre connecté à changer son mot de passe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">changeMotPasse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptChangeMotPasseBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page pour modifier le mot de passe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ajoutMembre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptAjoutMembreMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajouter un membre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifMembre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifMembreMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modifie un membre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">supprMembre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptSupprMembreMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Désactive le membre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listeMembres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptListeMembresMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste les membres</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ajoutProfil</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptAjoutProfilMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un profil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifProfil</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifProfilMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modifie un profil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">supprProfil</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptSupprProfilMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Désactive le profil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listeProfils</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptListeProfilsMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste les profils</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ajoutRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptAjoutRoleMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute un rôle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifRoleMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modifie un rôle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">supprRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptSupprRoleMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Désactive un rôle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listeRoles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptListeRolesMSBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste les rôles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ajoutServeurAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptAjoutServeurADBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajoute une connexion LDAP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifServeurAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptModifServeurADBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modifie une connexion LDAP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">supprServeurAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptSupprServeurADBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supprime une connexion LDAP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listeServeursAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PvScriptListeServeursADBootstrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste les connexions LDAP</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="truele-tableau-de-donn-es-2"><a class="anchor" href="#truele-tableau-de-donn-es-2"></a>Le tableau de données</h3>
<div class="paragraph">
<p>Le composant est PvTableauDonneesBootstrap.</p>
</div>
</div>
<div class="sect2">
<h3 id="truele-formulaire-de-donn-es-2"><a class="anchor" href="#truele-formulaire-de-donn-es-2"></a>Le formulaire de données</h3>
<div class="paragraph">
<p>Le composant est PvFormulaireDonneesBootstrap.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truela-classe-tache-programm-e"><a class="anchor" href="#truela-classe-tache-programm-e"></a>La classe Tache Programmée</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La tâche programmée est un composant de l&#8217;application, pour exécuter des instructions à un moment précis.</p>
</div>
<div class="sect2">
<h3 id="trueutilisation-2"><a class="anchor" href="#trueutilisation-2"></a>Utilisation</h3>
<div class="ulist">
<ul>
<li>
<p>Vous devez réecrire une classe héritant de la tache <strong>PvTacheProg</strong>. Réécrivez la méthode <strong>ExecuteSession()</strong>, qui contient le code à exécuter.</p>
</li>
<li>
<p>Dans la déclaration de votre application, réécrivez la méthode <strong>ChargeTachesProgs()</strong>. Invoquez <strong>InsereTacheProg($nom, $tacheProg)</strong> pour inscrire votre tache programmée</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MaTacheProg1 extends PvTacheProg
{
public $CheminFichierRelatif = "monApp/tache1.php" ;
protected function ExecuteSession()
{
echo "Ma tache a ete executee" ;
}
}
class MonApplication1 extends PvApplication
{
protected function ChargeTachesProgs()
{
$this-&gt;Tache1 = $this-&gt;InsereTacheProg("maTache1", new MaTacheProg1()) ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueplanification"><a class="anchor" href="#trueplanification"></a>Planification</h3>
<div class="paragraph">
<p>Utilisez le planificateur de tâche de votre système d&#8217;exploitation (crontab, &#8230;&#8203;).</p>
</div>
</div>
<div class="sect2">
<h3 id="truecontexte-d-ex-cution"><a class="anchor" href="#truecontexte-d-ex-cution"></a>Contexte d&#8217;exécution</h3>
<div class="paragraph">
<p>La tâche programmée s&#8217;exécute en ligne de commande par défaut. Pour l&#8217;afficher dans un navigateur, mettez la propriété <strong>$NaturePlateforme</strong> à "WEB".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MaTacheProg1 extends PvTacheProg
{
public $CheminFichierRelatif = "monApp/tache1.php" ;
public $NaturePlateforme = "WEB" ;
// ...
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truela-classe-service-persistant"><a class="anchor" href="#truela-classe-service-persistant"></a>La classe Service Persistant</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le service persistant est un daemon PHP. Une fois exécutée, il ne s&#8217;arrête jamais.</p>
</div>
<div class="paragraph">
<p>Il s&#8217;exécute uniquement par ligne de commande.</p>
</div>
<div class="sect2">
<h3 id="trueutilisation-3"><a class="anchor" href="#trueutilisation-3"></a>Utilisation</h3>
<div class="ulist">
<ul>
<li>
<p>Vous devez réecrire une classe héritant de la tache <strong>PvServicePersist</strong>. Réécrivez la méthode <strong>ExecuteSession()</strong>, qui contient le code à exécuter.</p>
</li>
<li>
<p>Dans la déclaration de votre application, réécrivez la méthode <strong>ChargeServsPersists()</strong>. Invoquez <strong>InsereServPersist($nom, $servPersist)</strong> pour inscrire votre service</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonService1 extends PvServicePersist
{
public $CheminFichierRelatif = "monApp/service1.php" ;
protected function ExecuteSession()
{
echo "Mon service est en cours d'execution\n" ;
}
}
// Déclaration de la classe Application
class MonApplication1 extends PvApplication
{
// ...
protected function ChargeServsPersists()
{
$this-&gt;Service1 = $this-&gt;InsereServPersist("monServ1", new MonService1()) ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truepropri-t-s-principales"><a class="anchor" href="#truepropri-t-s-principales"></a>Propriétés principales</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Propriété</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$DelaiAttente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Délai avant de recommencer la boucle(session)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$DelaiEtatInactif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Délai avant de considerer le service comme inactif ou planté</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$MaxSessions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum de boucle possible avant d&#8217;arrêter le service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$LimiterDelaiBoucle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provoque une erreur fatale si la session prend trop de temps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$DelaiBoucle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Délai maximum pour exécuter une boucle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$Arreter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arrêter le service une fois la session exécutée.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="truel-tat-d-un-service"><a class="anchor" href="#truel-tat-d-un-service"></a>L'état d&#8217;un service</h4>
<div class="paragraph">
<p>C&#8217;est la capture qui témoigne de l'état d&#8217;un service. Elle contient les informations suivantes :
* PID : ID du processus
* Statut : 1=démarré, 2=stoppé
* TimestmpCapt : Timestamp de la capture
* TimestmpDebutSession : Timestamp de démarrage de la session en cours
* TimestmpFinSession : Timestamp de la fin de la session en cours</p>
</div>
<div class="paragraph">
<p>Le service persistant sauvegarde cette capture dans un fichier, avec la méthode <strong>SauveEtat()</strong>.
Vous définissez le répertoire de ces captures avec la propriété $ChemRelRegServsPersists de la classe Application. Son fichier est du format "&lt;nomService&gt;.dat".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonService1 extends PvServicePersist
{
public $CheminFichierRelatif = "monApp/service1.php" ;
protected function ExecuteSession()
{
echo "Mon service est en cours d'execution\n" ;
// Sauvegarder l'état dans "monApp/data/monServ1.dat"
$this-&gt;SauveEtat() ;
echo "Traitement suivant...\n" ;
}
}
// Déclaration de la classe Application
class MonApplication1 extends PvApplication
{
// Définir le répertoire des états des services persistant
public $ChemRelRegServsPersists = "monApp/data" ;
// ...
protected function ChargeServsPersists()
{
$this-&gt;Service1 = $this-&gt;InsereServPersist("monServ1", new MonService1()) ;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truele-contr-leur-de-services-persistant"><a class="anchor" href="#truele-contr-leur-de-services-persistant"></a>Le contrôleur de services persistant</h4>
<div class="paragraph">
<p>C&#8217;est une tâche programmée qui redémarre les services persistants inactifs. Pour chaque service, réécrivez la méthode <strong>Verifie()</strong> pour surveiller son fonctionnement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonService1 extends PvServicePersist
{
public $CheminFichierRelatif = "monApp/service1.php" ;
protected function ExecuteSession()
{
echo "Mon service est en cours d'execution\n" ;
}
// Verification
public function Verifie()
{
$ok = 1 ;
$totalElements = 0 ;
// Effectuer des controles ... (nombre d'elements en attente, date dernière action, etc)
if($totalElements &gt; 10)
{
$ok = 0 ; // 0 = Service inactif
}
return $ok ;
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour intégrer le contrôleur de services persistants, invoquez la méthode <strong>InscritCtrlServsPersists()</strong> dans la classe Application. Ce contrôleur devient accessible par la propriété <strong>$CtrlServsPersists</strong>. Renseignez alors le chemin relatif, pour l&#8217;appeler en ligne de commande.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php" data-lang="php">class MonApplication1 extends PvApplication
{
// ...
protected function ChargeServsPersists()
{
$this-&gt;Service1 = $this-&gt;InsereServPersist("monServ1", new MonService1()) ;
// Inscrire le controleur
$this-&gt;InscritCtrlServsPersists() ;
// Définir le chemin du fichier PHP
$this-&gt;CtrlServsPersists-&gt;CheminFichierRelatif = "monApp/processus/ctrl_services.php" ;
// php /.../monApp/processus/ctrl_services.php
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inscrivez cette tâche programmée dans votre planificateur OS (ex : crontab sous Linux). Vous ne surveillerez plus vos services persistants.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueorganisation-d-une-solution-php-pv"><a class="anchor" href="#trueorganisation-d-une-solution-php-pv"></a>Organisation d’une solution PHP-PV</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truedossiers-principaux-2"><a class="anchor" href="#truedossiers-principaux-2"></a>Dossiers principaux</h3>
<div class="paragraph">
<p>Pour mieux organiser votre solution développée sous PHP-PV, nous vous recommandons de créer ces dossiers :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Chemin</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Racine de votre solution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/lib</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contient toutes les classes de votre solution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/consts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contient les constantes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/js</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contient tous les scripts Javascript</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/css</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contient tous les fichiers CSS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/vendor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contient toutes les librairies PHP/Javascript/CSS externes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/index.php</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script PHP de la solution</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="truestructure-du-dossier-lib"><a class="anchor" href="#truestructure-du-dossier-lib"></a>Structure du dossier lib</h3>
<div class="paragraph">
<p>Dans le dossier « /lib », nous vous recommandons de créer les fichiers suivants :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Fichier ou Répertoire</strong></th>
<th class="tableblock halign-left valign-top"><strong>Rôle</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/lib/Application.class.php</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Déclaration de votre classe Application. Elle inclura toutes les librairies PHP et fichiers de ce répertoire</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/lib/Zone.class.php</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Déclaration de votre classe Zone. Elle inclura les fichiers scripts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/lib/Script.class.php</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Elle inclura tous les scripts (/lib/Script.class.php)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/lib/script/Noyau.class.php</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Déclaration de vos scripts web de référence. Ces scripts seront étendus par les autres scripts</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-02-10 10:04:07 G
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>