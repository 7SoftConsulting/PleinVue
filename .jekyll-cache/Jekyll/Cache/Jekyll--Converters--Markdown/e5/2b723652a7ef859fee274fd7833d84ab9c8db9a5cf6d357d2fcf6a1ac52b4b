I"ÿ<h1 id="zone-web-simple">Zone Web Simple</h1>

<h2 id="pr√©sentation">Pr√©sentation</h2>

<p>La zone web simple repr√©sente un ensemble de pages web. L‚Äôutilisateur pourra y acc√©der s‚Äôil poss√®de les droits ad√©quats.</p>

<h2 id="ent√™tes-document">Ent√™tes document</h2>

<h3 id="propri√©t√©s-html">Propri√©t√©s HTML</h3>

<p>La zone web poss√®de des propri√©t√©s pour le rendu HTML.</p>

<table>
  <thead>
    <tr>
      <th>Propri√©t√©</th>
      <th>R√¥le</th>
      <th>Contenu HTML g√©n√©r√©</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>EncodageDocument</td>
      <td>Fixe l‚Äôencodage de la page web. Par d√©faut : ‚Äúutf-8‚Äù</td>
      <td>&lt;meta charset=‚Äù$valeur‚Äù /&gt;</td>
    </tr>
    <tr>
      <td>MotsCleMeta</td>
      <td>Mots cl√© META</td>
      <td>&lt;meta name=‚Äùkeywords‚Äù value=‚Äù$valeur‚Äù /&gt;</td>
    </tr>
    <tr>
      <td>DescriptionMeta</td>
      <td>Description META</td>
      <td>&lt;meta name=‚Äùdescription‚Äù value=‚Äù$valeur‚Äù /&gt;</td>
    </tr>
    <tr>
      <td>LangueDocument</td>
      <td>Langage du document</td>
      <td>&lt;html lang=‚Äù$valeur‚Äù&gt;</td>
    </tr>
    <tr>
      <td>TitreDocument</td>
      <td>Titre du document</td>
      <td>&lt;title&gt;$valeur&lt;/title&gt;</td>
    </tr>
    <tr>
      <td>ViewportMeta</td>
      <td>Viewport Meta</td>
      <td>&lt;meta name=‚Äùviewport‚Äù content=‚Äù$valeur‚Äù /&gt;</td>
    </tr>
    <tr>
      <td>UrlBase</td>
      <td>Lien de Base</td>
      <td>&lt;base href=‚Äù$valeur‚Äù /&gt;</td>
    </tr>
  </tbody>
</table>

<p>Exemple :</p>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
	<span class="k">include</span> <span class="nb">dirname</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">)</span><span class="mf">.</span><span class="s2">"/php-pv-master/Pv/Base.class.php"</span> <span class="p">;</span>
	
	<span class="kd">class</span> <span class="nc">MonApplication1</span> <span class="kd">extends</span> <span class="nc">PvApplication</span>
	<span class="p">{</span>
		<span class="k">public</span> <span class="nv">$ZonePrinc</span> <span class="p">;</span>
		<span class="k">protected</span> <span class="k">function</span> <span class="n">ChargeIHMs</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="c1">// Inscrire la zone web de l'Application</span>
			<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">ZonePrinc</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereIHM</span><span class="p">(</span><span class="s2">"zonePrinc"</span><span class="p">,</span> <span class="k">new</span> <span class="nc">ZoneWebApplication1</span><span class="p">())</span> <span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="c1">// D√©claration de la zone web</span>
	<span class="kd">class</span> <span class="nc">ZoneWebApplication1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
	<span class="p">{</span>
		<span class="c1">// Afficher la zone web en fonction du chemin dans le navigateur</span>
		<span class="k">public</span> <span class="nv">$AccepterTousChemins</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
		<span class="k">public</span> <span class="nv">$ScriptAccueil</span> <span class="p">;</span>
		<span class="k">public</span> <span class="nv">$EncodageDocument</span> <span class="o">=</span> <span class="s1">'utf-8'</span> <span class="p">;</span>
		<span class="k">public</span> <span class="nv">$MotsCleMeta</span> <span class="o">=</span> <span class="s1">'Attributs, Zone, Web Simple'</span> <span class="p">;</span>
		<span class="k">public</span> <span class="nv">$DescriptionMeta</span> <span class="o">=</span> <span class="s1">'Description d\'une Zone Web Simple'</span> <span class="p">;</span>
		<span class="k">protected</span> <span class="k">function</span> <span class="n">ChargeScripts</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="c1">// Inscrire le script web par d√©faut</span>
			<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">ScriptAccueil</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScriptParDefaut</span><span class="p">(</span><span class="k">new</span> <span class="nc">ScriptAccueilApplication1</span><span class="p">())</span> <span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="c1">// D√©claration du script web par d√©faut.</span>
	<span class="kd">class</span> <span class="nc">ScriptAccueilApplication1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
	<span class="p">{</span>
		<span class="c1">// Code HTML qui sera affich√© dans le navigateur</span>
		<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
			<span class="nv">$ctn</span> <span class="o">=</span> <span class="s2">"BIENVENUE SUR MA APPLICATION 1"</span> <span class="p">;</span>
			<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	
	<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MonApplication1</span><span class="p">()</span> <span class="p">;</span>
	<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">Execute</span><span class="p">()</span> <span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div></div>

<h2 id="css-et-javascript">CSS et Javascript</h2>

<h3 id="biblioth√®ques-css-et-javascript">Biblioth√®ques CSS et Javascript</h3>

<p>La zone web simple inclut automatiquement les scripts &amp; styles CSS des librairies Javascript populaires.</p>

<h4 id="jquery">JQuery</h4>

<table>
  <thead>
    <tr>
      <th>Propri√©t√©</th>
      <th>Sp√©cification</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$InclureJQuery</td>
      <td>Mettre √† 1 pour inclure la librairie jquery</td>
    </tr>
    <tr>
      <td>$CheminJQuery</td>
      <td>Chemin relatif du fichier Js jQuery. Par d√©faut : ‚Äújs/jquery.min.js‚Äù</td>
    </tr>
    <tr>
      <td>$InclureJQueryMigrate</td>
      <td>Mettre √† 1 pour inclure la librairie jquery-migrate 1.x</td>
    </tr>
    <tr>
      <td>$CheminJQueryMigrate</td>
      <td>Chemin relatif du fichier Js JQueryMigrate. Par d√©faut : ‚Äújs/jquery-migrate.min.js‚Äù</td>
    </tr>
    <tr>
      <td>$InclureJQueryMigrate3</td>
      <td>Mettre √† 1 pour inclure la librairie jquery-migrate 3.x</td>
    </tr>
    <tr>
      <td>$CheminJQueryMigrate3</td>
      <td>Chemin relatif du fichier Js JQueryMigrate. Par d√©faut : ‚Äújs/jquery-migrate.min.js‚Äù</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZone1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$InclureJQuery</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$CheminJQuery</span> <span class="o">=</span> <span class="s2">"vendor/jquery/jquery.min.js"</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="jquery-ui">JQuery UI</h4>

<table>
  <thead>
    <tr>
      <th>Propri√©t√©</th>
      <th>Sp√©cification</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$InclureJQueryUi</td>
      <td>Mettre √† 1 pour inclure la librairie jqueryui</td>
    </tr>
    <tr>
      <td>$CheminJsJQueryUi</td>
      <td>Chemin relatif du fichier Js JQuery Ui. Par d√©faut : ‚Äújs/jquery-ui.min.js‚Äù</td>
    </tr>
    <tr>
      <td>$CheminCSSJQueryUi</td>
      <td>Chemin relatif du fichier CSS jQuery Ui. Par d√©faut : ‚Äúcss/jquery-ui.css‚Äù</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZone1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$InclureJQueryUi</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$CheminJsJQueryUi</span> <span class="o">=</span> <span class="s2">"vendor/jquery-ui/jquery-ui.min.js"</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$CheminCSSJQueryUi</span> <span class="o">=</span> <span class="s2">"vendor/jquery-ui/jquery-ui.css"</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="bootstrap">Bootstrap</h4>

<table>
  <thead>
    <tr>
      <th>Propri√©t√©</th>
      <th>Sp√©cification</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$InclureBootstrap</td>
      <td>Mettre √† 1 pour inclure la librairie bootstrap</td>
    </tr>
    <tr>
      <td>$CheminJsBootstrap</td>
      <td>Chemin relatif du fichier Js Bootstrap. Par d√©faut : ‚Äújs/bootstrap.min.js‚Äù</td>
    </tr>
    <tr>
      <td>$CheminCSSBootstrap</td>
      <td>Chemin relatif du fichier CSS Bootstrap. Par d√©faut : ‚Äúcss/bootstrap.css‚Äù</td>
    </tr>
    <tr>
      <td>$InclureBootstrapTheme</td>
      <td>Mettre √† 1 pour inclure un th√®me personnalis√© Bootstrap</td>
    </tr>
    <tr>
      <td>$CheminCSSBootstrapTheme</td>
      <td>Chemin relatif du fichier CSS Bootstrap. Par d√©faut : ‚Äúcss/bootstrap-theme.min.css‚Äù</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZone1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$InclureBootstrap</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$CheminJsBootstrap</span> <span class="o">=</span> <span class="s2">"vendor/bootstrap/bootstrap.min.js"</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$CheminCSSBootstrap</span> <span class="o">=</span> <span class="s2">"vendor/bootstrap/bootstrap.min.css"</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="font-awesome">Font Awesome</h4>

<table>
  <thead>
    <tr>
      <th>Propri√©t√©</th>
      <th>Sp√©cification</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$InclureFontAwesome</td>
      <td>Mettre √† 1 pour inclure Font Awesome</td>
    </tr>
    <tr>
      <td>$CheminFontAwesome</td>
      <td>Chemin relatif du fichier CSS Font Awesome. Par d√©faut : ‚Äúcss/font-awesome.css‚Äù</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZone1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$InclureFontAwesome</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$CheminFontAwesome</span> <span class="o">=</span> <span class="s2">"vendor/fontawesome/css/all.min.css"</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="contenus-css-et-javascript">Contenus CSS et Javascript</h3>

<p>La zone a √©galement des m√©thodes pour ins√©rer du contenu CSS et JS.</p>

<table>
  <thead>
    <tr>
      <th>M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>InscritContenuCSS ($contenu)</td>
      <td>Ins√®re un tag &lt;style&gt; avec le $contenu</td>
    </tr>
    <tr>
      <td>InscritLienCSS ($href)</td>
      <td>Ins√®re un tag &lt;link rel=‚Äùstylesheet‚Äù type=‚Äùtext/css‚Äù href=‚Äù$href‚Äù /&gt;</td>
    </tr>
    <tr>
      <td>InscritContenuJs ($contenu)</td>
      <td>Ins√®re un tag &lt;script&gt; avec le $contenu</td>
    </tr>
    <tr>
      <td>InscritContenuJsCmpIE ($contenu, $versionMin=9)</td>
      <td>Ins√®re un tag &lt;script&gt; avec le $contenu, avec les directives IE</td>
    </tr>
    <tr>
      <td>InscritLienJs ($src)</td>
      <td>Ins√®re un tag &lt;script&gt; avec la source $src</td>
    </tr>
    <tr>
      <td>InscritLienJsCmpIE ($src, $versionMin=9)</td>
      <td>Ins√®re un tag &lt;script&gt; avec la source $src, avec les directives IE</td>
    </tr>
  </tbody>
</table>

<p>Veuillez r√©√©crire la m√©thode <strong>InclutLibrairiesExternes()</strong>, en invoquant la m√©thode parente.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZone1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="k">Protected</span> <span class="k">function</span> <span class="n">InclutLibrairiesExternes</span><span class="p">()</span>
<span class="p">{</span>
<span class="k">Parent</span><span class="o">::</span><span class="nf">InclutLibrairiesExternes</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Inscrire les autres librairies JS &amp; CSS‚Ä¶</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InscritContenuCSS</span><span class="p">(</span><span class="s2">"body { text-align:center ; }"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InscritLienJs</span><span class="p">(</span><span class="s2">"js/main.js"</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

<h2 id="service-dauthentification">Service d‚Äôauthentification</h2>

<h3 id="filtrage-des-scripts">Filtrage des scripts</h3>

<p>La m√©thode <strong>ChargeScripts()</strong> s‚Äôex√©cute avant que la zone web charge le membre connect√©. Par cons√©quent, vous ne pouvez pas filtrer les scripts √† ce stade.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">ChargeScripts</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScriptParDefaut</span><span class="p">(</span><span class="k">new</span> <span class="nc">MonScript1</span><span class="p">())</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScript</span><span class="p">(</span><span class="s2">"presentation"</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MonScript2</span><span class="p">())</span> <span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">PossedeMembreConnecte</span><span class="p">())</span> <span class="c1">// Ram√®nera false m√™me s'il y a un membre connect√©</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScript</span><span class="p">(</span><span class="s2">"contact"</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MonScript2</span><span class="p">())</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Pour y parvenir, d√©clarez les scripts dans la m√©thode <strong>ChargeScriptsMembership()</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">ChargeScriptsMembership</span><span class="p">()</span>
<span class="p">{</span>
<span class="k">parent</span><span class="o">::</span><span class="nf">ChargeScriptsMembership</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScriptParDefaut</span><span class="p">(</span><span class="k">new</span> <span class="nc">MonScript1</span><span class="p">())</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScript</span><span class="p">(</span><span class="s2">"presentation"</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MonScript2</span><span class="p">())</span> <span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">PossedeMembreConnecte</span><span class="p">())</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScript</span><span class="p">(</span><span class="s2">"chat"</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MonScript2</span><span class="p">())</span> <span class="p">;</span> <span class="c1">// Script cr√©√© si un membre est connect√©</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScript</span><span class="p">(</span><span class="s2">"contact"</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MonScript3</span><span class="p">())</span> <span class="p">;</span> <span class="c1">// Script cr√©√© si un membre n'est pas connect√©</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="scripts-web-membership">Scripts web Membership</h3>

<p>Lorsque vous d√©clarez un membership dans la zone web, la zone cr√©e automatiquement des scripts.</p>

<table>
  <thead>
    <tr>
      <th>Nom du script</th>
      <th>Classe script web</th>
      <th>Pr√©-requis</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>connexion</td>
      <td>PvScriptConnexionWeb</td>
      <td>Aucun</td>
      <td>Page de connexion</td>
    </tr>
    <tr>
      <td>deconnexion</td>
      <td>PvScriptDeconnexionWeb</td>
      <td>Aucun</td>
      <td>Page de d√©connexion</td>
    </tr>
    <tr>
      <td>recouvreMP</td>
      <td>PvScriptRecouvreMPWeb</td>
      <td>Aucun</td>
      <td>Page pour r√©cup√©rer son mot de passe, √† partir du login et du mot de passe</td>
    </tr>
    <tr>
      <td>inscription</td>
      <td>PvScriptInscriptionWeb</td>
      <td>Mettre la propri√©t√© $AutoriserInscription √† 1</td>
      <td>Page d‚Äôinscription d‚Äôun membre</td>
    </tr>
    <tr>
      <td>modifPrefs</td>
      <td>PvScriptModifPrefsWeb</td>
      <td>Mettre la propri√©t√© $AutoriserModifPrefs √† 1</td>
      <td>Page pour modifier les informations du membre (nom, pr√©nom, ‚Ä¶)</td>
    </tr>
    <tr>
      <td>doitChangerMotPasse</td>
      <td>PvScriptDoitChangerMotPasseWeb</td>
      <td>Aucun</td>
      <td>Page qui force le membre connect√© √† changer son mot de passe</td>
    </tr>
    <tr>
      <td>changeMotPasse</td>
      <td>PvScriptChangeMotPasseWeb</td>
      <td>Aucun</td>
      <td>Page pour modifier le mot de passe</td>
    </tr>
    <tr>
      <td>ajoutMembre</td>
      <td>PvScriptAjoutMembreMSWeb</td>
      <td>Aucun</td>
      <td>Ajouter un membre</td>
    </tr>
    <tr>
      <td>importMembre</td>
      <td>PvScriptImportMembreMSWeb</td>
      <td>Aucun</td>
      <td>Importe des membres √† partir d‚Äôun fichier CSV</td>
    </tr>
    <tr>
      <td>modifMembre</td>
      <td>PvScriptModifMembreMSWeb</td>
      <td>Aucun</td>
      <td>Modifie un membre</td>
    </tr>
    <tr>
      <td>supprMembre</td>
      <td>PvScriptSupprMembreMSWeb</td>
      <td>Aucun</td>
      <td>D√©sactive le membre</td>
    </tr>
    <tr>
      <td>listeMembres</td>
      <td>PvScriptListeMembresMSWeb</td>
      <td>Aucun</td>
      <td>Liste les membres</td>
    </tr>
    <tr>
      <td>ajoutProfil</td>
      <td>PvScriptAjoutProfilMSWeb</td>
      <td>Aucun</td>
      <td>Ajoute un profil</td>
    </tr>
    <tr>
      <td>modifProfil</td>
      <td>PvScriptModifProfilMSWeb</td>
      <td>Aucun</td>
      <td>Modifie un profil</td>
    </tr>
    <tr>
      <td>supprProfil</td>
      <td>PvScriptSupprProfilMSWeb</td>
      <td>Aucun</td>
      <td>D√©sactive le profil</td>
    </tr>
    <tr>
      <td>listeProfils</td>
      <td>PvScriptListeProfilsMSWeb</td>
      <td>Aucun</td>
      <td>Liste les profils</td>
    </tr>
    <tr>
      <td>ajoutRole</td>
      <td>PvScriptAjoutRoleMSWeb</td>
      <td>Aucun</td>
      <td>Ajoute un r√¥le</td>
    </tr>
    <tr>
      <td>modifRole</td>
      <td>PvScriptModifRoleMSWeb</td>
      <td>Aucun</td>
      <td>Modifie un r√¥le</td>
    </tr>
    <tr>
      <td>supprRole</td>
      <td>PvScriptSupprRoleMSWeb</td>
      <td>Aucun</td>
      <td>D√©sactive un r√¥le</td>
    </tr>
    <tr>
      <td>listeRoles</td>
      <td>PvScriptListeRolesMSWeb</td>
      <td>Aucun</td>
      <td>Liste les r√¥les</td>
    </tr>
    <tr>
      <td>ajoutServeurAD</td>
      <td>PvScriptAjoutServeurADWeb</td>
      <td>Aucun</td>
      <td>Ajoute une connexion LDAP</td>
    </tr>
    <tr>
      <td>modifServeurAD</td>
      <td>PvScriptModifServeurADWeb</td>
      <td>Aucun</td>
      <td>Modifie une connexion LDAP</td>
    </tr>
    <tr>
      <td>supprServeurAD</td>
      <td>PvScriptSupprServeurADWeb</td>
      <td>Aucun</td>
      <td>Supprime une connexion LDAP</td>
    </tr>
    <tr>
      <td>listeServeursAD</td>
      <td>PvScriptListeServeursADWeb</td>
      <td>Aucun</td>
      <td>Liste les connexions LDAP</td>
    </tr>
  </tbody>
</table>

<p>Vous pouvez personnaliser chacun de ces scripts quand vous d√©clarez la zone web.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZoneWeb1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="c1">// Cas du script connexion</span>
<span class="k">public</span> <span class="nv">$NomScriptConnexion</span> <span class="o">=</span> <span class="s2">"connecter"</span> <span class="p">;</span> 
<span class="k">public</span> <span class="nv">$NomClasseScriptConnexion</span> <span class="o">=</span> <span class="s2">"MonScriptConnexion"</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">MonScriptConnexion</span> <span class="kd">extends</span> <span class="nc">PvScriptConnexionWeb</span>
<span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>
<h3 id="composants-web-membership">Composants web Membership</h3>

<p>Plusieurs scripts de membership utilisent un tableau de donn√©es ou un formulaire de donn√©es sp√©cifique.</p>

<table>
  <thead>
    <tr>
      <th>Nom du script</th>
      <th>Classe script web</th>
      <th>Classe composant</th>
      <th>Propri√©t√© composant</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>recouvreMP</td>
      <td>PvScriptRecouvreMPWeb</td>
      <td>PvFormulaireRecouvreMPMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>inscription</td>
      <td>PvScriptInscriptionWeb</td>
      <td>PvFormulaireInscriptionMembreMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>modifPrefs</td>
      <td>PvScriptModifPrefsWeb</td>
      <td>PvFormulaireModifInfosMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>doitChangerMotPasse</td>
      <td>PvScriptDoitChangerMotPasseWeb</td>
      <td>PvFormulaireDoitChangerMotPasseMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>changeMotPasse</td>
      <td>PvScriptChangeMotPasseWeb</td>
      <td>PvFormulaireChangeMotPasseMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>ajoutMembre</td>
      <td>PvScriptAjoutMembreMSWeb</td>
      <td>PvFormulaireAjoutMembreMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>modifMembre</td>
      <td>PvScriptModifMembreMSWeb</td>
      <td>PvFormulaireModifMembreMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>supprMembre</td>
      <td>PvScriptSupprMembreMSWeb</td>
      <td>PvFormulaireSupprMembreMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>listeMembres</td>
      <td>PvScriptListeMembresMSWeb</td>
      <td>PvTableauMembresMSHtml</td>
      <td>$NomClasseTableauDonnees</td>
    </tr>
    <tr>
      <td>ajoutProfil</td>
      <td>PvScriptAjoutProfilMSWeb</td>
      <td>PvFormulaireAjoutProfilMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>modifProfil</td>
      <td>PvScriptModifProfilMSWeb</td>
      <td>PvFormulaireModifProfilMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>supprProfil</td>
      <td>PvScriptSupprProfilMSWeb</td>
      <td>PvFormulaireSupprProfilMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>listeProfils</td>
      <td>PvScriptListeProfilsMSWeb</td>
      <td>PvTableauProfilsMSHtml</td>
      <td>$NomClasseTableauDonnees</td>
    </tr>
    <tr>
      <td>ajoutRole</td>
      <td>PvScriptAjoutRoleMSWeb</td>
      <td>PvFormulaireAjoutRoleMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>modifRole</td>
      <td>PvScriptModifRoleMSWeb</td>
      <td>PvFormulaireModifRoleMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>supprRole</td>
      <td>PvScriptSupprRoleMSWeb</td>
      <td>PvFormulaireSupprRoleMS</td>
      <td>$NomClasseFormulaireDonnees</td>
    </tr>
    <tr>
      <td>listeRoles</td>
      <td>PvScriptListeRolesMSWeb</td>
      <td>PvTableauAjoutRoleMS</td>
      <td>$NomClasseTableauDonnees</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZoneWeb1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$AutoriserModifPrefs</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span> 
<span class="k">public</span> <span class="nv">$NomClasseScriptConnexion</span> <span class="o">=</span> <span class="s2">"MonScriptModifPrefs"</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">FormModifPrefs1</span> <span class="kd">extends</span> <span class="nc">PvFormulaireModifInfosMS</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">MonScriptModifPrefs</span> <span class="kd">extends</span> <span class="nc">PvScriptModifPrefsWeb</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$NomClasseFormulaireDonnees</span> <span class="o">=</span> <span class="s2">"FormModifPrefs1"</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="le-remplisseur-de-config-membership">Le remplisseur de config Membership</h3>

<p>La zone, pour remplir chaque script de membership, utilise sa propri√©t√© <strong>$NomClasseRemplisseurConfigMembership</strong>.
C‚Äôest un objet qui h√©rite de la classe <strong>PvRemplisseurConfigMembership</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZoneWeb1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span> 
<span class="k">public</span> <span class="nv">$NomClasseRemplisseurConfigMembership</span> <span class="o">=</span> <span class="s2">"MonRemplCfgMembership"</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">MonRemplCfgMembership</span> <span class="kd">extends</span> <span class="nc">PvRemplisseurConfigMembership</span>
<span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Pour le personnaliser, veuillez cr√©er une classe h√©ritant de celle-ci et r√©√©crivez les m√©thodes suivantes.</p>

<table>
  <thead>
    <tr>
      <th>Propri√©t√© / M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>RemplitFormulaireGlobalProfil(&amp; $form)</td>
      <td>S‚Äôapplique √† n‚Äôimporte quel formulaire de profil</td>
    </tr>
    <tr>
      <td>RemplitFormulaireGlobalRole(&amp; $form)</td>
      <td>S‚Äôapplique √† n‚Äôimporte quel formulaire de r√¥le</td>
    </tr>
    <tr>
      <td>RemplitFiltresEditionFormMembre(&amp; $form)</td>
      <td>Assigne les filtres d‚Äô√©dition √† n‚Äôimporte quel formulaire de membre.</td>
    </tr>
    <tr>
      <td>InitFormulaireRole(&amp; $form)</td>
      <td>Initialise n‚Äôimporte quel formulaire de r√¥le.</td>
    </tr>
    <tr>
      <td>InitFormulaireProfil(&amp; $form)</td>
      <td>Initialise n‚Äôimporte quel formulaire de profil.</td>
    </tr>
    <tr>
      <td>InitFormulaireMembre(&amp; $form)</td>
      <td>Initialise n‚Äôimporte quel formulaire de membre.</td>
    </tr>
    <tr>
      <td>RemplitFiltresMPFormMembre(&amp; $form)</td>
      <td>Assigne les filtres sur n‚Äôimporte quel formulaire de mot de passe</td>
    </tr>
    <tr>
      <td>RemplitFormulaireGlobalMembre(&amp; $form)</td>
      <td>D√©finit les caract√©ristiques de n‚Äôimporte quel formulaire de profil</td>
    </tr>
    <tr>
      <td>RemplitFormulaireInfosMembre(&amp; $form)</td>
      <td>D√©finit les caract√©ristiques de n‚Äôimporte quel formulaire de membre</td>
    </tr>
    <tr>
      <td>RemplitFormulaireChangeMPMembre(&amp; $form)</td>
      <td>D√©finit les caract√©ristiques de n‚Äôimporte quel formulaire de mot de passe</td>
    </tr>
    <tr>
      <td>InitTableauMembre(&amp; $table)</td>
      <td>Initialise le tableau de donn√©es des membres</td>
    </tr>
    <tr>
      <td>InitTableauProfil(&amp; $table)</td>
      <td>Initialise le tableau de donn√©es des profils</td>
    </tr>
    <tr>
      <td>InitTableauRole(&amp; $table)</td>
      <td>Initialise le tableau de donn√©es des r√¥les</td>
    </tr>
    <tr>
      <td>RemplitFiltresTableauMembre(&amp; $table)</td>
      <td>Assigne les filtres du tableau de donn√©es des membres</td>
    </tr>
    <tr>
      <td>RemplitDefinitionsColonneTableauMembre(&amp; $table)</td>
      <td>Assigne les colonnes de tableau de donn√©es des membres</td>
    </tr>
    <tr>
      <td>RemplitDefinitionColActionsTableauMembre(&amp; $table)</td>
      <td>Assigne les actions du tableau de donn√©es des membres</td>
    </tr>
    <tr>
      <td>RemplitFiltresTableauRole(&amp; $table)</td>
      <td>Assigne les filtres du tableau de donn√©es des r√¥les</td>
    </tr>
    <tr>
      <td>RemplitDefinitionsColonneTableauRole(&amp; $table)</td>
      <td>Assigne les colonnes de tableau de donn√©es des r√¥les</td>
    </tr>
    <tr>
      <td>RemplitDefinitionColActionsTableauRole(&amp; $table)</td>
      <td>Assigne les actions du tableau de donn√©es des r√¥les</td>
    </tr>
    <tr>
      <td>RemplitFiltresTableauProfil(&amp; $table)</td>
      <td>Assigne les filtres du tableau de donn√©es des profils</td>
    </tr>
    <tr>
      <td>RemplitDefinitionsColonneTableauProfil(&amp; $table)</td>
      <td>Assigne les colonnes de tableau de donn√©es des profils</td>
    </tr>
    <tr>
      <td>RemplitDefinitionColActionsTableauProfil(&amp; $table)</td>
      <td>Assigne les actions du tableau de donn√©es des profils</td>
    </tr>
  </tbody>
</table>

<h2 id="scripts-web">Scripts Web</h2>

<p>La zone web contient des scripts, qui renvoient un contenu sp√©cifique en fonction d‚Äôun param√®tre GET (appelleScript par d√©faut).</p>

<p>Les scripts varient le contenu d‚Äôune zone, tout en gardant les m√™mes ent√™tes et pieds de document HTML.</p>

<h3 id="utilisation">Utilisation</h3>

<p>Vous devez d√©clarer chaque script, et r√©√©crire sa m√©thode de rendu.</p>

<p>Ins√©rez les dans la zone, √† partir des m√©thodes <strong>ChargeScripts</strong> ou <strong>ChargeScriptsMembership</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// </span>
<span class="kd">class</span> <span class="nc">MaZoneWeb1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="c1">// Inscription des scripts</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">ChargeScripts</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// Inscrire la page d'accueil</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScriptParDefaut</span><span class="p">(</span><span class="k">new</span> <span class="nc">MonScriptAccueil</span><span class="p">())</span> <span class="p">;</span>
<span class="c1">// Inscrire la page d'a propos</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScript</span><span class="p">(</span><span class="s2">"a_propos"</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MonScriptAPropos</span><span class="p">())</span> <span class="p">;</span>
<span class="c1">// Inscrire la page de contact</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereScript</span><span class="p">(</span><span class="s2">"contact"</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MonScriptContact</span><span class="p">())</span> <span class="p">;</span>
<span class="p">}</span>
<span class="c1">// ...</span>
<span class="p">}</span>
<span class="c1">// D√©claration du script d'accueil</span>
<span class="kd">class</span> <span class="nc">MonScriptAccueil</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="k">return</span> <span class="s2">"&lt;p&gt;Page d'accueil&lt;/p&gt;"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="c1">// D√©claration du script a propos</span>
<span class="kd">class</span> <span class="nc">MonScriptAPropos</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="k">return</span> <span class="s2">"&lt;p&gt;A propos de mon site&lt;/p&gt;"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="c1">// D√©claration du script de contact</span>
<span class="kd">class</span> <span class="nc">MonScriptContact</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="k">return</span> <span class="s2">"&lt;p&gt;Ma page de contact&lt;/p&gt;"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="propri√©t√©s-et-m√©thodes-principales">Propri√©t√©s et M√©thodes principales</h3>

<table>
  <thead>
    <tr>
      <th>Membre</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$IDInstanceCalc</td>
      <td>ID Unique du script parmi les objets cr√©√©s</td>
    </tr>
    <tr>
      <td>$ZoneParent</td>
      <td>Acc√®de √† la zone web contenant le script</td>
    </tr>
    <tr>
      <td>$NomElementZone</td>
      <td>Nom du script dans la zone</td>
    </tr>
    <tr>
      <td>$ApplicationParent</td>
      <td>Acc√®de √† l‚Äôapplication contenant le script</td>
    </tr>
    <tr>
      <td>$TitreDocument</td>
      <td>Titre du document HTML sur le navigateur</td>
    </tr>
    <tr>
      <td>$MotsCleMeta</td>
      <td>Mots cl√©s m√©ta HTML</td>
    </tr>
    <tr>
      <td>$DescriptionMeta</td>
      <td>Description m√©ta HTML</td>
    </tr>
    <tr>
      <td>$ViewportMeta</td>
      <td>Viewport m√©ta HTML</td>
    </tr>
    <tr>
      <td>$Titre</td>
      <td>Titre du script, utilis√© dans le corps du document HTML</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// D√©claration du script</span>
<span class="kd">class</span> <span class="nc">MonScriptAPropos</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$TitreDocument</span> <span class="o">=</span> <span class="s2">"A propos de mon site"</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$Titre</span> <span class="o">=</span> <span class="s2">"A propos"</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$MotsCleMeta</span> <span class="o">=</span> <span class="s2">"A propos, informations, relativement, concernant"</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$DescriptionMeta</span> <span class="o">=</span> <span class="s2">"Trouvez sur cette page des informations sur mon site"</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="restrictions-membership">Restrictions membership</h3>

<p>Vous devez initialiser ces propri√©t√©s dans la d√©claration du script.</p>

<table>
  <thead>
    <tr>
      <th>Membre</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$NecessiteMembreConnecte</td>
      <td>bool</td>
      <td>Indique si le membre doit se connecter pour acc√©der au script</td>
    </tr>
    <tr>
      <td>$Privileges</td>
      <td>array</td>
      <td>Indique au moins un r√¥le que le membre doit poss√©der pour acc√©der au script</td>
    </tr>
    <tr>
      <td>$PrivilegesStricts</td>
      <td>bool</td>
      <td>Refuse l‚Äôacc√®s au script si le membre ne poss√©de pas un des privili√®ges. Les super administrateurs n‚Äôacc√©deront pas s‚Äôils n‚Äôont pas un des r√¥les n√©c√©ssaires.</td>
    </tr>
    <tr>
      <td>$AnnulDetectMemberCnx</td>
      <td>bool</td>
      <td>Annule la d√©tection du membre connect√©</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// D√©claration du script</span>
<span class="kd">class</span> <span class="nc">MonScriptModifArticle</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$NecessiteMembreConnecte</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$Privileges</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"edit_article"</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Si vous avez besoin de faire plus de contr√¥le, r√©ecrivez leur m√©thode <strong>EstAccessible()</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// D√©claration du script</span>
<span class="kd">class</span> <span class="nc">MonScriptDetailArticle</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">EstAccessible</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ok</span> <span class="o">=</span> <span class="k">parent</span><span class="o">::</span><span class="nf">EstAccessible</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// S'arr√™ter si l'acc√®s est d√©j√† refus√©</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="nv">$ok</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">return</span> <span class="kc">false</span> <span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Proc√©der √† nos contr√¥les :</span>
<span class="c1">// S'assurer que le script contient un param√®tre "id"</span>
<span class="c1">// sup√©rieur √† 0</span>
<span class="k">return</span> <span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s2">"id"</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s2">"id"</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">"&lt;p&gt;Article N&amp;deg; '.intval(</span><span class="nv">$_GET["id"]</span><span class="s2">).'&lt;/p&gt;"</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="environnement-du-script">Environnement du script</h3>

<p>Le script poss√®de la m√©thode <strong>DetermineEnvironnement</strong>(), pour d√©finir les variables n√©cessaires au rendu.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// D√©claration du script</span>
<span class="kd">class</span> <span class="nc">MonScriptDetailArticle</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$bd</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MaBD</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">ParamId</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s2">"id"</span><span class="p">])</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">LgnPrinc</span> <span class="o">=</span> <span class="nv">$bd</span><span class="o">-&gt;</span><span class="nf">FetchSqlRow</span><span class="p">(</span><span class="s1">'select * from article where id=:id'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s2">"id"</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">ParamId</span><span class="p">))</span> <span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">LgnPrinc</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
<span class="c1">// D√©finir les ent√™tes HTML √† partir des variables environnement</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">TitreDocument</span> <span class="o">=</span> <span class="s2">"Article "</span><span class="mf">.</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">LgnPrinc</span><span class="p">[</span><span class="s2">"titre"</span><span class="p">])</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Titre</span> <span class="o">=</span> <span class="s2">"Infos article "</span><span class="mf">.</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">LgnPrinc</span><span class="p">[</span><span class="s2">"titre"</span><span class="p">])</span> <span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Ins√©rer du CSS uniquement sur ce script</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">ZoneParent</span><span class="o">-&gt;</span><span class="nf">InsereContenuCSS</span><span class="p">(</span><span class="s2">"h1 { color: red ; }"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Ins√©rer du Javascript uniquement sur ce script</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">ZoneParent</span><span class="o">-&gt;</span><span class="nf">InsereContenuJs</span><span class="p">(</span><span class="s2">"function test1() { alert("</span><span class="no">OK</span><span class="s2">") ; }"</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">"&lt;p&gt;ID : "</span><span class="mf">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">LgnPrinc</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span><span class="mf">.</span><span class="s2">"&lt;/p&gt;"</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">"&lt;p&gt;Titre : "</span><span class="mf">.</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">LgnPrinc</span><span class="p">[</span><span class="s2">"titre"</span><span class="p">])</span><span class="mf">.</span><span class="s2">"&lt;/p&gt;"</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">"&lt;p&gt;PU : "</span><span class="mf">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">LgnPrinc</span><span class="p">[</span><span class="s2">"PU"</span><span class="p">]</span><span class="mf">.</span><span class="s2">" Eur.&lt;/p&gt;"</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="gestion-du-rendu">Gestion du rendu</h3>

<p>Pour le rendu, voici les membres principaux de la classe script :</p>

<table>
  <thead>
    <tr>
      <th>Membre</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$InclureRenduTitre</td>
      <td>bool</td>
      <td>Confirme ou Annule le rendu du titre pour le script en cours</td>
    </tr>
    <tr>
      <td>$InclureRenduDescription</td>
      <td>bool</td>
      <td>Confirme ou Annule le rendu du titre pour le script en cours</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// D√©claration du script</span>
<span class="kd">class</span> <span class="nc">MonScriptDetailArticle</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$InclureRenduTitre</span> <span class="o">=</span> <span class="kc">false</span> <span class="p">;</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">"Ce script sera affich√© sans titre"</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Vous pouvez r√©ecrire certaines m√©thodes pour personnaliser le rendu :</p>

<table>
  <thead>
    <tr>
      <th>Membre</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>RenduChemin()</td>
      <td>string</td>
      <td>Contenu HTML de l‚Äôarborescence du script</td>
    </tr>
    <tr>
      <td>RenduTitre()</td>
      <td>string</td>
      <td>Contenu HTML sp√©cifique du script</td>
    </tr>
    <tr>
      <td>RenduDescription()</td>
      <td>string</td>
      <td>Contenu HTML sp√©cifique du script</td>
    </tr>
    <tr>
      <td>RenduSpecifique()</td>
      <td>string</td>
      <td>Contenu HTML sp√©cifique du script</td>
    </tr>
    <tr>
      <td>RenduDispositifBrut()</td>
      <td>string</td>
      <td>Contenu HTML brut du script. Par d√©faut, cette m√©thode appelle les m√©thodes RenduChemin(), RenduTitre(), RenduDescription(), RenduSpecifique().</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// D√©claration du script</span>
<span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduTitre</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">"&lt;h1&gt;Ma page web&lt;/h1&gt;"</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">"Ce script sera affich√© avec un titre tr√®s grand !"</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="impression">Impression</h3>

<p>Pour rendre une page imprimable, d√©clarez sa propri√©t√© <em>$Imprimable</em> √† 1.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$Imprimable</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Lors du rendu, le lien d‚Äôimpression est disponible dans l‚Äôaction web <strong>$ActionImprime</strong>.</p>

<p>Utilisez √©galement la m√©thode <strong>ImpressionEnCours()</strong> pour masquer les contenus √† l‚Äôimpression.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$Imprimable</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s1">'&lt;p&gt;Voici un script imprimable&lt;/p&gt;'</span> <span class="p">;</span>
<span class="c1">// Afficher le bouton si la page n'est pas en mode impression</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">ImpressionEnCours</span><span class="p">())</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s1">'&lt;p&gt;&lt;a href="'</span><span class="mf">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">ActionImprime</span><span class="o">-&gt;</span><span class="nf">ObtientUrl</span><span class="p">()</span><span class="mf">.</span><span class="s1">'"&gt;Imprimer&lt;/a&gt;&lt;/p&gt;'</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Personnalisez ainsi les styles d‚Äôimpression dans <strong>DetermineEnvironnement()</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$Imprimable</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// Mettre une taille de police 12px pendant l'impression</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">ImpressionEnCours</span><span class="p">())</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">ZoneParent</span><span class="o">-&gt;</span><span class="nf">InsereContenuCSS</span><span class="p">(</span><span class="s2">"body {
font-size:12px ;
}"</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="documents-web">Documents Web</h2>

<p>Un document web personnalise l‚Äôaffichage complet de chaque script.
Dans la zone, il est utile :</p>
<ul>
  <li>pour les scripts √† imprimer</li>
  <li>pour les scripts qui s‚Äôafficheront dans une bo√Æte de dialogue</li>
</ul>

<h3 id="d√©claration">D√©claration</h3>

<p>Chaque document web h√©rite de la classe <strong>PvDocumentWebHtml</strong>.</p>

<p>Veuillez r√©ecrire les m√©thodes <strong>PrepareRendu(&amp; $zone)</strong>, <strong>RenduEntete(&amp; $zone)</strong> et <strong>RenduPied(&amp; $zone)</strong>.
Vous pouvez manipuler le script s√©lectionn√© avec <strong>$zone-&gt;ScriptPourRendu</strong></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonDocumentWeb1</span> <span class="kd">extends</span> <span class="nc">PvDocumentWebHtml</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">PrepareRendu</span><span class="p">(</span><span class="o">&amp;</span> <span class="nv">$zone</span><span class="p">)</span>
<span class="p">{</span>
<span class="c1">// Garder la pr√©paration du document web html</span>
<span class="k">parent</span><span class="o">::</span><span class="nf">PrepareRendu</span><span class="p">(</span><span class="nv">$zone</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Inclure des librairies CSS du document</span>
<span class="nv">$zone</span><span class="o">-&gt;</span><span class="nf">InsereLienCSS</span><span class="p">(</span><span class="s2">"css/style.css"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Inclure des librairies Js du document</span>
<span class="nv">$zone</span><span class="o">-&gt;</span><span class="nf">InsereLienJs</span><span class="p">(</span><span class="s2">"js/main.js"</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduEntete</span><span class="p">(</span><span class="o">&amp;</span> <span class="nv">$zone</span><span class="p">)</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="c1">// Retourne le contenu HTML jusqu'au tag body</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="k">parent</span><span class="o">::</span><span class="nf">RenduEntete</span><span class="p">(</span><span class="nv">$zone</span><span class="p">)</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span> 
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduPied</span><span class="p">(</span><span class="o">&amp;</span> <span class="nv">$zone</span><span class="p">)</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="c1">// Retourne le contenu HTML √† partir de la fin du tag body</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="k">parent</span><span class="o">::</span><span class="nf">RenduPied</span><span class="p">(</span><span class="nv">$zone</span><span class="p">)</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

<h3 id="int√©gration-dans-la-zone-web">Int√©gration dans la zone web</h3>

<p>D‚Äôabord, vous devez mettre la propri√©t√© <strong>UtiliserDocumentWeb</strong> √† 1.
Ensuite, d√©clarez chaque document dans la m√©thode <strong>ChargeConfig()</strong> de la zone web.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZoneWeb</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$UtiliserDocumentWeb</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">ChargeConfig</span><span class="p">()</span>
<span class="p">{</span>
<span class="k">Parent</span><span class="o">::</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Le 1er document web cr√©√© est utilis√© pour</span>
<span class="c1">// tous les scripts</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">DocumentsWeb</span><span class="p">[</span><span class="s2">"defaut"</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MonDocumentWeb1</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">DocumentsWeb</span><span class="p">[</span><span class="s2">"impression"</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MonDocumentWeb2</span><span class="p">()</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Le 1er document web d√©clar√© sera utilis√© par d√©faut pour tous les scripts. Dans le cas ci-dessus, c‚Äôest le document web ‚Äúdefaut‚Äù.</p>

<h3 id="affectation-√†-un-script">Affectation √† un script</h3>

<p>Pour d√©finir le document web du script, renseignez la propri√©t√© <strong>NomDocumentWeb</strong> du script.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScriptWeb3</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="c1">// ‚Ä¶</span>
<span class="k">public</span> <span class="nv">$NomDocumentWeb</span> <span class="o">=</span> <span class="s2">"impression"</span> <span class="p">;</span>
<span class="c1">// ‚Ä¶</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="actions-web">Actions Web</h2>

<h3 id="d√©finition">D√©finition</h3>

<p>Une Action Web est un ensemble d‚Äôinstructions qui s‚Äôex√©cute dans la Zone Web. Elle ne se limite pas √† afficher un contenu HTML, comme les scripts web.
Elle peut √©galement :</p>
<ul>
  <li>d√©clencher le t√©l√©chargement d‚Äôun fichier</li>
  <li>renvoyer un fichier RSS, JS ou CSS</li>
  <li>renvoyer une r√©ponse JSON</li>
  <li>ex√©cuter un code pr√©cis, avant d‚Äôafficher le script web</li>
</ul>

<h3 id="d√©claration-1">D√©claration</h3>

<p>Vous pouvez d√©clarer les actions dans plusieurs m√©thodes :</p>

<table>
  <thead>
    <tr>
      <th>Objet</th>
      <th>M√©thode	Contexte</th>
      <th>Description</th>
      <th>¬†</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Zone web</td>
      <td>InsereActionPrinc($nom, $action)</td>
      <td>Utiliser dans la m√©thode <strong>ChargeConfig()</strong></td>
      <td>Les actions principales s‚Äôex√©cutent avant d‚Äôex√©cuter le script en cours</td>
    </tr>
    <tr>
      <td>Zone web</td>
      <td>InsereActionAvantRendu($nom, $action)</td>
      <td>Utiliser dans la m√©thode <strong>ChargeConfig()</strong>.</td>
      <td>S‚Äôex√©cutent avant d‚Äôafficher le script en cours</td>
    </tr>
    <tr>
      <td>Script web</td>
      <td>InsereActionAvantRendu($nom, $action)</td>
      <td>Utiliser dans la m√©thode <strong>DetermineEnvironnement()</strong></td>
      <td>D√©clare l‚Äôaction uniquement lorsque le script doit √™tre affich√©. Le nom de l‚Äôaction sera bas√© sur l‚ÄôID Instance du script et le nom de l‚Äôaction.</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereActionAvantRendu</span><span class="p">(</span><span class="s2">"action1"</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MonAction1</span><span class="p">())</span> <span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">MonAction1</span> <span class="kd">extends</span> <span class="nc">PvActionWeb</span>
<span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<p>La zone web ex√©cute une action web √† partir du param√®tre GET <strong>appelleAction</strong>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?appelleScript=script1&amp;appelleAction=action1
</code></pre></div></div>

<h3 id="types-daction">Types d‚Äôaction</h3>

<table>
  <thead>
    <tr>
      <th>Classe</th>
      <th>Description</th>
      <th>Utilisation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PvActionBaseZoneWebSimple / PvActionWeb</td>
      <td>Classe de base</td>
      <td>R√©√©crire la m√©thode <strong>Execute()</strong></td>
    </tr>
    <tr>
      <td>PvActionNotificationWeb</td>
      <td>Ex√©cute des instructions et garde le r√©sultat (succ√®s/echec et message d‚Äôex√©cution)</td>
      <td>R√©√©crire la m√©thode <strong>Execute()</strong></td>
    </tr>
    <tr>
      <td>PvActionResultatJSONZoneWeb / PvActionEnvoiJSON</td>
      <td>Affiche un contenu JSON dans le navigateur</td>
      <td>R√©√©crire la m√©thode <strong>Execute()</strong>. A l‚Äôint√©rieur, d√©finissez la propri√©t√© Resultat. Cette propri√©t√© sera le retour JSON.</td>
    </tr>
    <tr>
      <td>PvActionTelechargFichier</td>
      <td>D√©marre le t√©l√©chargement du fichier</td>
      <td>R√©√©crire la m√©thode <strong>Execute()</strong></td>
    </tr>
  </tbody>
</table>

<h4 id="utilisation-pvactionnotificationweb">Utilisation PvActionNotificationWeb</h4>

<p>Vous devez r√©√©crire la m√©thode <strong>Execute()</strong>. A l‚Äôint√©rieur, utiliser ces m√©thodes pour d√©finir le r√©sultat :</p>
<ul>
  <li><strong>ConfirmeSucces($msg)</strong></li>
  <li><strong>RenseigneErreur($msg)</strong>
Dans le script ou la zone, utilisez la propri√©t√© <strong>TypeErreur</strong> et m√©thode <strong>ObtientMessage()</strong> de l‚Äôinstance Action pour afficher le r√©sultat. Pour tester si l‚Äôaction a ramen√© un r√©sultat, utilisez la m√©thode <strong>PossedeMessage()</strong></li>
</ul>

<h4 id="utilisation-pvactiontelechargfichier">Utilisation PvActionTelechargFichier</h4>

<p>Renseignez la propri√©t√© <strong>NomFichierAttache</strong> dans la fonction <strong>DetermineFichierAttache</strong> pour d√©finir le nom du fichier t√©l√©charg√©.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonAction1</span> <span class="kd">extends</span> <span class="nc">PvActionTelechargFichier</span>
<span class="p">{</span>
<span class="k">protected</span> <span class="k">function</span> <span class="n">DetermineFichierAttache</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">NomFichierAttache</span> <span class="o">=</span> <span class="s2">"resultats.txt"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>R√©√©crivez la m√©thode <strong>AfficheContenu</strong> pour envoyez le contenu du fichier. A l‚Äôint√©rieur, utilisez les fonctions PHP <strong>echo</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonAction1</span> <span class="kd">extends</span> <span class="nc">PvActionTelechargFichier</span>
<span class="p">{</span>
<span class="k">protected</span> <span class="k">function</span> <span class="n">AfficheContenu</span><span class="p">()</span>
<span class="p">{</span>
<span class="k">echo</span> <span class="s2">"texte √† afficher..."</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<ul>
  <li>Si le fichier existe d√©j√†, utilisez <strong>CheminFichierSource</strong> pour le charger.</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonAction1</span> <span class="kd">extends</span> <span class="nc">PvActionTelechargFichier</span>
<span class="p">{</span>
<span class="k">protected</span> <span class="k">function</span> <span class="n">DetermineFichierAttache</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">NomFichierAttache</span> <span class="o">=</span> <span class="s2">"resultats.txt"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">CheminFichierSource</span> <span class="o">=</span> <span class="nb">dirname</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">)</span><span class="mf">.</span><span class="s2">"/mondossier/resultats.txt"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>Si vous voulez renseigner des ent√™tes sp√©cifiques, r√©√©crivez la m√©thode <strong>AfficheEntetes</strong></li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonAction1</span> <span class="kd">extends</span> <span class="nc">PvActionTelechargFichier</span>
<span class="p">{</span>
<span class="k">protected</span> <span class="k">function</span> <span class="n">AfficheEntetes</span><span class="p">()</span>
<span class="p">{</span>
<span class="nb">Header</span><span class="p">(</span><span class="s2">"HTTP/1.1 404 Not found"</span><span class="p">)</span> <span class="p">;</span>
<span class="nb">Header</span><span class="p">(</span><span class="s2">"MonEntete1"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="utilisation-pvactionredirigefichier">Utilisation PvActionRedirigeFichier</h3>

<p>Cette action redirige vers un fichier. Si vous avez des probl√®mes d‚Äôencodage avec l‚Äôaction <strong>PvActionTelechargFichier</strong>, utilisez cette classe.</p>

<p>Renseignez la propri√©t√© <strong>CheminFichierSource</strong> dans la fonction <strong>DetermineFichierSource</strong> pour le chemin du fichier √† atteindre.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonAction1</span> <span class="kd">extends</span> <span class="nc">PvActionTelechargFichier</span>
<span class="p">{</span>
<span class="k">protected</span> <span class="k">function</span> <span class="n">DetermineFichierSource</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">CheminFichierSource</span> <span class="o">=</span> <span class="s2">"files/resultats.txt"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="les-filtres-de-donn√©es-http">Les filtres de donn√©es http</h2>

<h3 id="pr√©sentation-1">Pr√©sentation</h3>

<p>Ils sont surtout utilis√©s dans les formulaires et les tableaux de donn√©es.
Ils vous proposent des champs de saisie, qui seront soumis apr√®s validation.</p>

<h3 id="propri√©t√©s-et-m√©thodes-principales-1">Propri√©t√©s et M√©thodes principales</h3>

<table>
  <thead>
    <tr>
      <th>Propri√©t√© / M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$Libelle</td>
      <td>Libell√©</td>
    </tr>
    <tr>
      <td>$EstEtiquette</td>
      <td>Si la valeur est 1, le filtre affichera la valeur au lieu du champ de saisie.</td>
    </tr>
    <tr>
      <td>$ValeurVide</td>
      <td>Valeur NULLE du filtre.</td>
    </tr>
    <tr>
      <td>$ValeurParDefaut</td>
      <td>Valeur par d√©faut</td>
    </tr>
    <tr>
      <td>$NePasLierParametre</td>
      <td>Renvoie toujours la valeur par d√©faut du filtre.</td>
    </tr>
    <tr>
      <td>$NomParametreLie</td>
      <td>Nom du param√®tre soumis par http</td>
    </tr>
    <tr>
      <td>$NePasLireColonne</td>
      <td>N‚Äôutilise pas la valeur de la colonne li√©e sur le param√®tre. Utilis√©e dans les formulaires de donn√©es.</td>
    </tr>
    <tr>
      <td>$AliasParametreDonnees</td>
      <td>Expression pour decoder la valeur de la colonne li√©e. Ex. UNHEX(&lt;self&gt;)</td>
    </tr>
    <tr>
      <td>$ExpressionDonnees</td>
      <td>Condition SQL lorsque le filtre est utilis√© dans une recherche. Ex : MON_CHAMP = &lt;self&gt;</td>
    </tr>
    <tr>
      <td>$NomColonneLiee</td>
      <td>Nom de la colonne dans la table, pour un filtre d‚Äô√©dition</td>
    </tr>
    <tr>
      <td>$ExpressionColonneLiee</td>
      <td>Expression de la colonne dans la table, pour un filtre d‚Äô√©dition. Ex. HEX(&lt;self&gt;)</td>
    </tr>
    <tr>
      <td>$LectureSeule</td>
      <td>Passer la valeur par d√©faut du filtre de donn√©es, et la soumettre dans le formulaire.</td>
    </tr>
    <tr>
      <td>$Invisible</td>
      <td>Le filtre ne sera pas affich√© sur la page. Il renvoie toujours sa valeur par d√©faut</td>
    </tr>
    <tr>
      <td>$NePasIntegrerParametre</td>
      <td>Emp√™che le formulaire de donn√©es d‚Äôutiliser ce filtre pour la recherche.</td>
    </tr>
    <tr>
      <td>Lie()</td>
      <td>D√©finit la valeur soumise √† partir du formulaire. Elle est utilis√©e apr√®s clic sur une commande de formulaire donn√©e ou le bouton ¬´ Rechercher ¬ª du tableau de donn√©es</td>
    </tr>
    <tr>
      <td>$DejaLie</td>
      <td>Signale si le filtre a √©t√© li√© auparavant.</td>
    </tr>
    <tr>
      <td>$ValeurParametre</td>
      <td>Valeur li√©e. Utilisez plut√¥t la m√©thode Lie().</td>
    </tr>
    <tr>
      <td>$Role</td>
      <td>Type du filtre de donn√©es.</td>
    </tr>
    <tr>
      <td>$TypeLiaisonParametre</td>
      <td>Contient la valeur ‚Äúget‚Äù, valeur issue de $_GET ou ‚Äúpost‚Äù, valeur issue de $_POST</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$flt</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"champ1"</span><span class="p">,</span> <span class="s2">"champ1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$flt</span><span class="o">-&gt;</span><span class="nc">AliasParametreDonnees</span> <span class="o">=</span> <span class="s2">"BASE64_DECODE(UNHEX(&lt;self&gt;))"</span> <span class="p">;</span>
<span class="nv">$flt</span><span class="o">-&gt;</span><span class="nc">ExpressionColonneLiee</span> <span class="o">=</span> <span class="s2">"HEX(BASE64_ENCODE(&lt;self&gt;))"</span> <span class="p">;</span>
</code></pre></div></div>

<h3 id="correcteur-de-valeur">Correcteur de valeur</h3>

<p>C‚Äôest une propri√©t√© qui encode/d√©code la valeur brute d‚Äôun filtre.
Vous devez √©tendre la classe <strong>PvCorrecteurValeurFiltreBase</strong> et r√©√©crire les m√©thodes cl√©es.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonCorrectValFiltre1</span> <span class="kd">extends</span> <span class="nc">PvCorrecteurValeurFiltreBase</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">Applique</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">,</span> <span class="o">&amp;</span> <span class="nv">$filtre</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">return</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// ...</span>
<span class="nv">$form</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFormulaireDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="nv">$flt1</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"flt1"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$flt1</span><span class="o">-&gt;</span><span class="nc">CorrecteurValeur</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MonCorrectValFiltre1</span><span class="p">()</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Il existe des correcteurs de valeurs d√©j√† d√©clar√©s.</p>

<table>
  <thead>
    <tr>
      <th>Classe</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PvCorrecteurValeurFiltreBase</td>
      <td>Correcteur de valeur par d√©faut</td>
    </tr>
    <tr>
      <td>PvCorrecteurValeurSansAccent</td>
      <td>Enl√®ve tous les caract√®res sp√©ciaux.</td>
    </tr>
  </tbody>
</table>

<h3 id="composant-de-filtre">Composant de filtre</h3>

<h4 id="pr√©sentation-2">Pr√©sentation</h4>

<p>Le composant de filtre de donn√©es est le champ de saisie. Vous le d√©finissez ainsi :</p>

<table>
  <thead>
    <tr>
      <th>M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>DeclareComposant($nomClasseComposant)</td>
      <td>D√©finit le composant √† partir du nom de la classe</td>
    </tr>
    <tr>
      <td>RemplaceComposant($composant)</td>
      <td>D√©finit le composant √† partir de l‚Äôinstance</td>
    </tr>
  </tbody>
</table>

<p>Exemple :</p>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$flt1</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"monchamp"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Le composant est dans la variable $comp1</span>
<span class="nv">$comp1</span> <span class="o">=</span> <span class="nv">$flt1</span><span class="o">-&gt;</span><span class="nf">DeclareComposant</span><span class="p">(</span><span class="s2">"PvZoneMultiligneHtml"</span><span class="p">)</span> <span class="p">;</span>
</code></pre></div></div>

<h4 id="composants-el√©ments-html">Composants El√©ments HTML</h4>

<table>
  <thead>
    <tr>
      <th>Classe</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PvZoneTexteHtml</td>
      <td>Composant par d√©faut affect√©e au filtre. Affiche un champ INPUT</td>
    </tr>
    <tr>
      <td>PvZoneMultiligneHtml</td>
      <td>Affiche un champ TEXTAREA</td>
    </tr>
    <tr>
      <td>PvZoneMotPasseHtml</td>
      <td>Affiche un champ PASSWORD</td>
    </tr>
    <tr>
      <td>PvZoneEtiquetteHtml</td>
      <td>Affiche un champ en lecture seule.</td>
    </tr>
  </tbody>
</table>

<h4 id="composants-de-liste">Composants de liste</h4>

<p>Les composants de liste utilisent un fournisseur de donn√©es pour leur rendu.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$comp1</span> <span class="o">=</span> <span class="nv">$flt1</span><span class="o">-&gt;</span><span class="nf">DeclareComposant</span><span class="p">(</span><span class="s2">"PvZoneSelectHtml"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// D√©finition du fournisseur de donn√©es</span>
<span class="nv">$comp1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFournisseurDonneesSql</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$comp1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">BaseDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MaBD1</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$comp1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">RequeteSelection</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="c1">// D√©finition des valeur</span>
<span class="nv">$comp1</span><span class="o">-&gt;</span><span class="nc">NomColonneValeur</span> <span class="o">=</span> <span class="s2">"id"</span> <span class="p">;</span>
<span class="nv">$comp1</span><span class="o">-&gt;</span><span class="nc">NomColonneLibelle</span> <span class="o">=</span> <span class="s2">"monchamp1"</span> <span class="p">;</span>
<span class="c1">// Afficher une valeur par defaut s'il n'y a aucune valeur</span>
<span class="nv">$comp1</span><span class="o">-&gt;</span><span class="nc">InclureElementHorsLigne</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="nv">$comp1</span><span class="o">-&gt;</span><span class="nc">ValeurElementHorsLigne</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">;</span> 
<span class="nv">$comp1</span><span class="o">-&gt;</span><span class="nc">LibelleElementHorsLigne</span> <span class="o">=</span> <span class="s2">" ‚Äì Aucun --"</span> <span class="p">;</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Classe</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PvZoneBoiteSelectHtml</td>
      <td>Affiche une zone SELECT</td>
    </tr>
    <tr>
      <td>PvZoneBoiteOptionsRadioHtml</td>
      <td>Affiche une zone de plusieurs options RADIO √† cocher.</td>
    </tr>
    <tr>
      <td>PvZoneBoiteOptionsCocherHtml</td>
      <td>Affiche une zone de plusieurs options CHECKBOX √† cocher. Pour r√©cup√©rer toutes les valeurs coch√©es, utilisez la propri√©t√© $ValeurBrute du filtre.</td>
    </tr>
    <tr>
      <td>PvZoneCadreOptionsRadioHtml</td>
      <td>Affiche une zone de plusieurs options RADIO √† cocher, qui sont dans un IFRAME HTML</td>
    </tr>
  </tbody>
</table>

<h3 id="formatage-de-libell√©">Formatage de libell√©</h3>
<p>Si le filtre de donn√©es est en √©tiquette, son champ de saisie ne sera pas √©ditable.
Pour personnaliser ce rendu, utilisez la m√©thode <strong>DefinitFmtLbl</strong>. Etendez la classe <strong>PvFmtLblBase</strong> et r√©√©crivez sa m√©thode <strong>Rendu($valeur, &amp; $composant)</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonFmtLbl1</span> <span class="kd">extends</span> <span class="nc">PvFmtLblBase</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">Rendu</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">,</span> <span class="o">&amp;</span> <span class="nv">$composant</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">return</span> <span class="nb">base64_decode</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Ensuite, affectez ce format au composant avec la m√©thode <strong>DefinitFmtLbl()</strong> du filtre. Vous devez d√©clarer le composant avant d‚Äôutiliser cette m√©thode.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$comp</span> <span class="o">=</span> <span class="nv">$flt1</span><span class="o">-&gt;</span><span class="nf">DeclareComposant</span><span class="p">(</span><span class="s2">"PvZoneTexteHtml"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// ‚Ä¶</span>
<span class="nv">$flt1</span><span class="o">-&gt;</span><span class="nf">DefinitFmtLbl</span><span class="p">(</span><span class="k">new</span> <span class="nc">MonFmtLbl1</span><span class="p">())</span> <span class="p">;</span>
</code></pre></div></div>

<p>Voici des formats d√©j√† d√©finis :</p>

<table>
  <thead>
    <tr>
      <th>Classe</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PvFmtLblBase</td>
      <td>Classe de base.</td>
    </tr>
    <tr>
      <td>PvFmtLblWeb</td>
      <td>Classe affect√©e par d√©faut</td>
    </tr>
    <tr>
      <td>PvFmtLblDateFr</td>
      <td>Affiche au format date fran√ßais</td>
    </tr>
    <tr>
      <td>PvFmtLblDateTimeFr</td>
      <td>Affiche au format date et heure fran√ßais</td>
    </tr>
    <tr>
      <td>PvFmtMonnaie</td>
      <td>Affiche au format mon√©taire</td>
    </tr>
  </tbody>
</table>

<h3 id="le-filtre-de-donn√©es-upload">Le filtre de donn√©es Upload</h3>

<p>Le filtre de donn√©es Upload t√©l√©charge un fichier.</p>

<h4 id="propri√©t√©s--m√©thodes-principales">Propri√©t√©s / M√©thodes principales</h4>

<table>
  <thead>
    <tr>
      <th>Propri√©t√© / M√©thodes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$NettoyerCaractsFichier</td>
      <td>Enl√®ve les caract√®res sp√©ciaux du nom fichier t√©l√©charg√©.</td>
    </tr>
    <tr>
      <td>$ExtensionsAcceptees</td>
      <td>Tableau contenant les extensions uniquement accept√©es. Si le fichier soumis n‚Äôa pas une extension, il ne sera pas copi√© dans le r√©pertoire</td>
    </tr>
    <tr>
      <td>$ExtensionsRejetees</td>
      <td>Tableau contenant les extensions √† rejeter syst√©matiquement.</td>
    </tr>
    <tr>
      <td>$FormatFichierTelech</td>
      <td>Format du nom de fichier t√©l√©charg√©.</td>
    </tr>
    <tr>
      <td>$SourceTelechargement</td>
      <td>Contient les valeurs ‚Äúpost‚Äù si aucun fichier n‚Äôest soumis ou ‚Äúfiles‚Äù si un fichier a √©t√© soumis.</td>
    </tr>
    <tr>
      <td>$InfosTelechargement</td>
      <td>Contient les d√©tails du fichier t√©l√©charg√©.</td>
    </tr>
    <tr>
      <td>$ToujoursRenseignerFichier</td>
      <td>Renvoie une erreur dans le formulaire de donn√©es, si aucun fichier n‚Äôest soumis.</td>
    </tr>
  </tbody>
</table>

<h4 id="variables-format-de-fichier-t√©l√©charg√©">Variables Format de fichier t√©l√©charg√©</h4>

<p>Les variables disponibles sont :</p>
<ul>
  <li><strong>Cle</strong> : Identifiant Unique</li>
  <li><strong>NombreAleatoire</strong> : Nombre compris entre 1 et 10000</li>
  <li><strong>NomFichier</strong> : Nom d‚Äôorigine du fichier</li>
  <li><strong>Timestamp</strong> : Timestamp actuel</li>
  <li><strong>Date</strong> : Date au format YmdHis</li>
</ul>

<p>Ex : ‚ÄúBon-Commande-${Cle}‚Äù</p>

<h4 id="caract√©ristiques-du-composant">Caract√©ristiques du Composant</h4>

<p>Le composant par d√©faut de ce filtre est le composant <strong>PvZoneUploadHtml</strong>.
Ses propri√©t√©s principales sont :</p>

<table>
  <thead>
    <tr>
      <th>Propri√©t√©</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$InclureErreurTelecharg</td>
      <td>Afficher l‚Äôerreur survenue lors du t√©l√©chargement</td>
    </tr>
    <tr>
      <td>$InclureCheminCoteServeur</td>
      <td>Afficher le chemin relatif du fichier t√©l√©charg√©</td>
    </tr>
    <tr>
      <td>$InclureZoneSelectFichier</td>
      <td>Afficher les informations sur le fichier t√©l√©charg√©</td>
    </tr>
    <tr>
      <td>$CheminCoteServeurEditable</td>
      <td>Autoriser la modification du chemin relatif sur le serveur</td>
    </tr>
    <tr>
      <td>$InclureApercu</td>
      <td>D√©finit l‚Äôaffichage de l‚Äôaper√ßu.</td>
    </tr>
    <tr>
      <td>$LargeurCadreApercu</td>
      <td>Largeur HTML du cadre d‚Äôaper√ßu</td>
    </tr>
    <tr>
      <td>$HauteurCadreApercu</td>
      <td>Hauteur HTML du cadre d‚Äôaper√ßu.</td>
    </tr>
  </tbody>
</table>

<h4 id="valeurs-inclure-aper√ßu">Valeurs Inclure Aper√ßu</h4>

<p>Valeurs possibles :</p>
<ul>
  <li>0 : Ne pas autoriser d‚Äôaper√ßu</li>
  <li>1 : Affiche un lien pour afficher dans le navigateur</li>
  <li>2 : Afficher le fichier dans un cadre, si c‚Äôest possible</li>
</ul>

<h2 id="t√¢ches-web">T√¢ches Web</h2>

<h3 id="d√©finition-1">D√©finition</h3>

<p>Une t√¢che web est une t√¢che planifi√©e, qui ex√©cute des instructions.
La t√¢che d√©marre automatiquement quand vous affichez n‚Äôimporte script de la zone web, une fois son d√©lai d‚Äôattente d√©pass√©.
Elle s‚Äôex√©cute dans un autre processus http que celui du script.</p>

<h3 id="d√©claration-2">D√©claration</h3>

<p>Veuillez cr√©er votre t√¢che √† partir de la classe <strong>PvTacheWebBaseSimple</strong>. D√©finissez la propri√©t√© ¬´ <strong>DelaiExecution</strong> ¬ª (en heure) et r√©√©crivez la m√©thode <strong>ExecuteInstructions()</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaTacheWeb1</span> <span class="kd">extends</span> <span class="nc">PvTacheWebBaseSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$DelaiExecution</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="p">;</span> <span class="c1">// S'ex√©cute apr√®s 180 secondes</span>
<span class="k">protected</span> <span class="k">function</span> <span class="n">ExecuteInstructions</span><span class="p">()</span>
<span class="p">{</span>
<span class="k">Echo</span> <span class="s2">"OK, ma tache est executee"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Les membres utiles dans la m√©thode <strong>ExecuteInstructions()</strong> sont :</p>
<ul>
  <li><strong>ApplicationParent</strong> : Renvoie l‚ÄôApplication</li>
  <li><strong>ZoneParent</strong> : Renvoie la zone contenant la t√¢che web</li>
</ul>

<h3 id="le-gestionnaire-de-t√¢ches-web">Le gestionnaire de t√¢ches web</h3>

<p>La zone web poss√®de un gestionnaire de t√¢ches web, dont les r√¥les sont :</p>
<ul>
  <li>Contenir les t√¢ches web</li>
  <li>D√©finir l‚Äôemplacement de sauvegardes des √©tats de chaque t√¢che (en cours, termin√©, date d‚Äôex√©cution, ‚Ä¶)</li>
</ul>

<p>Pour personnaliser le gestionnaire de t√¢ches web, veuillez r√©√©crire la m√©thode <strong>ChargeGestTachesWeb()</strong>.</p>

<p>La propri√©t√© <strong>GestTachesWeb</strong> repr√©sente le gestionnaire de t√¢ches. Ses membres et m√©thodes utiles sont :</p>

<table>
  <thead>
    <tr>
      <th>Propri√©t√©/M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>NomDossierTaches</td>
      <td>Chemin du r√©pertoire contenant l‚Äô√©tat de chaque t√¢che web. Le chemin est relatif au chemin du fichier PHP de la zone web.</td>
    </tr>
    <tr>
      <td>InsereTacheWeb($nom, $tache)</td>
      <td>Inscrit la t√¢che programm√©e dans la zone web</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MaZoneWeb1</span> <span class="kd">extends</span> <span class="nc">PvZoneWebSimple</span>
<span class="p">{</span>
<span class="c1">// ...</span>
<span class="k">protected</span> <span class="k">function</span> <span class="n">ChargeGestTachesWeb</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">GestTachesWeb</span><span class="o">-&gt;</span><span class="nc">NomDossierTaches</span> <span class="o">=</span> <span class="s2">"taches/data"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">InsereTacheWeb</span><span class="p">(</span><span class="s1">'tache1'</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MaTacheWeb1</span><span class="p">())</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Vous pouvez tester la t√¢che web avec le lien de la zone et le param√®tre GET <strong>appelleTache</strong>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?appelleTache=tache1
</code></pre></div></div>

<h3 id="le-fichier-etat-de-la-t√¢che-web">Le fichier Etat de la t√¢che web</h3>

<p>L‚Äô√©tat de la t√¢che est sauvegard√© dans le fichier de ce format :
<strong>&lt;NomDossierTaches-du-GestTachesWeb&gt;/&lt;IDInstanceCalc-tache-web&gt;.dat</strong>
Si vous supprimez ce fichier, la t√¢che web sera ex√©cut√©e au prochain affichage de la zone web.</p>

<h2 id="composants-iu">Composants IU</h2>

<p>Les composants IU permettent d‚Äôinteragir avec les utilisateurs.</p>

<h3 id="utilisation-1">Utilisation</h3>

<p>Vous devez suivre ce proc√©d√© :</p>

<ol>
  <li>Initier le composant
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$comp</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFormulaireDonnesHtml</span><span class="p">()</span> <span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Renseigner ses propri√©t√©s d‚Äôinitiation, s‚Äôil en poss√®de
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$comp</span><span class="o">-&gt;</span><span class="nc">InscrireCommandeExecuter</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Adoptez le script ou la zone contexte par les m√©thodes AdopteScript($nom, &amp; $script) ou AdopteZone($nom, $zone).
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$comp</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"monComposant"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Charger la configuration du composant par la m√©thode ChargeConfig()
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$comp</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Renseigner ses autres propri√©t√©s
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$comp</span><span class="o">-&gt;</span><span class="nc">CommandeExecuter</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"VALIDER"</span> <span class="p">;</span>
<span class="nv">$comp</span><span class="o">-&gt;</span><span class="nc">SuccesMessageExecution</span> <span class="o">=</span> <span class="s2">"La page a √©t√© modifi√©e"</span> <span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Invoquer le Rendu du composant par la m√©thode RenduDispositif()
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ctn</span> <span class="o">=</span> <span class="nv">$comp</span><span class="o">-&gt;</span><span class="nf">RenduDispositif</span><span class="p">()</span> <span class="p">;</span>
</code></pre></div>    </div>
    <h3 id="d√©finition-2">D√©finition</h3>
  </li>
</ol>

<p>Vous devez d√©clarer les composants IU dans la zone web, le document web ou le script web.
Pour le d√©finir (√©tape 1. √† 5 de l‚Äôutilisation), utilisez ces m√©thodes :</p>

<table>
  <thead>
    <tr>
      <th>Classe</th>
      <th>M√©thode</th>
      <th>Directives</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Document Web</td>
      <td>PrepareRendu(&amp; $zone)</td>
      <td>Aucun</td>
    </tr>
    <tr>
      <td>Zone Web</td>
      <td>DetermineEnvironnement(&amp; $script)</td>
      <td>Invoquer parent::DetermineEnvironnement($script) apr√®s avoir d√©fini le composant</td>
    </tr>
    <tr>
      <td>Script Web</td>
      <td>DetermineEnvironnement()</td>
      <td>Aucun</td>
    </tr>
  </tbody>
</table>

<p>Vous invoquez le rendu s√©par√©ment :</p>

<table>
  <thead>
    <tr>
      <th>Classe</th>
      <th>M√©thode</th>
      <th>Directives</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Document Web</td>
      <td>RenduEntete(&amp; $zone)</td>
      <td>Invoquer parent::RenduEntete($zone) avant le rendu du composant</td>
    </tr>
    <tr>
      <td>Document Web</td>
      <td>RenduPied(&amp; $zone)</td>
      <td>Invoquer parent::RenduPied($zone) apr√®s le rendu du composant</td>
    </tr>
    <tr>
      <td>Zone Web</td>
      <td>RenduContenuCorpsDocument ()</td>
      <td>Aucun</td>
    </tr>
    <tr>
      <td>Script Web</td>
      <td>protected RenduDispositifBrut()</td>
      <td>Aucun</td>
    </tr>
    <tr>
      <td>Script Web</td>
      <td>RenduSpecifique()</td>
      <td>Aucun</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Cas d'un script</span>
<span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// D√©claration</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvTableauDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"tabl1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">RenduDispositif</span><span class="p">()</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="types-de-composant">Types de composant</h3>

<h4 id="donn√©es">Donn√©es</h4>

<table>
  <thead>
    <tr>
      <th>Nom</th>
      <th>Classe</th>
      <th>R√¥le</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Tableau de donn√©es Html</td>
      <td>PvTableauDonneesHtml</td>
      <td>Affiche sous forme de tableau des donn√©es</td>
    </tr>
    <tr>
      <td>Grille de donn√©es Html</td>
      <td>PvGrilleDonneesHtml</td>
      <td>Affiche sous forme de grille des donn√©es</td>
    </tr>
    <tr>
      <td>R√©p√©teur de donn√©es Html</td>
      <td>PvRepeteurDonneesHtml</td>
      <td>Similaire √† la grille de donn√©es, sans organiser par ligne / colonne</td>
    </tr>
    <tr>
      <td>Formulaire de donn√©es Html</td>
      <td>PvFormulaireDonneesHtml</td>
      <td>Affiche sous forme de formulaire de donn√©es</td>
    </tr>
  </tbody>
</table>

<h4 id="graphiques-et-statistiques">Graphiques et statistiques</h4>

<table>
  <thead>
    <tr>
      <th>Nom</th>
      <th>Classe</th>
      <th>R√¥le</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Chart pChart</td>
      <td>PvPChart</td>
      <td>Chart r√©alis√©e avec la librairie PHP pChart 2.0</td>
    </tr>
  </tbody>
</table>

<h4 id="sliders">Sliders</h4>

<table>
  <thead>
    <tr>
      <th>Nom</th>
      <th>Classe</th>
      <th>R√¥le</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Slider JQuery Camera</td>
      <td>PvJQueryCamera</td>
      <td>Slider r√©alis√© √† partir de la librairie Javascript jQuery Camera</td>
    </tr>
  </tbody>
</table>

<h2 id="le-tableau-de-donn√©es">Le Tableau de Donn√©es</h2>

<h3 id="pr√©sentation-3">Pr√©sentation</h3>

<p>Le tableau de donn√©es est un composant IU. Il affiche :</p>
<ul>
  <li>Un formulaire de champs pour filtrer les r√©sultats</li>
  <li>Un bloc de commandes, pour l‚Äôexportation des r√©sultats √† un format pr√©cis‚Ä¶</li>
  <li>Un tableau des r√©sultats de la recherche
La classe de ce composant est <strong>PvTableauDonnesHtml</strong>.</li>
</ul>

<p><img src="images/tabldonneeshtml.png" alt="Apercu tableau donn√©es" /></p>

<h3 id="utilisation-2">Utilisation</h3>

<p>Il utilise toujours un fournisseur de donn√©es pour le rendu.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// D√©claration</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvTableauDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"tabl1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des filtres de s√©lection</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereFltSelectHttpGet</span><span class="p">(</span><span class="s2">"expression"</span><span class="p">,</span> <span class="s2">"champ1 like concat(&lt;self&gt;, '%')"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Expression"</span> <span class="p">;</span>
<span class="c1">// D√©finition des colonnes</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefColCachee</span><span class="p">(</span><span class="s2">"id"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefCol</span><span class="p">(</span><span class="s2">"champ1"</span><span class="p">,</span> <span class="s2">"Champ 1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefCol</span><span class="p">(</span><span class="s2">"champ2"</span><span class="p">,</span> <span class="s2">"Champ 2"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// D√©finition du fournisseur de donn√©es</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFournisseurDonneesSql</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">BaseDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MaBD1</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">RequeteSelection</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">RenduDispositif</span><span class="p">()</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="filtres-de-s√©lection">Filtres de s√©lection</h3>

<table>
  <thead>
    <tr>
      <th>M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>InsereFltSelectHttpGet($nom, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre http GET</td>
    </tr>
    <tr>
      <td>InsereFltSelectHttpPost($nom, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre http POST</td>
    </tr>
    <tr>
      <td>InsereFltSelectHttpUpload($nom, $cheminDossierDest=‚Äù‚Äù, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre http UPLOAD. Tous les fichiers t√©l√©charg√©s seront d√©pos√©s dans le r√©pertoire $cheminDossierDest</td>
    </tr>
    <tr>
      <td>InsereFltSelectSession($nom, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre contenant la valeur d‚Äôune session</td>
    </tr>
    <tr>
      <td>InsereFltSelectFixe($nom, $valeur, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre bas√© sur une valeur fixe</td>
    </tr>
    <tr>
      <td>InsereFltSelectCookie($nom, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre contenant la valeur d‚Äôun cookie</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// D√©claration</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvTableauDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"tabl1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des filtres de s√©lection</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereFltSelectHttpGet</span><span class="p">(</span><span class="s2">"expression"</span><span class="p">,</span> <span class="s2">"champ1 like concat(&lt;self&gt;, '%')"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Expression"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereFltSelectFixe</span><span class="p">(</span><span class="s2">"est_actif"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"active = &lt;self&gt;"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// ...</span>
</code></pre></div></div>

<h3 id="d√©finitions-de-colonne">D√©finitions de colonne</h3>

<table>
  <thead>
    <tr>
      <th>Propri√©t√© / M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$DefinitionColonnes</td>
      <td>Tableau des d√©finitions de colonne</td>
    </tr>
    <tr>
      <td>InsereDefColCachee($nomDonnees, $aliasDonnees=‚Äù‚Äù)</td>
      <td>Inscrit une d√©finition de colonne cach√©e.</td>
    </tr>
    <tr>
      <td>InsereDefColInvisible($nomDonnees, $aliasDonnees=‚Äù‚Äù)</td>
      <td>¬†</td>
    </tr>
    <tr>
      <td>InsereDefCol($nomDonnees, $libelle=‚Äù‚Äù, $aliasDonnees=‚Äù‚Äù)</td>
      <td>Inscrit une d√©finition de colonne, avec un libell√©.</td>
    </tr>
    <tr>
      <td>InsereDefColBool($nomDonnees, $libelle=‚Äù‚Äù, $aliasDonnees=‚Äù‚Äù, $valPositive=‚Äù‚Äù, $valNegative=‚Äù‚Äù)</td>
      <td>Inscrit une d√©finition de colonne qui affiche un libell√© en fonction d‚Äôune valeur bool√©enne.</td>
    </tr>
    <tr>
      <td>InsereDefColChoix($nomDonnees, $libelle=‚Äù‚Äù, $aliasDonnees=‚Äù‚Äù, $valsChoix=array())</td>
      <td>Inscrit une d√©finition de colonne qui affiche un libell√© en fonction d‚Äôune valeur.</td>
    </tr>
    <tr>
      <td>InsereDefColMonnaie($nomDonnees, $libelle=‚Äù‚Äù, $aliasDonnees=‚Äù‚Äù)</td>
      <td>Inscrit une d√©finition de colonne au format mon√©taire</td>
    </tr>
    <tr>
      <td>InsereDefColMoney($nomDonnees, $libelle=‚Äù‚Äù, $aliasDonnees=‚Äù‚Äù)</td>
      <td>¬†</td>
    </tr>
    <tr>
      <td>InsereDefColDateFr($nomDonnees, $libelle=‚Äù‚Äù, $inclureHeure=0)</td>
      <td>Inscrit une d√©finition de colonne au format Fran√ßais (dd/mm/yyyy). Si $inclureHeure est √©gal √† 1, l‚Äôheure sera affich√©e √©galement.</td>
    </tr>
    <tr>
      <td>InsereDefColDateTimeFr($nomDonnees, $libelle=‚Äù‚Äù, $aliasDonnees=‚Äù‚Äù)</td>
      <td>Inscrit une d√©finition de colonne au format Fran√ßais (dd/mm/yyyy hh:mi:ss)</td>
    </tr>
    <tr>
      <td>InsereDefColDetail($nomDonnees, $libelle=‚Äù‚Äù, $aliasDonnees=‚Äù‚Äù)</td>
      <td>Inscrit une d√©finition de colonne, qui affiche les 1ers caract√®res de la ligne. Si vous posez le curseur sur cette cellule, un bloc contenant le texte int√©gral appara√Ætra.</td>
    </tr>
    <tr>
      <td>InsereDefColHtml($modeleHtml=‚Äù‚Äù, $libelle=‚Äù‚Äù)</td>
      <td>Inscrit une d√©finition de colonne qui affichera un contenu HTML.</td>
    </tr>
    <tr>
      <td>InsereDefColTimestamp($nomDonnees, $libelle=‚Äù‚Äù, $formatDate=‚Äùd/m/Y H:i:s‚Äù)</td>
      <td>Inscrit une d√©finition de colonne qui affichera une date √† partir d‚Äôun timestamp</td>
    </tr>
    <tr>
      <td>InsereDefColActions($libelle, $actions=array())</td>
      <td>Inscrit une d√©finition de colonne affichera des liens.</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// D√©claration</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvTableauDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"tabl1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="c1">// D√©finition des colonnes</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefColCachee</span><span class="p">(</span><span class="s2">"id"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefCol</span><span class="p">(</span><span class="s2">"champ1"</span><span class="p">,</span> <span class="s2">"Champ 1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefColMoney</span><span class="p">(</span><span class="s2">"total"</span><span class="p">,</span> <span class="s2">"Total TTC"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefColHtml</span><span class="p">(</span><span class="s1">'&lt;p&gt;&lt;b&gt;#${id}. ${champ1}&lt;/b&gt;&lt;/p&gt;'</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// ...</span>
</code></pre></div></div>

<h3 id="source-de-valeurs-suppl√©mentaires">Source de valeurs suppl√©mentaires</h3>

<p>Vous pouvez √©tendre les lignes calcul√©es dans le tableau de donn√©es. Utilisez la propri√©t√© <strong>$SourceValeursSuppl</strong>. Etendez la classe <strong>PvSrcValsSupplLgnDonnees</strong> pour r√©√©crire sa m√©thode <strong>Applique(&amp; $composant, $ligneDonnees)</strong>.
Vous utiliserez ces nouvelles valeurs uniquement dans une d√©finition de colonne HTML.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">SrcValsSuppl1</span> <span class="kd">extends</span> <span class="nc">PvSrcValsSupplLgnDonnees</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">Applique</span><span class="p">(</span><span class="o">&amp;</span> <span class="nv">$composant</span><span class="p">,</span> <span class="nv">$ligneDonnees</span><span class="p">)</span>
<span class="p">{</span>
<span class="nv">$results</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'menu'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;a href="?appelleScript=developper&amp;id='</span><span class="mf">.</span><span class="nb">urlencode</span><span class="p">(</span><span class="nv">$ligneDonnees</span> <span class="p">[</span><span class="s2">"id"</span><span class="p">])</span><span class="mf">.</span><span class="s1">'"&gt;+&lt;/a&gt;'</span><span class="p">)</span> <span class="p">;</span>
<span class="k">return</span> <span class="nb">array_merge</span><span class="p">(</span><span class="nv">$ligneDonnees</span><span class="p">,</span> <span class="nv">$results</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvTableauDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"tabl1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nc">SourceValeursSuppl</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SrcValsSuppl1</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefColCachee</span><span class="p">(</span><span class="s2">"id"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefColHtml</span><span class="p">(</span><span class="s1">'${menu} ${id}'</span><span class="p">,</span> <span class="s1">'Actions'</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="autres-propri√©t√©s">Autres propri√©t√©s</h3>

<table>
  <thead>
    <tr>
      <th>Propri√©t√© / M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$Largeur</td>
      <td>Largeur du formulaire de filtres</td>
    </tr>
    <tr>
      <td>$LargeurFormulaireFiltres</td>
      <td>Largeur du formulaire de filtres</td>
    </tr>
    <tr>
      <td>$AlignFormulaireFiltres</td>
      <td>Alignement du formulaire de filtres</td>
    </tr>
    <tr>
      <td>$AlignBoutonSoumettreFormulaireFiltres</td>
      <td>Alignement du bouton Soumettre du formulaire de filtres</td>
    </tr>
    <tr>
      <td>$TitreBoutonSoumettreFormulaireFiltres</td>
      <td>Libell√© du bouton Soumettre du formulaire de filtres</td>
    </tr>
    <tr>
      <td>$MessageAucunElement</td>
      <td>Message lorsqu‚Äôil n‚Äôy a aucun √©l√©ment trouv√©</td>
    </tr>
    <tr>
      <td>$ElementsEnCours</td>
      <td>Tableau contenant toutes les lignes trouv√©es</td>
    </tr>
    <tr>
      <td>$AlerterAucunElement</td>
      <td>Affichera le message s‚Äôil n‚Äôy a aucun √©l√©ment</td>
    </tr>
    <tr>
      <td>$TriPossible</td>
      <td>Permettra le tri</td>
    </tr>
    <tr>
      <td>$TotalElements</td>
      <td>Nombre de lignes retourn√©es</td>
    </tr>
    <tr>
      <td>$CacherNavigateurRangees</td>
      <td>Cacher le navigateur de rang√©es</td>
    </tr>
    <tr>
      <td>$CacherFormulaireFiltres</td>
      <td>Cacher le formulaire de filtres</td>
    </tr>
    <tr>
      <td>$CacherBlocCommandes</td>
      <td>Cacher le bloc de commandes</td>
    </tr>
    <tr>
      <td>$MaxElementsPossibles = array(20)</td>
      <td>Nombres maximum de lignes par rang√©e</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvTableauDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"tabl1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nc">CacherNavigateurRangees</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nc">TriPossible</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nc">MessageAucunElement</span> <span class="o">=</span> <span class="s2">"Aucune facture trouv&amp;eacute;e"</span> <span class="p">;</span>
</code></pre></div></div>

<h3 id="liens-daction">Liens d‚Äôaction</h3>

<table>
  <thead>
    <tr>
      <th>M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>InsereLienAction(&amp; $col, $formatUrl=‚Äô‚Äô, $formatLib=‚Äô‚Äô)</td>
      <td>Inscrit un lien dans la colonne Action $col.</td>
    </tr>
    <tr>
      <td>InsereLienActionAvant(&amp; $col, $index, $formatUrl=‚Äô‚Äô, $formatLib=‚Äô‚Äô)</td>
      <td>Inscrit un lien dans la colonne Action $col √† la position $index</td>
    </tr>
    <tr>
      <td>InsereIconeAction(&amp; $col, $formatUrl=‚Äô‚Äô, $formatCheminIcone=‚Äô‚Äô, $formatLib=‚Äô‚Äô)</td>
      <td>Inscrit une ic√¥ne dans la colonne Action $col.</td>
    </tr>
    <tr>
      <td>InsereIconeActionAvant(&amp; $col, $index, $formatUrl=‚Äô‚Äô, $formatCheminIcone=‚Äô‚Äô, $formatLib=‚Äô‚Äô)</td>
      <td>Inscrit une ic√¥ne dans la colonne Action $col √† la position $index</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvTableauDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"tabl1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="nv">$defColActs</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereDefColActions</span><span class="p">(</span><span class="s2">"Actions"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// D√©finition des liens</span>
<span class="nv">$lien1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereLienAction</span><span class="p">(</span><span class="nv">$defColActs</span><span class="p">,</span> <span class="s1">'?appelleScript=${id}'</span><span class="p">,</span> <span class="s1">'Modifier ${titre}'</span><span class="p">)</span> <span class="p">;</span>
</code></pre></div></div>

<h3 id="commandes">Commandes</h3>

<table>
  <thead>
    <tr>
      <th>Propri√©t√© / M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$Commandes</td>
      <td>Tableau contenant toutes les commandes</td>
    </tr>
    <tr>
      <td>InsereCommande($nom, $commande)</td>
      <td>Inscrit une commande dans le tableau</td>
    </tr>
    <tr>
      <td>InscritCmdRafraich($libelle=‚ÄôActualiser‚Äô, $cheminIcone=‚Äô‚Äô)</td>
      <td>Inscrit une commande qui soumet le formulaire de filtres</td>
    </tr>
    <tr>
      <td>InsereCmdRedirectUrl($nomCmd, $url, $libelle=‚Äô‚Äô)</td>
      <td>Inscrit une commande qui redirige sur une URL</td>
    </tr>
    <tr>
      <td>InsereCmdRedirectScript($nomCmd, $nomScript, $libelle=‚Äô‚Äô, $params=array())</td>
      <td>Inscrit une commande qui redirige sur un script de la zone</td>
    </tr>
    <tr>
      <td>InsereCmdScriptSession($nomCmd, $libelle=‚Äô‚Äô, $urlDefaut=array())</td>
      <td>Inscrit une commande qui redirige sur le script session de la zone</td>
    </tr>
    <tr>
      <td>InsereCmdExportTexte($nomCmd, $libelle=‚Äô‚Äô)</td>
      <td>Inscrit une commande qui exporte les r√©sultats au format texte (CSV)</td>
    </tr>
    <tr>
      <td>InsereCmdExportExcel($nomCmd, $libelle=‚Äô‚Äô)</td>
      <td>Inscrit une commande qui exporte les r√©sultats au format HTML pour Excel</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvTableauDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"tabl1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// ...</span>
<span class="nv">$cmd1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Tabl1</span><span class="o">-&gt;</span><span class="nf">InsereCmdExportTexte</span><span class="p">(</span><span class="s2">"cmdTxt"</span><span class="p">,</span> <span class="s2">"CSV"</span><span class="p">)</span> <span class="p">;</span>
</code></pre></div></div>

<h3 id="rendu-du-tableau-de-donn√©es">Rendu du tableau de donn√©es</h3>

<p>Vous pouvez personnaliser le rendu du tableau de donn√©es avec sa propri√©t√© <strong>$DessinateurFiltresSelection</strong>.
R√©f√©rez-vous au rendu des filtres d‚Äô√©dition du formulaire de donn√©es pour l‚Äôutilisation.</p>

<h3 id="caract√©ristiques-apr√®s-rendu">Caract√©ristiques apr√®s rendu</h3>

<p>Apr√®s le rendu du tableau de donn√©es, plusieurs informations sont disponibles comme propri√©t√©s.</p>

<h2 id="la-grille-de-donn√©es">La Grille de Donn√©es</h2>

<h3 id="utilisation-3">Utilisation</h3>

<p>La grille de donn√©es se base sur le tableau de donn√©es. Ce composant affiche les cellules dans une grille.</p>

<p>Pour d√©finir la grille, utilisez ces propri√©t√©s :</p>

<ul>
  <li><strong>MaxColonnes</strong> : Nombre de colonnes</li>
  <li><strong>ContenuLigneModele</strong> : Contenu de chaque cellule. Vous pouvez ajouter chaque colonne de donn√©es √† partir de la syntaxe ${nom_colonne}.</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// D√©claration</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvGrilleDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"Grille1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des filtres de s√©lection</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nf">InsereFltSelectHttpGet</span><span class="p">(</span><span class="s2">"expression"</span><span class="p">,</span> <span class="s2">"champ1 like concat(&lt;self&gt;, '%')"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Expression"</span> <span class="p">;</span>
<span class="c1">// D√©finition des colonnes</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nf">InsereDefColCachee</span><span class="p">(</span><span class="s2">"id"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nf">InsereDefCol</span><span class="p">(</span><span class="s2">"champ1"</span><span class="p">,</span> <span class="s2">"Champ 1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nf">InsereDefCol</span><span class="p">(</span><span class="s2">"champ2"</span><span class="p">,</span> <span class="s2">"Champ 2"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nc">ContenuLigneModele</span> <span class="o">=</span> <span class="s1">'&lt;h3&gt;${id}. ${champ1}&lt;/h3&gt;
&lt;p&gt;${champ2}&lt;/p&gt;'</span> <span class="p">;</span>
<span class="c1">// D√©finition du fournisseur de donn√©es</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFournisseurDonneesSql</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">BaseDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MaBD1</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">RequeteSelection</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nf">RenduDispositif</span><span class="p">()</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="propri√©t√©s-sp√©cifiques">Propri√©t√©s sp√©cifiques</h3>

<table>
  <thead>
    <tr>
      <th>Propri√©t√© / M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>AlignVCellule</td>
      <td>Alignement vertical de la cellule. Correspond √† l‚Äôattribut HTML <strong>valign</strong>.</td>
    </tr>
    <tr>
      <td>AlignCellule</td>
      <td>Alignement horizontal de la cellule. Correspond √† l‚Äôattribut HTML <strong>align</strong>.</td>
    </tr>
    <tr>
      <td>EmpilerValeursSiModLigVide</td>
      <td>Empile les valeurs des d√©finitions de colonnes si l‚Äôattribut <strong>ContenuLigneModele</strong> est vide. Poss√®de la valeur 1 par d√©faut.</td>
    </tr>
    <tr>
      <td>OrientationValeursEmpilees</td>
      <td>Orientation des valeurs empil√©es si <strong>ContenuLigneModele</strong> est vide. Poss√®de la valeur ‚Äúvertical‚Äù par d√©faut.</td>
    </tr>
  </tbody>
</table>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// D√©claration</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvGrilleDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"Grille1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des propri√©t√©s</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nc">AlignVCellule</span> <span class="o">=</span> <span class="s2">"top"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Grille1</span><span class="o">-&gt;</span><span class="nc">EmpilerValeursSiModLigVide</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="c1">// ...</span>
</code></pre></div></div>

<h2 id="le-r√©p√©teur-de-donn√©es">Le R√©p√©teur de donn√©es</h2>

<h3 id="utilisation-4">Utilisation</h3>

<p>Le r√©p√©teur de donn√©es se base sur la grille de donn√©es. Il affiche les cellules successivement, sans les placer dans une grille ou ins√©rer des marges entre elles.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// D√©claration</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvGrilleDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"Repet1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des filtres de s√©lection</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nf">InsereFltSelectHttpGet</span><span class="p">(</span><span class="s2">"expression"</span><span class="p">,</span> <span class="s2">"champ1 like concat(&lt;self&gt;, '%')"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Expression"</span> <span class="p">;</span>
<span class="c1">// D√©finition des colonnes</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nf">InsereDefColCachee</span><span class="p">(</span><span class="s2">"id"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nf">InsereDefCol</span><span class="p">(</span><span class="s2">"champ1"</span><span class="p">,</span> <span class="s2">"Champ 1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nf">InsereDefCol</span><span class="p">(</span><span class="s2">"champ2"</span><span class="p">,</span> <span class="s2">"Champ 2"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nc">ContenuLigneModele</span> <span class="o">=</span> <span class="s1">'&lt;h3&gt;${id}. ${champ1}&lt;/h3&gt;
&lt;p&gt;${champ2}&lt;/p&gt;'</span> <span class="p">;</span>
<span class="c1">// D√©finition du fournisseur de donn√©es</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFournisseurDonneesSql</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">BaseDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MaBD1</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">RequeteSelection</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Repet1</span><span class="o">-&gt;</span><span class="nf">RenduDispositif</span><span class="p">()</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="le-formulaire-de-donn√©es">Le Formulaire de Donn√©es</h2>

<h3 id="pr√©sentation-4">Pr√©sentation</h3>

<p>Le formulaire de donn√©es est un composant IU.
Il affiche :</p>
<ul>
  <li>Un message d‚Äôex√©cution :</li>
  <li>Un formulaire de filtres : Il contiendra des champs qui seront soumis par la m√©thode ¬´ POST ¬ª.</li>
  <li>Un bloc de commandes : Il contiendra des boutons, qui recevront les valeurs du formulaire</li>
</ul>

<p><img src="images/formulairedonneeshtml.png" alt="Apercu formulaire donn√©es" /></p>

<p>La classe du formulaire de donn√©es est <strong>PvFormulaireDonneesHtml</strong>.</p>

<h3 id="utilisation-5">Utilisation</h3>

<p>Voici un exemple d‚Äôutilisation.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript2</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$Form1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$Flt1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$Flt2</span> <span class="p">;</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// Initiation</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFormulaireDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Toujours afficher le formulaire</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureElementEnCours</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureTotalElements</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="c1">// D√©finir la classe commande "Executer"</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">NomClasseCommandeExecuter</span> <span class="o">=</span> <span class="s2">"MaCmdExecScript2"</span> <span class="p">;</span>
<span class="c1">// Liaison avec le script en cours</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"form1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des autres propri√©t√©s</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"champ1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Champ 1"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"champ2"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Champ 2"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="c1">// Rendu du formulaire de donnees</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">RenduDispositif</span><span class="p">()</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">MaCmdExecScript2</span> <span class="kd">extends</span> <span class="nc">PvCommandeExecuterBase</span>
<span class="p">{</span>
<span class="k">protected</span> <span class="k">function</span> <span class="n">ExecuteInstructions</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">ConfirmeSucces</span><span class="p">(</span><span class="s2">"Commande ex√©cut√©e avec succ√®s"</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="interaction-avec-base-de-donn√©es">Interaction avec base de donn√©es</h3>

<p>Vous pouvez manipuler les bases de donn√©es avec son fournisseur de donn√©es.</p>

<h4 id="ajout-denregistrement">Ajout d‚Äôenregistrement</h4>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript2</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// Initiation</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFormulaireDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Toujours afficher le formulaire</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureElementEnCours</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureTotalElements</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="c1">// D√©finir la classe commande "Executer"</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">NomClasseCommandeExecuter</span> <span class="o">=</span> <span class="s2">"PvCommandeAjoutElement"</span> <span class="p">;</span>
<span class="c1">// Liaison avec le script en cours</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"form1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des autres propri√©t√©s</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"colonne1"</span><span class="p">,</span> <span class="s2">"colonne1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Colonne 1"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"colonne2"</span><span class="p">,</span> <span class="s2">"colonne2"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Colonne 2"</span> <span class="p">;</span>
<span class="c1">// D√©finition du fournisseur de donn√©es</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFournisseurDonneesSql</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">BaseDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MaBD</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">RequeteSelection</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">TableEdition</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="modification-denregistrement">Modification d‚Äôenregistrement</h4>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript2</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// Initiation</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFormulaireDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Afficher le formulaire s'il y a un enregistrement</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureElementEnCours</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureTotalElements</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="c1">// D√©finir la classe commande "Executer"</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">NomClasseCommandeExecuter</span> <span class="o">=</span> <span class="s2">"PvCommandeModifElement"</span> <span class="p">;</span>
<span class="c1">// Liaison avec le script en cours</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"form1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des filtres de s√©lection</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Cle1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltSelectHttpGet</span><span class="p">(</span><span class="s2">"macle1"</span><span class="p">,</span> <span class="s2">"cle1 = &lt;self&gt;"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// D√©finition des autres propri√©t√©s</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"colonne1"</span><span class="p">,</span> <span class="s2">"colonne1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Colonne 1"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"colonne2"</span><span class="p">,</span> <span class="s2">"colonne2"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Colonne 2"</span> <span class="p">;</span>
<span class="c1">// D√©finition du fournisseur de donn√©es</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFournisseurDonneesSql</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">BaseDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MaBD</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">RequeteSelection</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">TableEdition</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="suppression-denregistrement">Suppression d‚Äôenregistrement</h4>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript2</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// Initiation</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFormulaireDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Afficher le formulaire s'il y a un enregistrement</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureElementEnCours</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureTotalElements</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
<span class="c1">// Emp√™cher l'√©dition des filtres</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">Editable</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="c1">// D√©finir la classe commande "Executer"</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">NomClasseCommandeExecuter</span> <span class="o">=</span> <span class="s2">"PvCommandeSupprElement"</span> <span class="p">;</span>
<span class="c1">// Liaison avec le script en cours</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"form1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des filtres de s√©lection</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Cle1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltSelectHttpGet</span><span class="p">(</span><span class="s2">"macle1"</span><span class="p">,</span> <span class="s2">"cle1 = &lt;self&gt;"</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// D√©finition des autres propri√©t√©s</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"colonne1"</span><span class="p">,</span> <span class="s2">"colonne1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Colonne 1"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"colonne2"</span><span class="p">,</span> <span class="s2">"colonne2"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Colonne 2"</span> <span class="p">;</span>
<span class="c1">// D√©finition du fournisseur de donn√©es</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFournisseurDonneesSql</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">BaseDonnees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MaBD</span><span class="p">()</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">RequeteSelection</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">FournisseurDonnees</span><span class="o">-&gt;</span><span class="nc">TableEdition</span> <span class="o">=</span> <span class="s2">"matable1"</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="propri√©t√©s-dinitiation">Propri√©t√©s d‚Äôinitiation</h3>

<table>
  <thead>
    <tr>
      <th>Propri√©t√©</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$InclureElementEnCours</td>
      <td>Le formulaire sera disponible si le fournisseur de donn√©es contient au moins un enregistrement</td>
    </tr>
    <tr>
      <td>$InclureTotalElement</td>
      <td>Comptera le nombre d‚Äôenregistrement du fournisseur de donn√©es.</td>
    </tr>
    <tr>
      <td>$InscrireCommandeExecuter</td>
      <td>Cr√©e une commande ¬´ Ex√©cuter ¬ª au chargement de  config du composant</td>
    </tr>
    <tr>
      <td>$LibelleCommandeExecuter</td>
      <td>Libell√© de la commande ¬´ Ex√©cuter ¬ª</td>
    </tr>
    <tr>
      <td>$NomClasseCommandeExecuter</td>
      <td>Nom de la classe commande ¬´ Ex√©cuter ¬ª</td>
    </tr>
    <tr>
      <td>$InscrireCommandeAnnuler</td>
      <td>Cr√©e une commande ¬´ Annuler ¬ª au chargement de  config du composant</td>
    </tr>
    <tr>
      <td>$LibelleCommandeAnnuler</td>
      <td>Libell√© de la commande ¬´ Annuler ¬ª</td>
    </tr>
    <tr>
      <td>$NomClasseCommandeAnnuler</td>
      <td>Nom de la classe commande ¬´ Annuler ¬ª</td>
    </tr>
  </tbody>
</table>

<h3 id="filtres-de-s√©lection-1">Filtres de s√©lection</h3>

<table>
  <thead>
    <tr>
      <th>M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>InsereFltLgSelectHttpGet($nom, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre http GET</td>
    </tr>
    <tr>
      <td>InsereFltLgSelectHttpPost($nom, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre http POST</td>
    </tr>
    <tr>
      <td>InsereFltLgSelectHttpUpload($nom, $cheminDossierDest=‚Äù‚Äù, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre http UPLOAD. Tous les fichiers t√©l√©charg√©s seront d√©pos√©s dans le dossier $cheminDossierDest.</td>
    </tr>
    <tr>
      <td>InsereFltLgSelectSession($nom, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre contenant la valeur d‚Äôune session</td>
    </tr>
    <tr>
      <td>InsereFltLgSelectFixe($nom, $valeur, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre bas√© sur une valeur fixe</td>
    </tr>
    <tr>
      <td>InsereFltLgSelectCookie($nom, $exprDonnees=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre contenant la valeur d‚Äôun cookie</td>
    </tr>
  </tbody>
</table>

<h3 id="filtres-d√©dition">Filtres d‚Äô√©dition</h3>

<table>
  <thead>
    <tr>
      <th>M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>InsereFltEditHttpGet($nom, $colLiee=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre http GET</td>
    </tr>
    <tr>
      <td>InsereFltEditHttpPost($nom, $colLiee=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre http POST</td>
    </tr>
    <tr>
      <td>InsereFltEditHttpUpload($nom, $cheminDossierDest=‚Äù‚Äù, $colLiee=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre http UPLOAD. Tous les fichiers t√©l√©charg√©s seront d√©pos√©s dans le dossier $cheminDossierDest</td>
    </tr>
    <tr>
      <td>InsereFltEditSession($nom, $colLiee=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre contenant la valeur d‚Äôune session</td>
    </tr>
    <tr>
      <td>InsereFltEditFixe($nom, $valeur, $colLiee=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre bas√© sur une valeur fixe</td>
    </tr>
    <tr>
      <td>InsereFltEditCookie($nom, $colLiee=‚Äô‚Äô, $nomClsComp=‚Äô‚Äô)</td>
      <td>Ajoute un filtre contenant la valeur d‚Äôun cookie</td>
    </tr>
  </tbody>
</table>

<h3 id="autres-propri√©t√©s-1">Autres propri√©t√©s</h3>

<table>
  <thead>
    <tr>
      <th>Propri√©t√© / M√©thode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$CacherBlocCommandes</td>
      <td>N‚Äôaffiche pas le bloc de commandes</td>
    </tr>
    <tr>
      <td>$CacherFormulaireFiltres</td>
      <td>N‚Äôaffiche pas le formulaire des filtres</td>
    </tr>
    <tr>
      <td>$MessageAucunElement</td>
      <td>Message √† afficher si le formulaire ne trouve pas d‚Äô√©l√©ment</td>
    </tr>
    <tr>
      <td>$CacherFormulaireFiltresApresCmd</td>
      <td>Cache le formulaire de filtres si une commande est ex√©cut√©e</td>
    </tr>
    <tr>
      <td>$Largeur</td>
      <td>Largeur du formulaire</td>
    </tr>
    <tr>
      <td>$ElementsEnCours</td>
      <td>Lignes retourn√©es apr√®s le rendu</td>
    </tr>
    <tr>
      <td>$ElementEnCours</td>
      <td>1√®re Ligne retourn√©e apr√®s le rendu</td>
    </tr>
    <tr>
      <td>RedirigeCmdAnnulerVersUrl($url)</td>
      <td>Redirige la page vers l‚ÄôURL lorsque vous cliquerez sur le bouton ¬´ Annuler ¬ª du formulaire</td>
    </tr>
    <tr>
      <td>RedirigeCmdExecuterVersUrl($url)</td>
      <td>Redirige la page vers l‚ÄôURL lorsque vous cliquerez sur le bouton ¬´ Executer ¬ª du formulaire</td>
    </tr>
    <tr>
      <td>FigeFiltresEdition()</td>
      <td>Fixe tous les filtres √©dition en lecture seule</td>
    </tr>
    <tr>
      <td>CacheFiltresEdition()</td>
      <td>Cache tous les filtres √©dition</td>
    </tr>
    <tr>
      <td>DoitInclureElement()</td>
      <td>Confirme si les propri√©t√©s $InclureElementEnCours &amp; $InclureTotalElements sont vraies.</td>
    </tr>
    <tr>
      <td>AnnuleLiaisonParametres()</td>
      <td>Interdit les filtres d‚Äô√©dition de r√©cup√©rer les valeurs de leurs param√®tres.</td>
    </tr>
  </tbody>
</table>

<h3 id="commandes-1">Commandes</h3>

<table>
  <thead>
    <tr>
      <th>Classe</th>
      <th>Pr√©requis</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PvCommandeAnnulerBase</td>
      <td>Aucun</td>
      <td>Commande pour annuler l‚Äô√©dition du formulaire de donn√©es</td>
    </tr>
    <tr>
      <td>PvCommandeExecuterBase</td>
      <td>Aucun</td>
      <td>Commande pour ex√©cuter le formulaire de donn√©es. Veuillez √©tendre cette classe.</td>
    </tr>
    <tr>
      <td>PvCommandeAjoutElement</td>
      <td>Les propri√©t√©s InclureElementEnCours &amp; InclureTotalElements doivent avoir la valeur 0</td>
      <td>Commande pour ins√©rer un enregistrement dans le fournisseur de donn√©es du formulaire</td>
    </tr>
    <tr>
      <td>PvCommandeModifElement</td>
      <td>Les propri√©t√©s InclureElementEnCours &amp; InclureTotalElements doivent avoir la valeur 1</td>
      <td>Commande pour modifier un enregistrement dans le fournisseur de donn√©es du formulaire</td>
    </tr>
    <tr>
      <td>PvCommandeSupprElement</td>
      <td>Les propri√©t√©s InclureElementEnCours &amp; InclureTotalElements doivent avoir la valeur 1</td>
      <td>Commande pour supprimer un enregistrement dans le fournisseur de donn√©es du formulaire</td>
    </tr>
  </tbody>
</table>

<h3 id="rendu-du-formulaire-de-filtres">Rendu du formulaire de filtres</h3>

<p>Vous pouvez personnaliser le rendu du formulaire de filtres avec sa propri√©t√© <strong>$DessinateurFiltresEdition</strong>.
Veuillez cr√©er une classe h√©ritant de <strong>PvDessinFiltresDonneesHtml</strong> et r√©√©crire sa m√©thode publique <strong>Execute(&amp; $script, &amp; $composant, $parametres)</strong>.
Vous avez 2 m√©thodes dans la nouvelle classe, pour chaque filtre de donn√©es :</p>
<ul>
  <li><strong>RenduLibelleFiltre(&amp; $filtre)</strong> pour le libell√© du filtre de donn√©es</li>
  <li><strong>RenduFiltre(&amp; $filtre, &amp; $composant)</strong> pour le composant du filtre de donn√©es</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$Form1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$Flt1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$Flt2</span> <span class="p">;</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// Initiation</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFormulaireDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Toujours afficher le formulaire</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureElementEnCours</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureTotalElements</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="c1">// Definir le dessinateur de filtres edition</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">DessinateurFiltresEdition</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MonDessinFiltresDonnees</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Liaison avec le script en cours</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"form1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des autres propri√©t√©s</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"champ1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Champ 1"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"champ2"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Champ 2"</span> <span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="c1">// Rendu du formulaire de donnees</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">RenduDispositif</span><span class="p">()</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">MonDessinFiltresDonnees</span> <span class="kd">extends</span> <span class="nc">PvDessinFiltresDonneesHtml</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">Execute</span><span class="p">(</span><span class="o">&amp;</span> <span class="nv">$script</span><span class="p">,</span> <span class="o">&amp;</span> <span class="nv">$composant</span><span class="p">,</span> <span class="nv">$parametres</span><span class="p">)</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s1">'&lt;p&gt;&lt;b&gt;'</span><span class="mf">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">RenduLibelleFiltre</span><span class="p">(</span><span class="nv">$script</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="p">)</span><span class="mf">.</span><span class="s1">'&lt;b&gt;&lt;br&gt;'</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">RenduFiltre</span><span class="p">(</span><span class="nv">$script</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="p">,</span> <span class="nv">$composant</span><span class="p">)</span><span class="mf">.</span><span class="s1">'&lt;/p&gt;'</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s1">'&lt;hr&gt;'</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s1">'&lt;p&gt;&lt;b&gt;'</span><span class="mf">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">RenduLibelleFiltre</span><span class="p">(</span><span class="nv">$script</span><span class="o">-&gt;</span><span class="nc">Flt2</span><span class="p">)</span><span class="mf">.</span><span class="s1">'&lt;b&gt;&lt;br&gt;'</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">RenduFiltre</span><span class="p">(</span><span class="nv">$script</span><span class="o">-&gt;</span><span class="nc">Flt2</span><span class="p">,</span> <span class="nv">$composant</span><span class="p">)</span><span class="mf">.</span><span class="s1">'&lt;/p&gt;'</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="rendu-du-bloc-de-commandes">Rendu du bloc de commandes</h3>

<p>Pour personnaliser le rendu du bloc des commandes, utilisez la propri√©t√© <strong>$DessinateurBlocCommandes</strong>.
Veuillez cr√©er une classe h√©ritant de PvDessinCommandesHtml et r√©√©crire sa m√©thode publique <strong>Execute(&amp; $script, &amp; $composant, $parametres)</strong>.
Cette nouvelle classe donne le rendu d‚Äôune commande avec la m√©thode <strong>RenduCommande(&amp; $commande)</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MonScript1</span> <span class="kd">extends</span> <span class="nc">PvScriptWebSimple</span>
<span class="p">{</span>
<span class="k">public</span> <span class="nv">$Form1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$Flt1</span> <span class="p">;</span>
<span class="k">public</span> <span class="nv">$Flt2</span> <span class="p">;</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">DetermineEnvironnement</span><span class="p">()</span>
<span class="p">{</span>
<span class="c1">// Initiation</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PvFormulaireDonneesHtml</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Toujours afficher le formulaire</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureElementEnCours</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">InclureTotalElements</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
<span class="c1">// Definir le dessinateur de commandes</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nc">DessinateurBlocCommandes</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MonDessinCommandes</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// Liaison avec le script en cours</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">AdopteScript</span><span class="p">(</span><span class="s2">"form1"</span><span class="p">,</span> <span class="nv">$this</span><span class="p">)</span> <span class="p">;</span>
<span class="c1">// Chargement de la config</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">ChargeConfig</span><span class="p">()</span> <span class="p">;</span>
<span class="c1">// D√©finition des autres propri√©t√©s</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"champ1"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt1</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Champ 1"</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">InsereFltEditHttpPost</span><span class="p">(</span><span class="s2">"champ2"</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Flt2</span><span class="o">-&gt;</span><span class="nc">Libelle</span> <span class="o">=</span> <span class="s2">"Champ 2"</span> <span class="p">;</span>
<span class="c1">// Commandes</span>
<span class="c1">// ‚Ä¶</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">RenduSpecifique</span><span class="p">()</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="c1">// Rendu du formulaire de donnees</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nc">Form1</span><span class="o">-&gt;</span><span class="nf">RenduDispositif</span><span class="p">()</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">MonDessinCommandes</span> <span class="kd">extends</span> <span class="nc">PvDessinCommandesHtml</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">Execute</span><span class="p">(</span><span class="o">&amp;</span> <span class="nv">$script</span><span class="p">,</span> <span class="o">&amp;</span> <span class="nv">$composant</span><span class="p">,</span> <span class="nv">$parametres</span><span class="p">)</span>
<span class="p">{</span>
<span class="nv">$ctn</span> <span class="o">=</span> <span class="s1">''</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s1">'&lt;p&gt;'</span> <span class="p">;</span>
<span class="c1">// Le formulaire est dans la variable $composant</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">RenduCommande</span><span class="p">(</span><span class="nv">$composant</span><span class="o">-&gt;</span><span class="nc">CommandeAnnuler</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s1">'&lt;hr /&gt;'</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">RenduCommande</span><span class="p">(</span><span class="nv">$composant</span><span class="o">-&gt;</span><span class="nc">CommandeExecuter</span><span class="p">)</span> <span class="p">;</span>
<span class="nv">$ctn</span> <span class="mf">.</span><span class="o">=</span> <span class="s1">'&lt;/p&gt;'</span> <span class="p">;</span>
<span class="k">return</span> <span class="nv">$ctn</span> <span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
:ET